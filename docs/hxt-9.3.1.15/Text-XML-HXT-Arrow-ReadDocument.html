<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Text.XML.HXT.Arrow.ReadDocument</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Text-XML-HXT-Arrow-ReadDocument.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Text-XML-HXT-Arrow-ReadDocument.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">hxt-9.3.1.15: A collection of tools for processing XML with Haskell.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Copyright</th><td>Copyright (C) 2005-2013 Uwe Schmidt</td></tr><tr><th>License</th><td>MIT</td></tr><tr><th>Maintainer</th><td>Uwe Schmidt (uwe@fh-wedel.de)</td></tr><tr><th>Stability</th><td>stable</td></tr><tr><th>Portability</th><td>portable</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">Text.XML.HXT.Arrow.ReadDocument</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Compound arrows for reading an XML/HTML document or an XML/HTML string</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:readDocument">readDocument</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:SysConfigList">SysConfigList</a> -&gt; <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s b <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a></li><li class="src short"><a href="#v:readFromDocument">readFromDocument</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:SysConfigList">SysConfigList</a> -&gt; <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a></li><li class="src short"><a href="#v:readString">readString</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:SysConfigList">SysConfigList</a> -&gt; <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s b <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a></li><li class="src short"><a href="#v:readFromString">readFromString</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:SysConfigList">SysConfigList</a> -&gt; <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a></li><li class="src short"><a href="#v:hread">hread</a> :: <a href="Text-XML-HXT-Arrow-XmlArrow.html#t:ArrowXml">ArrowXml</a> a =&gt; a <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a></li><li class="src short"><a href="#v:hreadDoc">hreadDoc</a> :: <a href="Text-XML-HXT-Arrow-XmlArrow.html#t:ArrowXml">ArrowXml</a> a =&gt; a <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a></li><li class="src short"><a href="#v:xread">xread</a> :: <a href="Text-XML-HXT-Arrow-XmlArrow.html#t:ArrowXml">ArrowXml</a> a =&gt; a <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a></li><li class="src short"><a href="#v:xreadDoc">xreadDoc</a> :: <a href="Text-XML-HXT-Arrow-XmlArrow.html#t:ArrowXml">ArrowXml</a> a =&gt; a <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a></li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a name="v:readDocument" class="def">readDocument</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:SysConfigList">SysConfigList</a> -&gt; <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s b <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="src/Text-XML-HXT-Arrow-ReadDocument.html#readDocument" class="link">Source</a></p><div class="doc"><p>the main document input filter</p><p>this filter can be configured by a list of configuration options,
a value of type <code><a href="Text-XML-HXT-XmlState-TypeDefs.html#v:SysConfig">SysConfig</a></code></p><p>for all available options see module <code><a href="Text-XML-HXT-Arrow-XmlState.html#v:SystemConfig">SystemConfig</a></code></p><ul><li><code>withValidate yes/no</code> :
  switch on/off DTD validation. Only for XML parsed documents, not for HTML parsing.</li><li><code>withSubstDTDEntities yes/no</code> :
  switch on/off entity substitution for general entities defined in DTD validation.
  Default is <code>yes</code>.
  Switching this option and the validation off can lead to faster parsing, in that case
  reading the DTD documents is not longer necessary.
  Only used with XML parsed documents, not with HTML parsing.</li><li><code>withSubstHTMLEntities yes/no</code> :
  switch on/off entity substitution for general entities defined in HTML validation.
  Default is <code>no</code>.
  Switching this option on and the validation and substDTDEntities off can lead to faster parsing,
  in that case
  reading the DTD documents is not longer necessary, HTML general entities are still substituted.
  Only used with XML parsed documents, not with HTML parsing.</li><li><code>withParseHTML yes/no</code> :
  switch on HTML parsing.</li><li><code>withParseByMimeType yes/no</code> :
  select XML/HTML parser by document mime type.
  text/xml and text/xhtml are parsed as XML, text/html as HTML.</li><li><code>withCheckNamespaces yes/no</code> :
  Switch on/off namespace propagation and checking</li><li><code>withInputEncoding &lt;encoding-spec&gt;</code> :
  Set default encoding.</li><li><code>withTagSoup</code> :
  use light weight and lazy parser based on tagsoup lib.
  This is only available when package hxt-tagsoup is installed and
  the source contains an <code>import Text.XML.HXT.TagSoup</code>.</li><li><code>withRelaxNG &lt;schema.rng&gt;</code> :
  validate document with Relax NG, the parameter is for the schema URI.
  This implies using XML parser, no validation against DTD, and canonicalisation.</li><li><code>withCurl [&lt;curl-option&gt;...]</code> :
  Use the libCurl binding for HTTP access.
  This is only available when package hxt-curl is installed and
  the source contains an <code>import Text.XML.HXT.Curl</code>.</li><li><code>withHTTP [&lt;http-option&gt;...]</code> :
  Use the Haskell HTTP package for HTTP access.
  This is only available when package hxt-http is installed and
  the source contains an <code>import Text.XML.HXT.HTTP</code>.</li></ul><p>examples:</p><pre>readDocument [] &quot;test.xml&quot;</pre><p>reads and validates a document &quot;test.xml&quot;, no namespace propagation, only canonicalization is performed</p><pre>...
import Text.XML.HXT.Curl
...

readDocument [ withValidate        no
             , withInputEncoding   isoLatin1
             , withParseByMimeType yes
             , withCurl []
             ] &quot;http://localhost/test.php&quot;</pre><p>reads document &quot;test.php&quot;, parses it as HTML or XML depending on the mimetype given from the server, but without validation, default encoding <code><a href="../hxt-unicode-9.0.2.4/Data-String-EncodingNames.html#v:isoLatin1">isoLatin1</a></code>.
HTTP access is done via libCurl.</p><pre>readDocument [ withParseHTML       yes
             , withInputEncoding   isoLatin1
             ] &quot;&quot;</pre><p>reads a HTML document from standard input, no validation is done when parsing HTML, default encoding is <code><a href="../hxt-unicode-9.0.2.4/Data-String-EncodingNames.html#v:isoLatin1">isoLatin1</a></code>,</p><pre>readDocument [ withInputEncoding  isoLatin1
             , withValidate       no
             , withMimeTypeFile   &quot;/etc/mime.types&quot;
             , withStrictInput    yes
             ] &quot;test.svg&quot;</pre><p>reads an SVG document from &quot;test.svg&quot;, sets the mime type by looking in the system mimetype config file,
default encoding is <code><a href="../hxt-unicode-9.0.2.4/Data-String-EncodingNames.html#v:isoLatin1">isoLatin1</a></code>,</p><pre>...
import Text.XML.HXT.Curl
import Text.XML.HXT.TagSoup
...

readDocument [ withParseHTML      yes
             , withTagSoup
             , withProxy          &quot;www-cache:3128&quot;
             , withCurl           []
             , withWarnings       no
             ] &quot;http://www.haskell.org/&quot;</pre><p>reads Haskell homepage with HTML parser, ignoring any warnings
(at the time of writing, there were some HTML errors),
with http access via libCurl interface
and proxy &quot;www-cache&quot; at port 3128,
parsing is done with tagsoup HTML parser.
This requires packages &quot;hxt-curl&quot; and &quot;hxt-tagsoup&quot; to be installed</p><pre>readDocument [ withValidate          yes
             , withCheckNamespaces   yes
             , withRemoveWS          yes
             , withTrace             2
             , withHTTP              []
             ] &quot;http://www.w3c.org/&quot;</pre><p>read w3c home page (xhtml), validate and check namespaces, remove whitespace between tags,
trace activities with level 2.
HTTP access is done with Haskell HTTP package</p><pre>readDocument [ withValidate          no
             , withSubstDTDEntities  no
             ...
             ] &quot;http://www.w3c.org/&quot;</pre><p>read w3c home page (xhtml), but without accessing the DTD given in that document.
Only the predefined XML general entity refs are substituted.</p><pre>readDocument [ withValidate          no
             , withSubstDTDEntities  no
             , withSubstHTMLEntities yes
             ...
             ] &quot;http://www.w3c.org/&quot;</pre><p>same as above, but with substituion of all general entity refs defined in XHTML.</p><p>for minimal complete examples see <code><a href="Text-XML-HXT-Arrow-WriteDocument.html#v:writeDocument">writeDocument</a></code>
and <code><a href="Text-XML-HXT-Arrow-XmlState-RunIOStateArrow.html#v:runX">runX</a></code>, the main starting point for running an XML arrow.</p></div></div><div class="top"><p class="src"><a name="v:readFromDocument" class="def">readFromDocument</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:SysConfigList">SysConfigList</a> -&gt; <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="src/Text-XML-HXT-Arrow-ReadDocument.html#readFromDocument" class="link">Source</a></p><div class="doc"><p>the arrow version of <code><a href="Text-XML-HXT-Arrow-ReadDocument.html#v:readDocument">readDocument</a></code>, the arrow input is the source URI</p></div></div><div class="top"><p class="src"><a name="v:readString" class="def">readString</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:SysConfigList">SysConfigList</a> -&gt; <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s b <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="src/Text-XML-HXT-Arrow-ReadDocument.html#readString" class="link">Source</a></p><div class="doc"><p>read a document that is stored in a normal Haskell String</p><p>the same function as readDocument, but the parameter forms the input.
 All options available for <code><a href="Text-XML-HXT-Arrow-ReadDocument.html#v:readDocument">readDocument</a></code> are applicable for readString,
 except input encoding options.</p><p>Encoding: No decoding is done, the String argument is taken as Unicode string
 All decoding must be done before calling readString, even if the
 XML document contains an encoding spec.</p></div></div><div class="top"><p class="src"><a name="v:readFromString" class="def">readFromString</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:SysConfigList">SysConfigList</a> -&gt; <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="src/Text-XML-HXT-Arrow-ReadDocument.html#readFromString" class="link">Source</a></p><div class="doc"><p>the arrow version of <code><a href="Text-XML-HXT-Arrow-ReadDocument.html#v:readString">readString</a></code>, the arrow input is the source URI</p></div></div><div class="top"><p class="src"><a name="v:hread" class="def">hread</a> :: <a href="Text-XML-HXT-Arrow-XmlArrow.html#t:ArrowXml">ArrowXml</a> a =&gt; a <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="src/Text-XML-HXT-Arrow-ReadDocument.html#hread" class="link">Source</a></p><div class="doc"><p>parse a string as HTML content, substitute all HTML entity refs and canonicalize tree.
 (substitute char refs, ...). Errors are ignored.</p><p>This arrow delegates all work to the parseHtmlContent parser in module HtmlParser.</p><p>This is a simpler version of <code><a href="Text-XML-HXT-Arrow-ReadDocument.html#v:readFromString">readFromString</a></code> without any options,
 but it does not run in the IO monad.</p></div></div><div class="top"><p class="src"><a name="v:hreadDoc" class="def">hreadDoc</a> :: <a href="Text-XML-HXT-Arrow-XmlArrow.html#t:ArrowXml">ArrowXml</a> a =&gt; a <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="src/Text-XML-HXT-Arrow-ReadDocument.html#hreadDoc" class="link">Source</a></p><div class="doc"><p>like hread, but accepts a whole document, not a HTML content</p></div></div><div class="top"><p class="src"><a name="v:xread" class="def">xread</a> :: <a href="Text-XML-HXT-Arrow-XmlArrow.html#t:ArrowXml">ArrowXml</a> a =&gt; a <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="src/Text-XML-HXT-Arrow-ReadDocument.html#xread" class="link">Source</a></p><div class="doc"><p>parse a string as XML CONTENT, (no xml decl or doctype decls are allowed),
 substitute all predefined XML entity refs and canonicalize tree
 This xread arrow delegates all work to the xread parser function in module XmlParsec</p></div></div><div class="top"><p class="src"><a name="v:xreadDoc" class="def">xreadDoc</a> :: <a href="Text-XML-HXT-Arrow-XmlArrow.html#t:ArrowXml">ArrowXml</a> a =&gt; a <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="src/Text-XML-HXT-Arrow-ReadDocument.html#xreadDoc" class="link">Source</a></p><div class="doc"><p>a more general version of xread which
 parses a whole document including a prolog
 (xml decl, doctype decl) and processing
 instructions. Doctype decls remain uninterpreted,
 but are in the list of results trees.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>