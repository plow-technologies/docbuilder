<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Text.XML.HXT.Arrow.XmlState.ErrorHandling</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Text-XML-HXT-Arrow-XmlState-ErrorHandling.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Text-XML-HXT-Arrow-XmlState-ErrorHandling.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">hxt-9.3.1.15: A collection of tools for processing XML with Haskell.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Copyright</th><td>Copyright (C) 2010 Uwe Schmidt</td></tr><tr><th>License</th><td>MIT</td></tr><tr><th>Maintainer</th><td>Uwe Schmidt (uwe@fh-wedel.de)</td></tr><tr><th>Stability</th><td>stable</td></tr><tr><th>Portability</th><td>portable</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">Text.XML.HXT.Arrow.XmlState.ErrorHandling</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>the basic state arrows for XML processing</p><p>A state is needed for global processing options,
   like encoding options, document base URI, trace levels
   and error message handling</p><p>The state is separated into a user defined state
   and a system state. The system state contains variables
   for error message handling, for tracing, for the document base
   for accessing XML documents with relative references, e.g. DTDs,
   and a global key value store. This assoc list has strings as keys
   and lists of XmlTrees as values. It is used to store arbitrary
   XML and text values, e.g. user defined global options.</p><p>The user defined part of the store is in the default case empty, defined as ().
   It can be extended with an arbitray data type</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:changeErrorStatus">changeErrorStatus</a> :: (<a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a>) -&gt; <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></li><li class="src short"><a href="#v:clearErrStatus">clearErrStatus</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s b b</li><li class="src short"><a href="#v:setErrStatus">setErrStatus</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></li><li class="src short"><a href="#v:getErrStatus">getErrStatus</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></li><li class="src short"><a href="#v:setErrMsgStatus">setErrMsgStatus</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a></li><li class="src short"><a href="#v:setErrorMsgHandler">setErrorMsgHandler</a> :: <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a> -&gt; (<a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()) -&gt; <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s b b</li><li class="src short"><a href="#v:sysErrorMsg">sysErrorMsg</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a></li><li class="src short"><a href="#v:errorMsgStderr">errorMsgStderr</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s b b</li><li class="src short"><a href="#v:errorMsgCollect">errorMsgCollect</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s b b</li><li class="src short"><a href="#v:errorMsgStderrAndCollect">errorMsgStderrAndCollect</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s b b</li><li class="src short"><a href="#v:errorMsgIgnore">errorMsgIgnore</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s b b</li><li class="src short"><a href="#v:getErrorMessages">getErrorMessages</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s b <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a></li><li class="src short"><a href="#v:addToErrorMsgList">addToErrorMsgList</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a></li><li class="src short"><a href="#v:filterErrorMsg">filterErrorMsg</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a></li><li class="src short"><a href="#v:issueWarn">issueWarn</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s b b</li><li class="src short"><a href="#v:issueErr">issueErr</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s b b</li><li class="src short"><a href="#v:issueFatal">issueFatal</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s b b</li><li class="src short"><a href="#v:issueExc">issueExc</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s <a href="../base-4.8.2.0/Control-Exception-Base.html#t:SomeException">SomeException</a> b</li><li class="src short"><a href="#v:setDocumentStatus">setDocumentStatus</a> :: <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a></li><li class="src short"><a href="#v:setDocumentStatusFromSystemState">setDocumentStatusFromSystemState</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a></li><li class="src short"><a href="#v:documentStatusOk">documentStatusOk</a> :: <a href="Text-XML-HXT-Arrow-XmlArrow.html#t:ArrowXml">ArrowXml</a> a =&gt; a <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a></li><li class="src short"><a href="#v:errorOutputToStderr">errorOutputToStderr</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a name="v:changeErrorStatus" class="def">changeErrorStatus</a> :: (<a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a>) -&gt; <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> <a href="src/Text-XML-HXT-Arrow-XmlState-ErrorHandling.html#changeErrorStatus" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:clearErrStatus" class="def">clearErrStatus</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s b b <a href="src/Text-XML-HXT-Arrow-XmlState-ErrorHandling.html#clearErrStatus" class="link">Source</a></p><div class="doc"><p>reset global error variable</p></div></div><div class="top"><p class="src"><a name="v:setErrStatus" class="def">setErrStatus</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> <a href="src/Text-XML-HXT-Arrow-XmlState-ErrorHandling.html#setErrStatus" class="link">Source</a></p><div class="doc"><p>set global error variable</p></div></div><div class="top"><p class="src"><a name="v:getErrStatus" class="def">getErrStatus</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> <a href="src/Text-XML-HXT-Arrow-XmlState-ErrorHandling.html#getErrStatus" class="link">Source</a></p><div class="doc"><p>read current global error status</p></div></div><div class="top"><p class="src"><a name="v:setErrMsgStatus" class="def">setErrMsgStatus</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="src/Text-XML-HXT-Arrow-XmlState-ErrorHandling.html#setErrMsgStatus" class="link">Source</a></p><div class="doc"><p>raise the global error status level to that of the input tree</p></div></div><div class="top"><p class="src"><a name="v:setErrorMsgHandler" class="def">setErrorMsgHandler</a> :: <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a> -&gt; (<a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()) -&gt; <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s b b <a href="src/Text-XML-HXT-Arrow-XmlState-ErrorHandling.html#setErrorMsgHandler" class="link">Source</a></p><div class="doc"><p>set the error message handler and the flag for collecting the errors</p></div></div><div class="top"><p class="src"><a name="v:sysErrorMsg" class="def">sysErrorMsg</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="src/Text-XML-HXT-Arrow-XmlState-ErrorHandling.html#sysErrorMsg" class="link">Source</a></p><div class="doc"><p>error message handler for output to stderr</p></div></div><div class="top"><p class="src"><a name="v:errorMsgStderr" class="def">errorMsgStderr</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s b b <a href="src/Text-XML-HXT-Arrow-XmlState-ErrorHandling.html#errorMsgStderr" class="link">Source</a></p><div class="doc"><p>the default error message handler: error output to stderr</p></div></div><div class="top"><p class="src"><a name="v:errorMsgCollect" class="def">errorMsgCollect</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s b b <a href="src/Text-XML-HXT-Arrow-XmlState-ErrorHandling.html#errorMsgCollect" class="link">Source</a></p><div class="doc"><p>error message handler for collecting errors</p></div></div><div class="top"><p class="src"><a name="v:errorMsgStderrAndCollect" class="def">errorMsgStderrAndCollect</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s b b <a href="src/Text-XML-HXT-Arrow-XmlState-ErrorHandling.html#errorMsgStderrAndCollect" class="link">Source</a></p><div class="doc"><p>error message handler for output to stderr and collecting</p></div></div><div class="top"><p class="src"><a name="v:errorMsgIgnore" class="def">errorMsgIgnore</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s b b <a href="src/Text-XML-HXT-Arrow-XmlState-ErrorHandling.html#errorMsgIgnore" class="link">Source</a></p><div class="doc"><p>error message handler for ignoring errors</p></div></div><div class="top"><p class="src"><a name="v:getErrorMessages" class="def">getErrorMessages</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s b <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="src/Text-XML-HXT-Arrow-XmlState-ErrorHandling.html#getErrorMessages" class="link">Source</a></p><div class="doc"><p>if error messages are collected by the error handler for
 processing these messages by the calling application,
 this arrow reads the stored messages and clears the error message store</p></div></div><div class="top"><p class="src"><a name="v:addToErrorMsgList" class="def">addToErrorMsgList</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="src/Text-XML-HXT-Arrow-XmlState-ErrorHandling.html#addToErrorMsgList" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:filterErrorMsg" class="def">filterErrorMsg</a> :: <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="src/Text-XML-HXT-Arrow-XmlState-ErrorHandling.html#filterErrorMsg" class="link">Source</a></p><div class="doc"><p>filter error messages from input trees and issue errors</p></div></div><div class="top"><p class="src"><a name="v:issueWarn" class="def">issueWarn</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s b b <a href="src/Text-XML-HXT-Arrow-XmlState-ErrorHandling.html#issueWarn" class="link">Source</a></p><div class="doc"><p>generate a warnig message</p></div></div><div class="top"><p class="src"><a name="v:issueErr" class="def">issueErr</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s b b <a href="src/Text-XML-HXT-Arrow-XmlState-ErrorHandling.html#issueErr" class="link">Source</a></p><div class="doc"><p>generate an error message</p></div></div><div class="top"><p class="src"><a name="v:issueFatal" class="def">issueFatal</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s b b <a href="src/Text-XML-HXT-Arrow-XmlState-ErrorHandling.html#issueFatal" class="link">Source</a></p><div class="doc"><p>generate a fatal error message, e.g. document not found</p></div></div><div class="top"><p class="src"><a name="v:issueExc" class="def">issueExc</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s <a href="../base-4.8.2.0/Control-Exception-Base.html#t:SomeException">SomeException</a> b <a href="src/Text-XML-HXT-Arrow-XmlState-ErrorHandling.html#issueExc" class="link">Source</a></p><div class="doc"><p>Default exception handler: issue a fatal error message and fail.</p><p>The parameter can be used to specify where the error occured</p></div></div><div class="top"><p class="src"><a name="v:setDocumentStatus" class="def">setDocumentStatus</a> :: <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="src/Text-XML-HXT-Arrow-XmlState-ErrorHandling.html#setDocumentStatus" class="link">Source</a></p><div class="doc"><p>add the error level and the module where the error occured
 to the attributes of a document root node and remove the children when level is greater or equal to <code><a href="Text-XML-HXT-DOM-TypeDefs.html#v:c_err">c_err</a></code>.
 called by <code><a href="Text-XML-HXT-Arrow-XmlState-ErrorHandling.html#v:setDocumentStatusFromSystemState">setDocumentStatusFromSystemState</a></code> when the system state indicates an error</p></div></div><div class="top"><p class="src"><a name="v:setDocumentStatusFromSystemState" class="def">setDocumentStatusFromSystemState</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Text-XML-HXT-Arrow-XmlState-TypeDefs.html#t:IOStateArrow">IOStateArrow</a> s <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="src/Text-XML-HXT-Arrow-XmlState-ErrorHandling.html#setDocumentStatusFromSystemState" class="link">Source</a></p><div class="doc"><p>check whether the error level attribute in the system state
 is set to error, in this case the children of the document root are
 removed and the module name where the error occured and the error level are added as attributes with <code><a href="Text-XML-HXT-Arrow-XmlState-ErrorHandling.html#v:setDocumentStatus">setDocumentStatus</a></code>
 else nothing is changed</p></div></div><div class="top"><p class="src"><a name="v:documentStatusOk" class="def">documentStatusOk</a> :: <a href="Text-XML-HXT-Arrow-XmlArrow.html#t:ArrowXml">ArrowXml</a> a =&gt; a <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="Text-XML-HXT-DOM-TypeDefs.html#t:XmlTree">XmlTree</a> <a href="src/Text-XML-HXT-Arrow-XmlState-ErrorHandling.html#documentStatusOk" class="link">Source</a></p><div class="doc"><p>check whether tree is a document root and the status attribute has a value less than <code><a href="Text-XML-HXT-DOM-TypeDefs.html#v:c_err">c_err</a></code></p></div></div><div class="top"><p class="src"><a name="v:errorOutputToStderr" class="def">errorOutputToStderr</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> () <a href="src/Text-XML-HXT-Arrow-XmlState-ErrorHandling.html#errorOutputToStderr" class="link">Source</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>