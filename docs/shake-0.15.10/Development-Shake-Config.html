<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Development.Shake.Config</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Development-Shake-Config.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Development-Shake-Config.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">shake-0.15.10: Build system library, like Make, but more accurate dependencies.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Development.Shake.Config</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>A module for parsing and using config files in a Shake build system. Config files
   consist of variable bindings, for example:</p><pre># This is my Config file
HEADERS_DIR = /path/to/dir
CFLAGS = -g -I${HEADERS_DIR}
CFLAGS = $CFLAGS -O2
include extra/file.cfg</pre><p>This defines the variable <code>HEADERS_DIR</code> (equal to <code>/path/to/dir</code>), and
   <code>CFLAGS</code> (equal to <code>-g -I/path/to/dir -O2</code>), and also includes the configuration
   statements in the file <code>extra/file.cfg</code>. The full lexical syntax for configuration
   files is defined here: <a href="https://ninja-build.org/manual.html#_lexical_syntax">https://ninja-build.org/manual.html#_lexical_syntax</a>.</p><p>To use the configuration file either use <code><a href="Development-Shake-Config.html#v:readConfigFile">readConfigFile</a></code> to parse the configuration file
   and use the values directly, or <code><a href="Development-Shake-Config.html#v:usingConfigFile">usingConfigFile</a></code> and <code><a href="Development-Shake-Config.html#v:getConfig">getConfig</a></code> to track the configuration
   values, so they become build dependencies.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:readConfigFile">readConfigFile</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="../unordered-containers-0.2.7.1/Data-HashMap-Strict.html#t:HashMap">HashMap</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a>)</li><li class="src short"><a href="#v:readConfigFileWithEnv">readConfigFileWithEnv</a> :: [(<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>, <a href="../base-4.8.2.0/Data-String.html#t:String">String</a>)] -&gt; <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="../unordered-containers-0.2.7.1/Data-HashMap-Strict.html#t:HashMap">HashMap</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a>)</li><li class="src short"><a href="#v:usingConfigFile">usingConfigFile</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> ()</li><li class="src short"><a href="#v:usingConfig">usingConfig</a> :: <a href="../unordered-containers-0.2.7.1/Data-HashMap-Strict.html#t:HashMap">HashMap</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> ()</li><li class="src short"><a href="#v:getConfig">getConfig</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a>)</li><li class="src short"><a href="#v:getConfigKeys">getConfigKeys</a> :: <a href="Development-Shake.html#t:Action">Action</a> [<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>]</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a name="v:readConfigFile" class="def">readConfigFile</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="../unordered-containers-0.2.7.1/Data-HashMap-Strict.html#t:HashMap">HashMap</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a>) <a href="src/Development-Shake-Config.html#readConfigFile" class="link">Source</a></p><div class="doc"><p>Read a config file, returning a list of the variables and their bindings.
   Config files use the Ninja lexical syntax:
   <a href="https://ninja-build.org/manual.html#_lexical_syntax">https://ninja-build.org/manual.html#_lexical_syntax</a></p></div></div><div class="top"><p class="src"><a name="v:readConfigFileWithEnv" class="def">readConfigFileWithEnv</a> :: [(<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>, <a href="../base-4.8.2.0/Data-String.html#t:String">String</a>)] -&gt; <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="../unordered-containers-0.2.7.1/Data-HashMap-Strict.html#t:HashMap">HashMap</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a>) <a href="src/Development-Shake-Config.html#readConfigFileWithEnv" class="link">Source</a></p><div class="doc"><p>Read a config file with an initial environment, returning a list of the variables and their bindings.
   Config files use the Ninja lexical syntax:
   <a href="https://ninja-build.org/manual.html#_lexical_syntax">https://ninja-build.org/manual.html#_lexical_syntax</a></p></div></div><div class="top"><p class="src"><a name="v:usingConfigFile" class="def">usingConfigFile</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> () <a href="src/Development-Shake-Config.html#usingConfigFile" class="link">Source</a></p><div class="doc"><p>Specify the file to use with <code><a href="Development-Shake-Config.html#v:getConfig">getConfig</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:usingConfig" class="def">usingConfig</a> :: <a href="../unordered-containers-0.2.7.1/Data-HashMap-Strict.html#t:HashMap">HashMap</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> () <a href="src/Development-Shake-Config.html#usingConfig" class="link">Source</a></p><div class="doc"><p>Specify the values to use with <code><a href="Development-Shake-Config.html#v:getConfig">getConfig</a></code>, generally prefer
   <code><a href="Development-Shake-Config.html#v:usingConfigFile">usingConfigFile</a></code> unless you also need access to the values
   of variables outside <code><a href="Development-Shake.html#t:Action">Action</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:getConfig" class="def">getConfig</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a>) <a href="src/Development-Shake-Config.html#getConfig" class="link">Source</a></p><div class="doc"><p>Obtain the value of a configuration variable, returns <code><a href="../base-4.8.2.0/Data-Maybe.html#v:Nothing">Nothing</a></code> to indicate the variable
   has no binding. Any build system using <code><a href="Development-Shake-Config.html#v:getConfig">getConfig</a></code> <em>must</em> call either <code><a href="Development-Shake-Config.html#v:usingConfigFile">usingConfigFile</a></code>
   or <code><a href="Development-Shake-Config.html#v:usingConfig">usingConfig</a></code>. The <code><a href="Development-Shake-Config.html#v:getConfig">getConfig</a></code> function will introduce a dependency on the configuration
   variable (but not the whole configuration file), and if the configuration variable changes, the rule will be rerun.
   As an example:</p><pre><code><a href="Development-Shake-Config.html#v:usingConfigFile">usingConfigFile</a></code> &quot;myconfiguration.cfg&quot;
&quot;*.o&quot; <code><a href="Development-Shake.html#v:-37--62-">%&gt;</a></code> \out -&gt; do
    cflags &lt;- <code><a href="Development-Shake-Config.html#v:getConfig">getConfig</a></code> &quot;CFLAGS&quot;
    <code><a href="Development-Shake-Command.html#v:cmd">cmd</a></code> &quot;gcc&quot; [out <code>-&lt;.&gt;</code> &quot;c&quot;] (fromMaybe &quot;&quot; cflags)
</pre></div></div><div class="top"><p class="src"><a name="v:getConfigKeys" class="def">getConfigKeys</a> :: <a href="Development-Shake.html#t:Action">Action</a> [<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>] <a href="src/Development-Shake-Config.html#getConfigKeys" class="link">Source</a></p><div class="doc"><p>Obtain the configuration keys.
   Any build system using <code><a href="Development-Shake-Config.html#v:getConfigKeys">getConfigKeys</a></code> <em>must</em> call either <code><a href="Development-Shake-Config.html#v:usingConfigFile">usingConfigFile</a></code> or <code><a href="Development-Shake-Config.html#v:usingConfig">usingConfig</a></code>.
   The <code><a href="Development-Shake-Config.html#v:getConfigKeys">getConfigKeys</a></code> function will introduce a dependency on the configuration keys
   (but not the whole configuration file), and if the configuration keys change, the rule will be rerun.
   Usually use as part of an action.
   As an example:</p><pre><code><a href="Development-Shake-Config.html#v:usingConfigFile">usingConfigFile</a></code> &quot;myconfiguration.cfg&quot;
<code><a href="Development-Shake.html#v:action">action</a></code> $ need =&lt;&lt; getConfigKeys
</pre></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>