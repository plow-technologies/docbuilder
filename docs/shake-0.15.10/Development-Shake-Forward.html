<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Development.Shake.Forward</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Development-Shake-Forward.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Development-Shake-Forward.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">shake-0.15.10: Build system library, like Make, but more accurate dependencies.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Development.Shake.Forward</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>A module for producing forward-defined build systems, in contrast to standard backwards-defined
   build systems such as shake. Based around ideas from <a href="https://code.google.com/p/fabricate/">fabricate</a>.
   As an example:</p><pre>import <a href="Development-Shake.html">Development.Shake</a>
import <a href="Development-Shake-Forward.html">Development.Shake.Forward</a>
import <a href="Development-Shake-FilePath.html">Development.Shake.FilePath</a>

main = <code><a href="Development-Shake-Forward.html#v:shakeArgsForward">shakeArgsForward</a></code> <code><a href="Development-Shake.html#v:shakeOptions">shakeOptions</a></code> $ do
    contents &lt;- <code><a href="Development-Shake.html#v:readFileLines">readFileLines</a></code> &quot;result.txt&quot;
    <code><a href="Development-Shake-Forward.html#v:cache">cache</a></code> $ <code><a href="Development-Shake-Command.html#v:cmd">cmd</a></code> &quot;tar -cf result.tar&quot; contents
</pre><p>Compared to backward-defined build systems (such as normal Shake), forward-defined build
   systems tend to be simpler for simple systems (less boilerplate, more direct style), but more
   complex for larger build systems (requires explicit parallelism, explicit sharing of build products,
   no automatic command line targets). As a general approach for writing forward-defined systems:</p><ul><li>Figure out the sequence of system commands that will build your project.</li><li>Write a simple <code><a href="Development-Shake.html#t:Action">Action</a></code> that builds your project.</li><li>Insert <code><a href="Development-Shake-Forward.html#v:cache">cache</a></code> in front of most system commands.</li><li>Replace most loops with <code><a href="Development-Shake.html#v:forP">forP</a></code>, where they can be executed in parallel.</li><li>Where Haskell performs real computation, if zero-build performance is insufficient, use <code><a href="Development-Shake-Forward.html#v:cacheAction">cacheAction</a></code>.</li></ul><p>All forward-defined systems use <code><a href="Development-Shake-Command.html#v:AutoDeps">AutoDeps</a></code>, which requires <code>fsatrace</code> to be on the <code>$PATH</code>.
   You can obtain <code>fsatrace</code> from <a href="https://github.com/jacereda/fsatrace">https://github.com/jacereda/fsatrace</a>.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:shakeForward">shakeForward</a> :: <a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> () -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:shakeArgsForward">shakeArgsForward</a> :: <a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> () -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:forwardOptions">forwardOptions</a> :: <a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a> -&gt; <a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a></li><li class="src short"><a href="#v:forwardRule">forwardRule</a> :: <a href="Development-Shake.html#t:Action">Action</a> () -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> ()</li><li class="src short"><a href="#v:cache">cache</a> :: (<span class="keyword">forall</span> r. <a href="Development-Shake-Command.html#t:CmdArguments">CmdArguments</a> r =&gt; r) -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()</li><li class="src short"><a href="#v:cacheAction">cacheAction</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> () -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a name="v:shakeForward" class="def">shakeForward</a> :: <a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> () -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> () <a href="src/Development-Shake-Forward.html#shakeForward" class="link">Source</a></p><div class="doc"><p>Run a forward-defined build system.</p></div></div><div class="top"><p class="src"><a name="v:shakeArgsForward" class="def">shakeArgsForward</a> :: <a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> () -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> () <a href="src/Development-Shake-Forward.html#shakeArgsForward" class="link">Source</a></p><div class="doc"><p>Run a forward-defined build system, interpretting command-line arguments.</p></div></div><div class="top"><p class="src"><a name="v:forwardOptions" class="def">forwardOptions</a> :: <a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a> -&gt; <a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a> <a href="src/Development-Shake-Forward.html#forwardOptions" class="link">Source</a></p><div class="doc"><p>Given a <code><a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a></code>, set the options necessary to execute in forward mode.</p></div></div><div class="top"><p class="src"><a name="v:forwardRule" class="def">forwardRule</a> :: <a href="Development-Shake.html#t:Action">Action</a> () -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> () <a href="src/Development-Shake-Forward.html#forwardRule" class="link">Source</a></p><div class="doc"><p>Given an <code><a href="Development-Shake.html#t:Action">Action</a></code>, turn it into a <code><a href="Development-Shake.html#t:Rules">Rules</a></code> structure which runs in forward mode.</p></div></div><div class="top"><p class="src"><a name="v:cache" class="def">cache</a> :: (<span class="keyword">forall</span> r. <a href="Development-Shake-Command.html#t:CmdArguments">CmdArguments</a> r =&gt; r) -&gt; <a href="Development-Shake.html#t:Action">Action</a> () <a href="src/Development-Shake-Forward.html#cache" class="link">Source</a></p><div class="doc"><p>Apply caching to an external command.</p></div></div><div class="top"><p class="src"><a name="v:cacheAction" class="def">cacheAction</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> () -&gt; <a href="Development-Shake.html#t:Action">Action</a> () <a href="src/Development-Shake-Forward.html#cacheAction" class="link">Source</a></p><div class="doc"><p>Cache an action. The name of the action must be unique for all different actions.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>