<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Development.Shake</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Development-Shake.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Development-Shake.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">shake-0.15.10: Build system library, like Make, but more accurate dependencies.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Development.Shake</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Core</a></li><li><a href="#g:2">Configuration</a><ul><li><a href="#g:3">Command line</a></li><li><a href="#g:4">Progress reporting</a></li><li><a href="#g:5">Verbosity</a></li></ul></li><li><a href="#g:6">Running commands</a></li><li><a href="#g:7">Explicit parallelism</a></li><li><a href="#g:8">Utility functions</a></li><li><a href="#g:9">File rules</a></li><li><a href="#g:10">Directory rules</a></li><li><a href="#g:11">Environment rules</a></li><li><a href="#g:12">Oracle rules</a></li><li><a href="#g:13">Special rules</a></li><li><a href="#g:14">Resources</a></li><li><a href="#g:15">Cache</a></li><li><a href="#g:16">Deprecated</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module is used for defining Shake build systems. As a simple example of a Shake build system,
   let us build the file <code>result.tar</code> from the files listed by <code>result.txt</code>:</p><pre>import <a href="Development-Shake.html">Development.Shake</a>
import <a href="Development-Shake-FilePath.html">Development.Shake.FilePath</a>

main = <code><a href="Development-Shake.html#v:shakeArgs">shakeArgs</a></code> <code><a href="Development-Shake.html#v:shakeOptions">shakeOptions</a></code> $ do
    <code><a href="Development-Shake.html#v:want">want</a></code> [&quot;result.tar&quot;]
    &quot;*.tar&quot; <code><a href="Development-Shake.html#v:-37--62-">%&gt;</a></code> \out -&gt; do
        contents &lt;- <code><a href="Development-Shake.html#v:readFileLines">readFileLines</a></code> $ out <code><a href="Development-Shake-FilePath.html#v:-45--60-.-62-">-&lt;.&gt;</a></code> &quot;txt&quot;
        <code><a href="Development-Shake.html#v:need">need</a></code> contents
        <code><a href="Development-Shake.html#v:cmd">cmd</a></code> &quot;tar -cf&quot; [out] contents
</pre><p>We start by importing the modules defining both Shake and routines for manipulating <code><a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a></code> values.
   We define <code>main</code> to call <code><a href="Development-Shake.html#v:shake">shake</a></code> with the default <code><a href="Development-Shake.html#v:shakeOptions">shakeOptions</a></code>. As the second argument to
   <code><a href="Development-Shake.html#v:shake">shake</a></code>, we provide a set of rules. There are two common forms of rules, <code><a href="Development-Shake.html#v:want">want</a></code> to specify target files,
   and <code><a href="Development-Shake.html#v:-37--62-">%&gt;</a></code> to define a rule which builds a <code><a href="Development-Shake.html#t:FilePattern">FilePattern</a></code>. We use <code><a href="Development-Shake.html#v:want">want</a></code> to require that after the build
   completes the file <code>result.tar</code> should be ready.</p><p>The <code>*.tar</code> rule describes how to build files with the extension <code>.tar</code>, including <code>result.tar</code>.
   We <code><a href="Development-Shake.html#v:readFileLines">readFileLines</a></code> on <code>result.txt</code>, after changing the <code>.tar</code> extension to <code>.txt</code>. We read each line
   into the variable <code>contents</code> -- being a list of the files that should go into <code>result.tar</code>. Next, we
   depend (<code><a href="Development-Shake.html#v:need">need</a></code>) all the files in <code>contents</code>. If any of these files change, the rule will be repeated.
   Finally we call the <code>tar</code> program. If either <code>result.txt</code> changes, or any of the files listed by <code>result.txt</code>
   change, then <code>result.tar</code> will be rebuilt.</p><p>To find out more:</p><ul><li>The user manual contains a longer example and background information on how to use Shake
   <a href="http://www.shakebuild.com/manual">http://www.shakebuild.com/manual</a>.</li><li>The home page has links to additional information <a href="http://www.shakebuild.com/">http://www.shakebuild.com/</a>, including
   a mailing list.</li><li>The theory behind Shake is described in an ICFP 2012 paper,
   <a href="http://community.haskell.org/~ndm/downloads/paper-shake_before_building-10_sep_2012.pdf">Shake Before Building -- Replacing Make with Haskell</a>.
   The <a href="http://www.youtube.com/watch?v=xYCPpXVlqFM">associated talk</a> forms a short overview of Shake .</li></ul><p><em>== WRITING A BUILD SYSTEM ==============================</em></p><p>When writing a Shake build system, start by defining what you <code><a href="Development-Shake.html#v:want">want</a></code>, then write rules
   with <code><a href="Development-Shake.html#v:-37--62-">%&gt;</a></code> to produce the results. Before calling <code><a href="Development-Shake.html#v:cmd">cmd</a></code> you should ensure that any files the command
   requires are demanded with calls to <code><a href="Development-Shake.html#v:need">need</a></code>. We offer the following advice to Shake users:</p><ul><li>If <code>ghc --make</code> or <code>cabal</code> is capable of building your project, use that instead. Custom build systems are
   necessary for many complex projects, but many projects are not complex.</li><li>The <code><a href="Development-Shake.html#v:shakeArgs">shakeArgs</a></code> function automatically handles command line arguments. To define non-file targets use <code><a href="Development-Shake.html#v:phony">phony</a></code>.</li><li>Put all result files in a distinguished directory, for example <code>_make</code>. You can implement a <code>clean</code>
   command by removing that directory, using <code><code><a href="Development-Shake.html#v:removeFilesAfter">removeFilesAfter</a></code> &quot;_make&quot; [&quot;//*&quot;]</code>.</li><li>To obtain parallel builds set <code><a href="Development-Shake.html#v:shakeThreads">shakeThreads</a></code> to a number greater than 1.</li><li>Lots of compilers produce <code>.o</code> files. To avoid overlapping rules, use <code>.c.o</code> for C compilers,
   <code>.hs.o</code> for Haskell compilers etc.</li><li>Do not be afraid to mix Shake rules, system commands and other Haskell libraries -- use each for what
   it does best.</li><li>The more accurate the dependencies are, the better. Use additional rules like <code><a href="Development-Shake.html#v:doesFileExist">doesFileExist</a></code> and
   <code><a href="Development-Shake.html#v:getDirectoryFiles">getDirectoryFiles</a></code> to track information other than just the contents of files. For information in the environment
   that you suspect will change regularly (perhaps <code>ghc</code> version number), either write the information to
   a file with <code><a href="Development-Shake.html#v:alwaysRerun">alwaysRerun</a></code> and <code><a href="Development-Shake.html#v:writeFileChanged">writeFileChanged</a></code>, or use <code><a href="Development-Shake.html#v:addOracle">addOracle</a></code>.</li></ul><p><em>== GHC BUILD FLAGS ==============================</em></p><p>For large build systems the choice of GHC flags can have a significant impact. We recommend:</p><pre>ghc --make MyBuildSystem -rtsopts -with-rtsopts=-I0</pre><ul><li><code>-rtsopts</code>: Allow the setting of further GHC options at runtime.</li><li><code>-I0</code>: Disable idle garbage collection, to avoid frequent unnecessary garbage collection, see
     <a href="http://stackoverflow.com/questions/34588057/why-does-shake-recommend-disabling-idle-garbage-collection/">a full explanation</a>.</li><li>With GHC 7.6 and before, omit <code>-threaded</code>: <a href="http://ghc.haskell.org/trac/ghc/ticket/7646">GHC bug 7646</a>
     can cause a race condition in build systems that write files then read them. Omitting <code>-threaded</code> will
     still allow your <code><a href="Development-Shake.html#v:cmd">cmd</a></code> actions to run in parallel, so most build systems will still run in parallel.</li><li>With GHC 7.8 and later you may add <code>-threaded</code>, and pass the options <code>-qg -qb</code> to <code>-with-rtsopts</code>
     to disable parallel garbage collection. Parallel garbage collection in Shake
     programs typically goes slower than sequential garbage collection, while occupying many cores that
     could be used for running system commands.</li></ul><p><em>Acknowledgements</em>: Thanks to Austin Seipp for properly integrating the profiling code.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:shake">shake</a> :: <a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a> -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> () -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:shakeOptions">shakeOptions</a> :: <a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Rules">Rules</a> a</li><li class="src short"><a href="#v:action">action</a> :: <a href="Development-Shake.html#t:Action">Action</a> a -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> ()</li><li class="src short"><a href="#v:withoutActions">withoutActions</a> :: <a href="Development-Shake.html#t:Rules">Rules</a> () -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> ()</li><li class="src short"><a href="#v:alternatives">alternatives</a> :: <a href="Development-Shake.html#t:Rules">Rules</a> () -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> ()</li><li class="src short"><a href="#v:priority">priority</a> :: <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a> -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> () -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:Action">Action</a> a</li><li class="src short"><a href="#v:traced">traced</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> a -&gt; <a href="Development-Shake.html#t:Action">Action</a> a</li><li class="src short"><a href="#v:liftIO">liftIO</a> :: <a href="../transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <span class="keyword">forall</span> a. <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> a -&gt; m a</li><li class="src short"><a href="#v:actionOnException">actionOnException</a> :: <a href="Development-Shake.html#t:Action">Action</a> a -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> b -&gt; <a href="Development-Shake.html#t:Action">Action</a> a</li><li class="src short"><a href="#v:actionFinally">actionFinally</a> :: <a href="Development-Shake.html#t:Action">Action</a> a -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> b -&gt; <a href="Development-Shake.html#t:Action">Action</a> a</li><li class="src short"><span class="keyword">data</span> <a href="#t:ShakeException">ShakeException</a> = <a href="#v:ShakeException">ShakeException</a> {<ul class="subs"><li><a href="#v:shakeExceptionTarget">shakeExceptionTarget</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a></li><li><a href="#v:shakeExceptionStack">shakeExceptionStack</a> :: [<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>]</li><li><a href="#v:shakeExceptionInner">shakeExceptionInner</a> :: <a href="../base-4.8.2.0/Control-Exception-Base.html#t:SomeException">SomeException</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:ShakeOptions">ShakeOptions</a> = <a href="#v:ShakeOptions">ShakeOptions</a> {<ul class="subs"><li><a href="#v:shakeFiles">shakeFiles</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a></li><li><a href="#v:shakeThreads">shakeThreads</a> :: <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></li><li><a href="#v:shakeVersion">shakeVersion</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a></li><li><a href="#v:shakeVerbosity">shakeVerbosity</a> :: <a href="Development-Shake.html#t:Verbosity">Verbosity</a></li><li><a href="#v:shakeStaunch">shakeStaunch</a> :: <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></li><li><a href="#v:shakeReport">shakeReport</a> :: [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>]</li><li><a href="#v:shakeLint">shakeLint</a> :: <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Development-Shake.html#t:Lint">Lint</a></li><li><a href="#v:shakeLintInside">shakeLintInside</a> :: [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>]</li><li><a href="#v:shakeLintIgnore">shakeLintIgnore</a> :: [<a href="Development-Shake.html#t:FilePattern">FilePattern</a>]</li><li><a href="#v:shakeCommandOptions">shakeCommandOptions</a> :: [<a href="Development-Shake.html#t:CmdOption">CmdOption</a>]</li><li><a href="#v:shakeFlush">shakeFlush</a> :: <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></li><li><a href="#v:shakeAssume">shakeAssume</a> :: <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Development-Shake.html#t:Assume">Assume</a></li><li><a href="#v:shakeAbbreviations">shakeAbbreviations</a> :: [(<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>, <a href="../base-4.8.2.0/Data-String.html#t:String">String</a>)]</li><li><a href="#v:shakeStorageLog">shakeStorageLog</a> :: <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></li><li><a href="#v:shakeLineBuffering">shakeLineBuffering</a> :: <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></li><li><a href="#v:shakeTimings">shakeTimings</a> :: <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></li><li><a href="#v:shakeRunCommands">shakeRunCommands</a> :: <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></li><li><a href="#v:shakeChange">shakeChange</a> :: <a href="Development-Shake.html#t:Change">Change</a></li><li><a href="#v:shakeCreationCheck">shakeCreationCheck</a> :: <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></li><li><a href="#v:shakeLiveFiles">shakeLiveFiles</a> :: [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>]</li><li><a href="#v:shakeVersionIgnore">shakeVersionIgnore</a> :: <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></li><li><a href="#v:shakeProgress">shakeProgress</a> :: <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Development-Shake.html#t:Progress">Progress</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li><a href="#v:shakeOutput">shakeOutput</a> :: <a href="Development-Shake.html#t:Verbosity">Verbosity</a> -&gt; <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li><a href="#v:shakeExtra">shakeExtra</a> :: <a href="../unordered-containers-0.2.7.1/Data-HashMap-Strict.html#t:HashMap">HashMap</a> <a href="../base-4.8.2.0/Data-Typeable-Internal.html#t:TypeRep">TypeRep</a> <a href="../base-4.8.2.0/Data-Dynamic.html#t:Dynamic">Dynamic</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:Assume">Assume</a><ul class="subs"><li>= <a href="#v:AssumeDirty">AssumeDirty</a></li><li>| <a href="#v:AssumeClean">AssumeClean</a></li><li>| <a href="#v:AssumeSkip">AssumeSkip</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:Lint">Lint</a><ul class="subs"><li>= <a href="#v:LintBasic">LintBasic</a></li><li>| <a href="#v:LintFSATrace">LintFSATrace</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:Change">Change</a><ul class="subs"><li>= <a href="#v:ChangeModtime">ChangeModtime</a></li><li>| <a href="#v:ChangeDigest">ChangeDigest</a></li><li>| <a href="#v:ChangeModtimeAndDigest">ChangeModtimeAndDigest</a></li><li>| <a href="#v:ChangeModtimeAndDigestInput">ChangeModtimeAndDigestInput</a></li><li>| <a href="#v:ChangeModtimeOrDigest">ChangeModtimeOrDigest</a></li></ul></li><li class="src short"><a href="#v:getShakeOptions">getShakeOptions</a> :: <a href="Development-Shake.html#t:Action">Action</a> <a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a></li><li class="src short"><a href="#v:getHashedShakeVersion">getHashedShakeVersion</a> :: [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>] -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a></li><li class="src short"><a href="#v:shakeArgs">shakeArgs</a> :: <a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a> -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> () -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:shakeArgsWith">shakeArgsWith</a> :: <a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a> -&gt; [<a href="../base-4.8.2.0/System-Console-GetOpt.html#t:OptDescr">OptDescr</a> (<a href="../base-4.8.2.0/Data-Either.html#t:Either">Either</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> a)] -&gt; ([a] -&gt; [<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>] -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Development-Shake.html#t:Rules">Rules</a> ()))) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:shakeOptDescrs">shakeOptDescrs</a> :: [<a href="../base-4.8.2.0/System-Console-GetOpt.html#t:OptDescr">OptDescr</a> (<a href="../base-4.8.2.0/Data-Either.html#t:Either">Either</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> (<a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a> -&gt; <a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a>))]</li><li class="src short"><span class="keyword">data</span> <a href="#t:Progress">Progress</a> = <a href="#v:Progress">Progress</a> {<ul class="subs"><li><a href="#v:isFailure">isFailure</a> :: !(<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a>)</li><li><a href="#v:countSkipped">countSkipped</a> :: !<a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></li><li><a href="#v:countBuilt">countBuilt</a> :: !<a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></li><li><a href="#v:countUnknown">countUnknown</a> :: !<a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></li><li><a href="#v:countTodo">countTodo</a> :: !<a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></li><li><a href="#v:timeSkipped">timeSkipped</a> :: !<a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></li><li><a href="#v:timeBuilt">timeBuilt</a> :: !<a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></li><li><a href="#v:timeUnknown">timeUnknown</a> :: !<a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></li><li><a href="#v:timeTodo">timeTodo</a> :: !(<a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a>, <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a>)</li></ul>}</li><li class="src short"><a href="#v:progressSimple">progressSimple</a> :: <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Development-Shake.html#t:Progress">Progress</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:progressDisplay">progressDisplay</a> :: <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a> -&gt; (<a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Development-Shake.html#t:Progress">Progress</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:progressTitlebar">progressTitlebar</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:progressProgram">progressProgram</a> :: <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ())</li><li class="src short"><a href="#v:getProgress">getProgress</a> :: <a href="Development-Shake.html#t:Action">Action</a> <a href="Development-Shake.html#t:Progress">Progress</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Verbosity">Verbosity</a><ul class="subs"><li>= <a href="#v:Silent">Silent</a></li><li>| <a href="#v:Quiet">Quiet</a></li><li>| <a href="#v:Normal">Normal</a></li><li>| <a href="#v:Loud">Loud</a></li><li>| <a href="#v:Chatty">Chatty</a></li><li>| <a href="#v:Diagnostic">Diagnostic</a></li></ul></li><li class="src short"><a href="#v:getVerbosity">getVerbosity</a> :: <a href="Development-Shake.html#t:Action">Action</a> <a href="Development-Shake.html#t:Verbosity">Verbosity</a></li><li class="src short"><a href="#v:putLoud">putLoud</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()</li><li class="src short"><a href="#v:putNormal">putNormal</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()</li><li class="src short"><a href="#v:putQuiet">putQuiet</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()</li><li class="src short"><a href="#v:withVerbosity">withVerbosity</a> :: <a href="Development-Shake.html#t:Verbosity">Verbosity</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> a -&gt; <a href="Development-Shake.html#t:Action">Action</a> a</li><li class="src short"><a href="#v:quietly">quietly</a> :: <a href="Development-Shake.html#t:Action">Action</a> a -&gt; <a href="Development-Shake.html#t:Action">Action</a> a</li><li class="src short"><a href="#v:command">command</a> :: <a href="Development-Shake.html#t:CmdResult">CmdResult</a> r =&gt; [<a href="Development-Shake.html#t:CmdOption">CmdOption</a>] -&gt; <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; [<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> r</li><li class="src short"><a href="#v:command_">command_</a> :: [<a href="Development-Shake.html#t:CmdOption">CmdOption</a>] -&gt; <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; [<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()</li><li class="src short"><a href="#v:cmd">cmd</a> :: <a href="Development-Shake-Command.html#t:CmdArguments">CmdArguments</a> args =&gt; args <a href="Development-Shake-Command.html#t::-45--62-">:-&gt;</a> <a href="Development-Shake.html#t:Action">Action</a> r</li><li class="src short"><a href="#v:unit">unit</a> :: m () -&gt; m ()</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:Stdout">Stdout</a> a = <a href="#v:Stdout">Stdout</a> {<ul class="subs"><li><a href="#v:fromStdout">fromStdout</a> :: a</li></ul>}</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:Stderr">Stderr</a> a = <a href="#v:Stderr">Stderr</a> {<ul class="subs"><li><a href="#v:fromStderr">fromStderr</a> :: a</li></ul>}</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:Stdouterr">Stdouterr</a> a = <a href="#v:Stdouterr">Stdouterr</a> {<ul class="subs"><li><a href="#v:fromStdouterr">fromStdouterr</a> :: a</li></ul>}</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:Exit">Exit</a> = <a href="#v:Exit">Exit</a> {<ul class="subs"><li><a href="#v:fromExit">fromExit</a> :: <a href="../base-4.8.2.0/System-Exit.html#t:ExitCode">ExitCode</a></li></ul>}</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:CmdTime">CmdTime</a> = <a href="#v:CmdTime">CmdTime</a> {<ul class="subs"><li><a href="#v:fromCmdTime">fromCmdTime</a> :: <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></li></ul>}</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:CmdLine">CmdLine</a> = <a href="#v:CmdLine">CmdLine</a> {<ul class="subs"><li><a href="#v:fromCmdLine">fromCmdLine</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a></li></ul>}</li><li class="src short"><span class="keyword">class</span> <a href="#t:CmdResult">CmdResult</a> a</li><li class="src short"><span class="keyword">class</span> <a href="#t:CmdString">CmdString</a> a</li><li class="src short"><span class="keyword">data</span> <a href="#t:CmdOption">CmdOption</a><ul class="subs"><li>= <a href="#v:Cwd">Cwd</a> <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a></li><li>| <a href="#v:Env">Env</a> [(<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>, <a href="../base-4.8.2.0/Data-String.html#t:String">String</a>)]</li><li>| <a href="#v:AddEnv">AddEnv</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a></li><li>| <a href="#v:RemEnv">RemEnv</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a></li><li>| <a href="#v:AddPath">AddPath</a> [<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>] [<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>]</li><li>| <a href="#v:Stdin">Stdin</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a></li><li>| <a href="#v:StdinBS">StdinBS</a> <a href="../bytestring-0.10.6.0/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></li><li>| <a href="#v:FileStdin">FileStdin</a> <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a></li><li>| <a href="#v:Shell">Shell</a></li><li>| <a href="#v:BinaryPipes">BinaryPipes</a></li><li>| <a href="#v:Traced">Traced</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a></li><li>| <a href="#v:Timeout">Timeout</a> <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></li><li>| <a href="#v:WithStdout">WithStdout</a> <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></li><li>| <a href="#v:WithStderr">WithStderr</a> <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></li><li>| <a href="#v:EchoStdout">EchoStdout</a> <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></li><li>| <a href="#v:EchoStderr">EchoStderr</a> <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></li><li>| <a href="#v:FileStdout">FileStdout</a> <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a></li><li>| <a href="#v:FileStderr">FileStderr</a> <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a></li><li>| <a href="#v:AutoDeps">AutoDeps</a></li></ul></li><li class="src short"><a href="#v:addPath">addPath</a> :: <a href="../transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; [<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>] -&gt; [<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>] -&gt; m <a href="Development-Shake.html#t:CmdOption">CmdOption</a></li><li class="src short"><a href="#v:addEnv">addEnv</a> :: <a href="../transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; [(<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>, <a href="../base-4.8.2.0/Data-String.html#t:String">String</a>)] -&gt; m <a href="Development-Shake.html#t:CmdOption">CmdOption</a></li><li class="src short"><a href="#v:parallel">parallel</a> :: [<a href="Development-Shake.html#t:Action">Action</a> a] -&gt; <a href="Development-Shake.html#t:Action">Action</a> [a]</li><li class="src short"><a href="#v:forP">forP</a> :: [a] -&gt; (a -&gt; <a href="Development-Shake.html#t:Action">Action</a> b) -&gt; <a href="Development-Shake.html#t:Action">Action</a> [b]</li><li class="src short"><a href="#v:par">par</a> :: <a href="Development-Shake.html#t:Action">Action</a> a -&gt; <a href="Development-Shake.html#t:Action">Action</a> b -&gt; <a href="Development-Shake.html#t:Action">Action</a> (a, b)</li><li class="src short"><a href="#v:copyFile-39-">copyFile'</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()</li><li class="src short"><a href="#v:copyFileChanged">copyFileChanged</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()</li><li class="src short"><a href="#v:readFile-39-">readFile'</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a></li><li class="src short"><a href="#v:readFileLines">readFileLines</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> [<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>]</li><li class="src short"><a href="#v:writeFile-39-">writeFile'</a> :: <a href="../transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; m ()</li><li class="src short"><a href="#v:writeFileLines">writeFileLines</a> :: <a href="../transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; [<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>] -&gt; m ()</li><li class="src short"><a href="#v:writeFileChanged">writeFileChanged</a> :: <a href="../transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; m ()</li><li class="src short"><a href="#v:removeFiles">removeFiles</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; [<a href="Development-Shake.html#t:FilePattern">FilePattern</a>] -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:removeFilesAfter">removeFilesAfter</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; [<a href="Development-Shake.html#t:FilePattern">FilePattern</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()</li><li class="src short"><a href="#v:withTempFile">withTempFile</a> :: (<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> a) -&gt; <a href="Development-Shake.html#t:Action">Action</a> a</li><li class="src short"><a href="#v:withTempDir">withTempDir</a> :: (<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> a) -&gt; <a href="Development-Shake.html#t:Action">Action</a> a</li><li class="src short"><a href="#v:need">need</a> :: [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()</li><li class="src short"><a href="#v:want">want</a> :: [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>] -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> ()</li><li class="src short"><a href="#v:-37--62-">(%&gt;)</a> :: <a href="Development-Shake.html#t:FilePattern">FilePattern</a> -&gt; (<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()) -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> ()</li><li class="src short"><a href="#v:-124--37--62-">(|%&gt;)</a> :: [<a href="Development-Shake.html#t:FilePattern">FilePattern</a>] -&gt; (<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()) -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> ()</li><li class="src short"><a href="#v:-63--62-">(?&gt;)</a> :: (<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a>) -&gt; (<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()) -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> ()</li><li class="src short"><a href="#v:phony">phony</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> () -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> ()</li><li class="src short"><a href="#v:-126--62-">(~&gt;)</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> () -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> ()</li><li class="src short"><a href="#v:phonys">phonys</a> :: (<a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Development-Shake.html#t:Action">Action</a> ())) -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> ()</li><li class="src short"><a href="#v:-38--37--62-">(&amp;%&gt;)</a> :: [<a href="Development-Shake.html#t:FilePattern">FilePattern</a>] -&gt; ([<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()) -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> ()</li><li class="src short"><a href="#v:-38--63--62-">(&amp;?&gt;)</a> :: (<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>]) -&gt; ([<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()) -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> ()</li><li class="src short"><a href="#v:orderOnly">orderOnly</a> :: [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()</li><li class="src short"><a href="#v:orderOnlyAction">orderOnlyAction</a> :: <a href="Development-Shake.html#t:Action">Action</a> a -&gt; <a href="Development-Shake.html#t:Action">Action</a> a</li><li class="src short"><span class="keyword">type</span> <a href="#t:FilePattern">FilePattern</a> = <a href="../base-4.8.2.0/Data-String.html#t:String">String</a></li><li class="src short"><a href="#v:-63--61--61-">(?==)</a> :: <a href="Development-Shake.html#t:FilePattern">FilePattern</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:-60--47--47--62-">(&lt;//&gt;)</a> :: <a href="Development-Shake.html#t:FilePattern">FilePattern</a> -&gt; <a href="Development-Shake.html#t:FilePattern">FilePattern</a> -&gt; <a href="Development-Shake.html#t:FilePattern">FilePattern</a></li><li class="src short"><a href="#v:needed">needed</a> :: [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()</li><li class="src short"><a href="#v:trackRead">trackRead</a> :: [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()</li><li class="src short"><a href="#v:trackWrite">trackWrite</a> :: [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()</li><li class="src short"><a href="#v:trackAllow">trackAllow</a> :: [<a href="Development-Shake.html#t:FilePattern">FilePattern</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()</li><li class="src short"><a href="#v:doesFileExist">doesFileExist</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:doesDirectoryExist">doesDirectoryExist</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:getDirectoryContents">getDirectoryContents</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>]</li><li class="src short"><a href="#v:getDirectoryFiles">getDirectoryFiles</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; [<a href="Development-Shake.html#t:FilePattern">FilePattern</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>]</li><li class="src short"><a href="#v:getDirectoryDirs">getDirectoryDirs</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>]</li><li class="src short"><a href="#v:getDirectoryFilesIO">getDirectoryFilesIO</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; [<a href="Development-Shake.html#t:FilePattern">FilePattern</a>] -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>]</li><li class="src short"><a href="#v:getEnv">getEnv</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a>)</li><li class="src short"><a href="#v:getEnvWithDefault">getEnvWithDefault</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:ShakeValue">ShakeValue</a> a = (<a href="Development-Shake-Classes.html#t:Show">Show</a> a, <a href="Development-Shake-Classes.html#t:Typeable">Typeable</a> a, <a href="Development-Shake-Classes.html#t:Eq">Eq</a> a, <a href="Development-Shake-Classes.html#t:Hashable">Hashable</a> a, <a href="Development-Shake-Classes.html#t:Binary">Binary</a> a, <a href="Development-Shake-Classes.html#t:NFData">NFData</a> a)</li><li class="src short"><a href="#v:addOracle">addOracle</a> :: (<a href="Development-Shake.html#t:ShakeValue">ShakeValue</a> q, <a href="Development-Shake.html#t:ShakeValue">ShakeValue</a> a) =&gt; (q -&gt; <a href="Development-Shake.html#t:Action">Action</a> a) -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> (q -&gt; <a href="Development-Shake.html#t:Action">Action</a> a)</li><li class="src short"><a href="#v:askOracle">askOracle</a> :: (<a href="Development-Shake.html#t:ShakeValue">ShakeValue</a> q, <a href="Development-Shake.html#t:ShakeValue">ShakeValue</a> a) =&gt; q -&gt; <a href="Development-Shake.html#t:Action">Action</a> a</li><li class="src short"><a href="#v:askOracleWith">askOracleWith</a> :: (<a href="Development-Shake.html#t:ShakeValue">ShakeValue</a> q, <a href="Development-Shake.html#t:ShakeValue">ShakeValue</a> a) =&gt; q -&gt; a -&gt; <a href="Development-Shake.html#t:Action">Action</a> a</li><li class="src short"><a href="#v:alwaysRerun">alwaysRerun</a> :: <a href="Development-Shake.html#t:Action">Action</a> ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:Resource">Resource</a></li><li class="src short"><a href="#v:newResource">newResource</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> <a href="Development-Shake.html#t:Resource">Resource</a></li><li class="src short"><a href="#v:newResourceIO">newResourceIO</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Development-Shake.html#t:Resource">Resource</a></li><li class="src short"><a href="#v:withResource">withResource</a> :: <a href="Development-Shake.html#t:Resource">Resource</a> -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> a -&gt; <a href="Development-Shake.html#t:Action">Action</a> a</li><li class="src short"><a href="#v:withResources">withResources</a> :: [(<a href="Development-Shake.html#t:Resource">Resource</a>, <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a>)] -&gt; <a href="Development-Shake.html#t:Action">Action</a> a -&gt; <a href="Development-Shake.html#t:Action">Action</a> a</li><li class="src short"><a href="#v:newThrottle">newThrottle</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a> -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> <a href="Development-Shake.html#t:Resource">Resource</a></li><li class="src short"><a href="#v:newThrottleIO">newThrottleIO</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Development-Shake.html#t:Resource">Resource</a></li><li class="src short"><a href="#v:unsafeExtraThread">unsafeExtraThread</a> :: <a href="Development-Shake.html#t:Action">Action</a> a -&gt; <a href="Development-Shake.html#t:Action">Action</a> a</li><li class="src short"><a href="#v:newCache">newCache</a> :: (<a href="Development-Shake-Classes.html#t:Eq">Eq</a> k, <a href="Development-Shake-Classes.html#t:Hashable">Hashable</a> k) =&gt; (k -&gt; <a href="Development-Shake.html#t:Action">Action</a> v) -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> (k -&gt; <a href="Development-Shake.html#t:Action">Action</a> v)</li><li class="src short"><a href="#v:newCacheIO">newCacheIO</a> :: (<a href="Development-Shake-Classes.html#t:Eq">Eq</a> k, <a href="Development-Shake-Classes.html#t:Hashable">Hashable</a> k) =&gt; (k -&gt; <a href="Development-Shake.html#t:Action">Action</a> v) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (k -&gt; <a href="Development-Shake.html#t:Action">Action</a> v)</li><li class="src short"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="Development-Shake.html#t:FilePattern">FilePattern</a> -&gt; (<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()) -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> ()</li><li class="src short"><a href="#v:-124--42--62-">(|*&gt;)</a> :: [<a href="Development-Shake.html#t:FilePattern">FilePattern</a>] -&gt; (<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()) -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> ()</li><li class="src short"><a href="#v:-38--42--62-">(&amp;*&gt;)</a> :: [<a href="Development-Shake.html#t:FilePattern">FilePattern</a>] -&gt; ([<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()) -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> ()</li><li class="src short"><a href="#v:-42--42--62-">(**&gt;)</a> :: [<a href="Development-Shake.html#t:FilePattern">FilePattern</a>] -&gt; (<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()) -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> ()</li><li class="src short"><a href="#v:-42--62--62-">(*&gt;&gt;)</a> :: [<a href="Development-Shake.html#t:FilePattern">FilePattern</a>] -&gt; ([<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()) -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> ()</li><li class="src short"><a href="#v:-63--62--62-">(?&gt;&gt;)</a> :: (<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>]) -&gt; ([<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()) -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> ()</li><li class="src short"><a href="#v:system-39-">system'</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; [<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()</li><li class="src short"><a href="#v:systemCwd">systemCwd</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; [<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()</li><li class="src short"><a href="#v:systemOutput">systemOutput</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; [<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> (<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>, <a href="../base-4.8.2.0/Data-String.html#t:String">String</a>)</li></ul></div><div id="interface"><h1 id="g:1">Core</h1><div class="top"><p class="src"><a name="v:shake" class="def">shake</a> :: <a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a> -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> () -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> () <a href="src/Development-Shake-Shake.html#shake" class="link">Source</a></p><div class="doc"><p>Main entry point for running Shake build systems. For an example see the top of the module <a href="Development-Shake.html">Development.Shake</a>.
   Use <code><a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a></code> to specify how the system runs, and <code><a href="Development-Shake.html#t:Rules">Rules</a></code> to specify what to build. The function will throw
   an exception if the build fails.</p><p>To use command line flags to modify <code><a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a></code> see <code><a href="Development-Shake.html#v:shakeArgs">shakeArgs</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:shakeOptions" class="def">shakeOptions</a> :: <a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a> <a href="src/Development-Shake-Types.html#shakeOptions" class="link">Source</a></p><div class="doc"><p>The default set of <code><a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a></code>.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Rules" class="def">Rules</a> a <a href="src/Development-Shake-Core.html#Rules" class="link">Source</a></p><div class="doc"><p>Define a set of rules. Rules can be created with calls to functions such as <code><a href="Development-Shake.html#v:-37--62-">%&gt;</a></code> or <code><a href="Development-Shake.html#v:action">action</a></code>.
   Rules are combined with either the <code><a href="../base-4.8.2.0/Data-Monoid.html#t:Monoid">Monoid</a></code> instance, or (more commonly) the <code><a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a></code> instance and <code>do</code> notation.
   To define your own custom types of rule, see <a href="Development-Shake-Rule.html">Development.Shake.Rule</a>.</p></div><div class="subs instances"><p id="control.i:Rules" class="caption collapser" onclick="toggleSection('i:Rules')">Instances</p><div id="section.i:Rules" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a> <a href="Development-Shake.html#t:Rules">Rules</a></span> <a href="src/Development-Shake-Core.html#line-163" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Functor.html#t:Functor">Functor</a> <a href="Development-Shake.html#t:Rules">Rules</a></span> <a href="src/Development-Shake-Core.html#line-163" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Control-Monad-Fix.html#t:MonadFix">MonadFix</a> <a href="Development-Shake.html#t:Rules">Rules</a></span> <a href="src/Development-Shake-Core.html#line-163" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> <a href="Development-Shake.html#t:Rules">Rules</a></span> <a href="src/Development-Shake-Core.html#line-163" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> <a href="Development-Shake.html#t:Rules">Rules</a></span> <a href="src/Development-Shake-Core.html#line-163" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Monoid.html#t:Monoid">Monoid</a> a =&gt; <a href="../base-4.8.2.0/Data-Monoid.html#t:Monoid">Monoid</a> (<a href="Development-Shake.html#t:Rules">Rules</a> a)</span> <a href="src/Development-Shake-Core.html#line-187" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:action" class="def">action</a> :: <a href="Development-Shake.html#t:Action">Action</a> a -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> () <a href="src/Development-Shake-Core.html#action" class="link">Source</a></p><div class="doc"><p>Run an action, usually used for specifying top-level requirements.</p><pre>main = <code><a href="Development-Shake.html#v:shake">shake</a></code> <code><a href="Development-Shake.html#v:shakeOptions">shakeOptions</a></code> $ do
   <code><a href="Development-Shake.html#v:action">action</a></code> $ do
       b &lt;- <code><a href="Development-Shake.html#v:doesFileExist">doesFileExist</a></code> &quot;file.src&quot;
       when b $ <code><a href="Development-Shake.html#v:need">need</a></code> [&quot;file.out&quot;]
</pre><p>This <code><a href="Development-Shake.html#v:action">action</a></code> builds <code>file.out</code>, but only if <code>file.src</code> exists. The <code><a href="Development-Shake.html#v:action">action</a></code>
   will be run in every build execution (unless <code><a href="Development-Shake.html#v:withoutActions">withoutActions</a></code> is used), so only cheap
   operations should be performed. All arguments to <code><a href="Development-Shake.html#v:action">action</a></code> may be run in parallel, in any order.</p><p>For the standard requirement of only <code><a href="Development-Shake.html#v:need">need</a></code>ing a fixed list of files in the <code><a href="Development-Shake.html#v:action">action</a></code>,
   see <code><a href="Development-Shake.html#v:want">want</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:withoutActions" class="def">withoutActions</a> :: <a href="Development-Shake.html#t:Rules">Rules</a> () -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> () <a href="src/Development-Shake-Core.html#withoutActions" class="link">Source</a></p><div class="doc"><p>Remove all actions specified in a set of rules, usually used for implementing
   command line specification of what to build.</p></div></div><div class="top"><p class="src"><a name="v:alternatives" class="def">alternatives</a> :: <a href="Development-Shake.html#t:Rules">Rules</a> () -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> () <a href="src/Development-Shake-Core.html#alternatives" class="link">Source</a></p><div class="doc"><p>Change the matching behaviour of rules so rules do not have to be disjoint, but are instead matched
   in order. Only recommended for small blocks containing a handful of rules.</p><pre><code><a href="Development-Shake.html#v:alternatives">alternatives</a></code> $ do
    &quot;hello.*&quot; %&gt; \out -&gt; <code>writeFile'</code> out &quot;hello.*&quot;
    &quot;*.txt&quot; %&gt; \out -&gt; <code>writeFile'</code> out &quot;*.txt&quot;
</pre><p>In this example <code>hello.txt</code> will match the first rule, instead of raising an error about ambiguity.
   Inside <code><a href="Development-Shake.html#v:alternatives">alternatives</a></code> the <code><a href="Development-Shake.html#v:priority">priority</a></code> of each rule is not used to determine which rule matches,
   but the resulting match uses that priority compared to the rules outside the <code><a href="Development-Shake.html#v:alternatives">alternatives</a></code> block.</p></div></div><div class="top"><p class="src"><a name="v:priority" class="def">priority</a> :: <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a> -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> () -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> () <a href="src/Development-Shake-Core.html#priority" class="link">Source</a></p><div class="doc"><p>Change the priority of a given set of rules, where higher priorities take precedence.
   All matching rules at a given priority must be disjoint, or an error is raised.
   All builtin Shake rules have priority between 0 and 1.
   Excessive use of <code><a href="Development-Shake.html#v:priority">priority</a></code> is discouraged. As an example:</p><pre><code><a href="Development-Shake.html#v:priority">priority</a></code> 4 $ &quot;hello.*&quot; %&gt; \out -&gt; <code>writeFile'</code> out &quot;hello.*&quot;
<code><a href="Development-Shake.html#v:priority">priority</a></code> 8 $ &quot;*.txt&quot; %&gt; \out -&gt; <code>writeFile'</code> out &quot;*.txt&quot;
</pre><p>In this example <code>hello.txt</code> will match the second rule, instead of raising an error about ambiguity.</p><p>The <code><a href="Development-Shake.html#v:priority">priority</a></code> function obeys the invariants:</p><pre><code><a href="Development-Shake.html#v:priority">priority</a></code> p1 (<code><a href="Development-Shake.html#v:priority">priority</a></code> p2 r1) === <code><a href="Development-Shake.html#v:priority">priority</a></code> p1 r1
<code><a href="Development-Shake.html#v:priority">priority</a></code> p1 (r1 &gt;&gt; r2) === <code><a href="Development-Shake.html#v:priority">priority</a></code> p1 r1 &gt;&gt; <code><a href="Development-Shake.html#v:priority">priority</a></code> p1 r2
</pre></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Action" class="def">Action</a> a <a href="src/Development-Shake-Core.html#Action" class="link">Source</a></p><div class="doc"><p>The <code><a href="Development-Shake.html#t:Action">Action</a></code> monad, use <code><a href="Development-Shake.html#v:liftIO">liftIO</a></code> to raise <code><a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a></code> actions into it, and <code><a href="Development-Shake.html#v:need">need</a></code> to execute files.
   Action values are used by <code><a href="Development-Shake-Rule.html#v:rule">rule</a></code> and <code><a href="Development-Shake.html#v:action">action</a></code>. The <code><a href="Development-Shake.html#t:Action">Action</a></code> monad tracks the dependencies of a <code><a href="Development-Shake-Rule.html#t:Rule">Rule</a></code>.</p></div><div class="subs instances"><p id="control.i:Action" class="caption collapser" onclick="toggleSection('i:Action')">Instances</p><div id="section.i:Action" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a> <a href="Development-Shake.html#t:Action">Action</a></span> <a href="src/Development-Shake-Core.html#line-357" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Functor.html#t:Functor">Functor</a> <a href="Development-Shake.html#t:Action">Action</a></span> <a href="src/Development-Shake-Core.html#line-357" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> <a href="Development-Shake.html#t:Action">Action</a></span> <a href="src/Development-Shake-Core.html#line-357" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> <a href="Development-Shake.html#t:Action">Action</a></span> <a href="src/Development-Shake-Core.html#line-357" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake.html#t:CmdResult">CmdResult</a> r =&gt; <a href="Development-Shake-Command.html#t:CmdArguments">CmdArguments</a> (<a href="Development-Shake.html#t:Action">Action</a> r)</span> <a href="src/Development-Shake-Command.html#line-568" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:traced" class="def">traced</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> a -&gt; <a href="Development-Shake.html#t:Action">Action</a> a <a href="src/Development-Shake-Core.html#traced" class="link">Source</a></p><div class="doc"><p>Write an action to the trace list, along with the start/end time of running the IO action.
   The <code><a href="Development-Shake.html#v:cmd">cmd</a></code> and <code><a href="Development-Shake.html#v:command">command</a></code> functions automatically call <code><a href="Development-Shake.html#v:traced">traced</a></code>.
   The trace list is used for profile reports (see <code><a href="Development-Shake.html#v:shakeReport">shakeReport</a></code>).</p><p>By default <code><a href="Development-Shake.html#v:traced">traced</a></code> prints some useful extra context about what
   Shake is building, e.g.:</p><pre># traced message (for myobject.o)</pre><p>To suppress the output of <code><a href="Development-Shake.html#v:traced">traced</a></code> (for example you want more control
   over the message using <code><a href="Development-Shake.html#v:putNormal">putNormal</a></code>), use the <code><a href="Development-Shake.html#v:quietly">quietly</a></code> combinator.</p></div></div><div class="top"><p class="src"><a name="v:liftIO" class="def">liftIO</a> :: <a href="../transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <span class="keyword">forall</span> a. <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> a -&gt; m a</p><div class="doc"><p>Lift a computation from the <code><a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a></code> monad.</p></div></div><div class="top"><p class="src"><a name="v:actionOnException" class="def">actionOnException</a> :: <a href="Development-Shake.html#t:Action">Action</a> a -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> b -&gt; <a href="Development-Shake.html#t:Action">Action</a> a <a href="src/Development-Shake-Core.html#actionOnException" class="link">Source</a></p><div class="doc"><p>If an exception is raised by the <code><a href="Development-Shake.html#t:Action">Action</a></code>, perform some <code><a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:actionFinally" class="def">actionFinally</a> :: <a href="Development-Shake.html#t:Action">Action</a> a -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> b -&gt; <a href="Development-Shake.html#t:Action">Action</a> a <a href="src/Development-Shake-Core.html#actionFinally" class="link">Source</a></p><div class="doc"><p>After an <code><a href="Development-Shake.html#t:Action">Action</a></code>, perform some <code><a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a></code>, even if there is an exception.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:ShakeException" class="def">ShakeException</a> <a href="src/Development-Shake-Errors.html#ShakeException" class="link">Source</a></p><div class="doc"><p>Error representing all expected exceptions thrown by Shake.
   Problems when executing rules will be raising using this exception type.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:ShakeException" class="def">ShakeException</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:shakeExceptionTarget" class="def">shakeExceptionTarget</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a></dt><dd class="doc"><p>The target that was being built when the exception occured.</p></dd><dt class="src"><a name="v:shakeExceptionStack" class="def">shakeExceptionStack</a> :: [<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>]</dt><dd class="doc"><p>The stack of targets, where the <code><a href="Development-Shake.html#v:shakeExceptionTarget">shakeExceptionTarget</a></code> is last.</p></dd><dt class="src"><a name="v:shakeExceptionInner" class="def">shakeExceptionInner</a> :: <a href="../base-4.8.2.0/Control-Exception-Base.html#t:SomeException">SomeException</a></dt><dd class="doc"><p>The underlying exception that was raised.</p></dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:ShakeException" class="caption collapser" onclick="toggleSection('i:ShakeException')">Instances</p><div id="section.i:ShakeException" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake-Classes.html#t:Show">Show</a> <a href="Development-Shake.html#t:ShakeException">ShakeException</a></span> <a href="src/Development-Shake-Errors.html#line-147" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Control-Exception-Base.html#t:Exception">Exception</a> <a href="Development-Shake.html#t:ShakeException">ShakeException</a></span> <a href="src/Development-Shake-Errors.html#line-145" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h1 id="g:2">Configuration</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:ShakeOptions" class="def">ShakeOptions</a> <a href="src/Development-Shake-Types.html#ShakeOptions" class="link">Source</a></p><div class="doc"><p>Options to control the execution of Shake, usually specified by overriding fields in
   <code><a href="Development-Shake.html#v:shakeOptions">shakeOptions</a></code>:</p><pre> <code><a href="Development-Shake.html#v:shakeOptions">shakeOptions</a></code>{<code><a href="Development-Shake.html#v:shakeThreads">shakeThreads</a></code>=4, <code><a href="Development-Shake.html#v:shakeReport">shakeReport</a></code>=[&quot;report.html&quot;]}</pre><p>The <code><a href="../base-4.8.2.0/Data-Data.html#t:Data">Data</a></code> instance for this type reports the <code><a href="Development-Shake.html#v:shakeProgress">shakeProgress</a></code> and <code><a href="Development-Shake.html#v:shakeOutput">shakeOutput</a></code> fields as having the abstract type <code>Hidden</code>,
   because <code><a href="../base-4.8.2.0/Data-Data.html#t:Data">Data</a></code> cannot be defined for functions or <code><a href="../base-4.8.2.0/Data-Typeable-Internal.html#t:TypeRep">TypeRep</a></code>s.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:ShakeOptions" class="def">ShakeOptions</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:shakeFiles" class="def">shakeFiles</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a></dt><dd class="doc"><p>Defaults to <code>.shake</code>. The directory used for storing Shake metadata files.
   All metadata files will be named <code><code><a href="Development-Shake.html#v:shakeFiles">shakeFiles</a></code>/.shake.<em>file-name</em></code>, for some <code><em>file-name</em></code>.
   If the <code><a href="Development-Shake.html#v:shakeFiles">shakeFiles</a></code> directory does not exist it will be created.</p></dd><dt class="src"><a name="v:shakeThreads" class="def">shakeThreads</a> :: <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></dt><dd class="doc"><p>Defaults to <code>1</code>. Maximum number of rules to run in parallel, similar to <code>make --jobs=<em>N</em></code>.
   For many build systems, a number equal to or slightly less than the number of physical processors
   works well. Use <code>0</code> to match the detected number of processors (when <code>0</code>, <code>getShakeOptions</code> will
   return the number of threads used).</p></dd><dt class="src"><a name="v:shakeVersion" class="def">shakeVersion</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a></dt><dd class="doc"><p>Defaults to <code>&quot;1&quot;</code>. The version number of your build rules.
   Change the version number to force a complete rebuild, such as when making
   significant changes to the rules that require a wipe. The version number should be
   set in the source code, and not passed on the command line.</p></dd><dt class="src"><a name="v:shakeVerbosity" class="def">shakeVerbosity</a> :: <a href="Development-Shake.html#t:Verbosity">Verbosity</a></dt><dd class="doc"><p>Defaults to <code><a href="Development-Shake.html#v:Normal">Normal</a></code>. What level of messages should be printed out.</p></dd><dt class="src"><a name="v:shakeStaunch" class="def">shakeStaunch</a> :: <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></dt><dd class="doc"><p>Defaults to <code><a href="../base-4.8.2.0/Data-Bool.html#v:False">False</a></code>. Operate in staunch mode, where building continues even after errors,
   similar to <code>make --keep-going</code>.</p></dd><dt class="src"><a name="v:shakeReport" class="def">shakeReport</a> :: [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>]</dt><dd class="doc"><p>Defaults to <code>[]</code>. Write a profiling report to a file, showing which rules rebuilt,
   why, and how much time they took. Useful for improving the speed of your build systems.
   If the file extension is <code>.json</code> it will write JSON data; if <code>.js</code> it will write Javascript;
   if <code>.trace</code> it will write trace events (load into <code>about://tracing</code> in Chrome);
   otherwise it will write HTML.</p></dd><dt class="src"><a name="v:shakeLint" class="def">shakeLint</a> :: <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Development-Shake.html#t:Lint">Lint</a></dt><dd class="doc"><p>Defaults to <code><a href="../base-4.8.2.0/Data-Maybe.html#v:Nothing">Nothing</a></code>. Perform sanity checks during building, see <code><a href="Development-Shake.html#t:Lint">Lint</a></code> for details.</p></dd><dt class="src"><a name="v:shakeLintInside" class="def">shakeLintInside</a> :: [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>]</dt><dd class="doc"><p>Directories in which the files will be tracked by the linter.</p></dd><dt class="src"><a name="v:shakeLintIgnore" class="def">shakeLintIgnore</a> :: [<a href="Development-Shake.html#t:FilePattern">FilePattern</a>]</dt><dd class="doc"><p>File patterns which are ignored from linter tracking, a bit like calling <code><a href="Development-Shake.html#v:trackAllow">trackAllow</a></code> in every rule.</p></dd><dt class="src"><a name="v:shakeCommandOptions" class="def">shakeCommandOptions</a> :: [<a href="Development-Shake.html#t:CmdOption">CmdOption</a>]</dt><dd class="doc"><p>Defaults to <code>[]</code>. Additional options to be passed to all command invocations.</p></dd><dt class="src"><a name="v:shakeFlush" class="def">shakeFlush</a> :: <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></dt><dd class="doc"><p>Defaults to <code><code><a href="../base-4.8.2.0/Data-Maybe.html#v:Just">Just</a></code> 10</code>. How often to flush Shake metadata files in seconds, or <code><a href="../base-4.8.2.0/Data-Maybe.html#v:Nothing">Nothing</a></code> to never flush explicitly.
   It is possible that on abnormal termination (not Haskell exceptions) any rules that completed in the last
   <code><a href="Development-Shake.html#v:shakeFlush">shakeFlush</a></code> seconds will be lost.</p></dd><dt class="src"><a name="v:shakeAssume" class="def">shakeAssume</a> :: <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Development-Shake.html#t:Assume">Assume</a></dt><dd class="doc"><p>Defaults to <code><a href="../base-4.8.2.0/Data-Maybe.html#v:Nothing">Nothing</a></code>. Assume all build objects are clean/dirty, see <code><a href="Development-Shake.html#t:Assume">Assume</a></code> for details.
   Can be used to implement <code>make --touch</code>.</p></dd><dt class="src"><a name="v:shakeAbbreviations" class="def">shakeAbbreviations</a> :: [(<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>, <a href="../base-4.8.2.0/Data-String.html#t:String">String</a>)]</dt><dd class="doc"><p>Defaults to <code>[]</code>. A list of substrings that should be abbreviated in status messages, and their corresponding abbreviation.
   Commonly used to replace the long paths (e.g. <code>.make/i586-linux-gcc/output</code>) with an abbreviation (e.g. <code>$OUT</code>).</p></dd><dt class="src"><a name="v:shakeStorageLog" class="def">shakeStorageLog</a> :: <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></dt><dd class="doc"><p>Defaults to <code><a href="../base-4.8.2.0/Data-Bool.html#v:False">False</a></code>. Write a message to <code><code><a href="Development-Shake.html#v:shakeFiles">shakeFiles</a></code>/.shake.storage.log</code> whenever a storage event happens which may impact
   on the current stored progress. Examples include database version number changes, database compaction or corrupt files.</p></dd><dt class="src"><a name="v:shakeLineBuffering" class="def">shakeLineBuffering</a> :: <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></dt><dd class="doc"><p>Defaults to <code><a href="../base-4.8.2.0/Data-Bool.html#v:True">True</a></code>. Change <code>stdout</code> and <code>stderr</code> to line buffering while running Shake.</p></dd><dt class="src"><a name="v:shakeTimings" class="def">shakeTimings</a> :: <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></dt><dd class="doc"><p>Defaults to <code><a href="../base-4.8.2.0/Data-Bool.html#v:False">False</a></code>. Print timing information for each stage at the end.</p></dd><dt class="src"><a name="v:shakeRunCommands" class="def">shakeRunCommands</a> :: <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></dt><dd class="doc"><p>Default to <code><a href="../base-4.8.2.0/Data-Bool.html#v:True">True</a></code>. Should you run command line actions, set to <code><a href="../base-4.8.2.0/Data-Bool.html#v:False">False</a></code> to skip actions whose output streams and exit code
   are not used. Useful for profiling the non-command portion of the build system.</p></dd><dt class="src"><a name="v:shakeChange" class="def">shakeChange</a> :: <a href="Development-Shake.html#t:Change">Change</a></dt><dd class="doc"><p>Default to <code><a href="Development-Shake.html#v:ChangeModtime">ChangeModtime</a></code>. How to check if a file has changed, see <code><a href="Development-Shake.html#t:Change">Change</a></code> for details.</p></dd><dt class="src"><a name="v:shakeCreationCheck" class="def">shakeCreationCheck</a> :: <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></dt><dd class="doc"><p>Default to <code><a href="../base-4.8.2.0/Data-Bool.html#v:True">True</a></code>. After running a rule to create a file, is it an error if the file does not exist.
   Provided for compatibility with <code>make</code> and <code>ninja</code> (which have ugly file creation semantics).</p></dd><dt class="src"><a name="v:shakeLiveFiles" class="def">shakeLiveFiles</a> :: [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>]</dt><dd class="doc"><p>Default to <code>[]</code>. After the build system completes, write a list of all files which were <em>live</em> in that run,
   i.e. those which Shake checked were valid or rebuilt. Produces best answers if nothing rebuilds.</p></dd><dt class="src"><a name="v:shakeVersionIgnore" class="def">shakeVersionIgnore</a> :: <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></dt><dd class="doc"><p>Defaults to <code><a href="../base-4.8.2.0/Data-Bool.html#v:False">False</a></code>. Ignore any differences in <code><a href="Development-Shake.html#v:shakeVersion">shakeVersion</a></code>.</p></dd><dt class="src"><a name="v:shakeProgress" class="def">shakeProgress</a> :: <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Development-Shake.html#t:Progress">Progress</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</dt><dd class="doc"><p>Defaults to no action. A function called when the build starts, allowing progress to be reported.
   The function is called on a separate thread, and that thread is killed when the build completes.
   For applications that want to display progress messages, <code><a href="Development-Shake.html#v:progressSimple">progressSimple</a></code> is often sufficient, but more advanced
   users should look at the <code><a href="Development-Shake.html#t:Progress">Progress</a></code> data type.</p></dd><dt class="src"><a name="v:shakeOutput" class="def">shakeOutput</a> :: <a href="Development-Shake.html#t:Verbosity">Verbosity</a> -&gt; <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</dt><dd class="doc"><p>Defaults to writing using <code><a href="../base-4.8.2.0/System-IO.html#v:putStrLn">putStrLn</a></code>. A function called to output messages from Shake, along with the <code><a href="Development-Shake.html#t:Verbosity">Verbosity</a></code> at
   which that message should be printed. This function will be called atomically from all other <code><a href="Development-Shake.html#v:shakeOutput">shakeOutput</a></code> functions.
   The <code><a href="Development-Shake.html#t:Verbosity">Verbosity</a></code> will always be greater than or higher than <code><a href="Development-Shake.html#v:shakeVerbosity">shakeVerbosity</a></code>.</p></dd><dt class="src"><a name="v:shakeExtra" class="def">shakeExtra</a> :: <a href="../unordered-containers-0.2.7.1/Data-HashMap-Strict.html#t:HashMap">HashMap</a> <a href="../base-4.8.2.0/Data-Typeable-Internal.html#t:TypeRep">TypeRep</a> <a href="../base-4.8.2.0/Data-Dynamic.html#t:Dynamic">Dynamic</a></dt><dd class="doc"><p>This a map which can be used to store arbitrary extra
   information that a user may need when writing <code>Rule</code>s.  The
   correct way to use this is to define a (hidden) newtype to
   use as a key, so that conflicts cannot occur.</p></dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:ShakeOptions" class="caption collapser" onclick="toggleSection('i:ShakeOptions')">Instances</p><div id="section.i:ShakeOptions" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Data.html#t:Data">Data</a> <a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a></span> <a href="src/Development-Shake-Types.html#line-187" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake-Classes.html#t:Show">Show</a> <a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a></span> <a href="src/Development-Shake-Types.html#line-196" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Assume" class="def">Assume</a> <a href="src/Development-Shake-Types.html#Assume" class="link">Source</a></p><div class="doc"><p>The current assumptions made by the build system, used by <code><a href="Development-Shake.html#v:shakeAssume">shakeAssume</a></code>. These options
   allow the end user to specify that any rules run are either to be treated as clean, or as
   dirty, regardless of what the build system thinks.</p><p>These assumptions only operate on files reached by the current <code><a href="Development-Shake.html#v:action">action</a></code> commands. Any
   other files in the database are left unchanged.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:AssumeDirty" class="def">AssumeDirty</a></td><td class="doc"><p>Assume that all rules reached are dirty and require rebuilding, equivalent to <code><a href="Development-Shake-Rule.html#v:storedValue">storedValue</a></code> always
   returning <code><a href="../base-4.8.2.0/Data-Maybe.html#v:Nothing">Nothing</a></code>. Useful to undo the results of <code><a href="Development-Shake.html#v:AssumeClean">AssumeClean</a></code>, for benchmarking rebuild speed and
   for rebuilding if untracked dependencies have changed. This assumption is safe, but may cause
   more rebuilding than necessary.</p></td></tr><tr><td class="src"><a name="v:AssumeClean" class="def">AssumeClean</a></td><td class="doc"><p><em>This assumption is unsafe, and may lead to incorrect build results in this run, and in future runs</em>.
   Assume and record that all rules reached are clean and do not require rebuilding, provided the rule
   has a <code><a href="Development-Shake-Rule.html#v:storedValue">storedValue</a></code> and has been built before. Useful if you have modified a file in some
   inconsequential way, such as only the comments or whitespace, and wish to avoid a rebuild.</p></td></tr><tr><td class="src"><a name="v:AssumeSkip" class="def">AssumeSkip</a></td><td class="doc"><p><em>This assumption is unsafe, and may lead to incorrect build results in this run</em>.
   Assume that all rules reached are clean in this run. Only useful for benchmarking, to remove any overhead
   from running <code><a href="Development-Shake-Rule.html#v:storedValue">storedValue</a></code> operations.</p></td></tr></table></div><div class="subs instances"><p id="control.i:Assume" class="caption collapser" onclick="toggleSection('i:Assume')">Instances</p><div id="section.i:Assume" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Prelude.html#t:Bounded">Bounded</a> <a href="Development-Shake.html#t:Assume">Assume</a></span> <a href="src/Development-Shake-Types.html#line-41" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Prelude.html#t:Enum">Enum</a> <a href="Development-Shake.html#t:Assume">Assume</a></span> <a href="src/Development-Shake-Types.html#line-41" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake-Classes.html#t:Eq">Eq</a> <a href="Development-Shake.html#t:Assume">Assume</a></span> <a href="src/Development-Shake-Types.html#line-41" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Data.html#t:Data">Data</a> <a href="Development-Shake.html#t:Assume">Assume</a></span> <a href="src/Development-Shake-Types.html#line-41" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Ord.html#t:Ord">Ord</a> <a href="Development-Shake.html#t:Assume">Assume</a></span> <a href="src/Development-Shake-Types.html#line-41" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Text-Read.html#t:Read">Read</a> <a href="Development-Shake.html#t:Assume">Assume</a></span> <a href="src/Development-Shake-Types.html#line-41" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake-Classes.html#t:Show">Show</a> <a href="Development-Shake.html#t:Assume">Assume</a></span> <a href="src/Development-Shake-Types.html#line-41" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Lint" class="def">Lint</a> <a href="src/Development-Shake-Types.html#Lint" class="link">Source</a></p><div class="doc"><p>Which lint checks to perform, used by <code><a href="Development-Shake.html#v:shakeLint">shakeLint</a></code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:LintBasic" class="def">LintBasic</a></td><td class="doc"><p>The most basic form of linting. Checks that the current directory does not change and that results do not change after they
   are first written. Any calls to <code>needed</code> will assert that they do not cause a rule to be rebuilt.</p></td></tr><tr><td class="src"><a name="v:LintFSATrace" class="def">LintFSATrace</a></td><td class="doc"><p>Track which files are accessed by command line programs
 using <a href="https://github.com/jacereda/fsatrace">fsatrace</a>.</p></td></tr></table></div><div class="subs instances"><p id="control.i:Lint" class="caption collapser" onclick="toggleSection('i:Lint')">Instances</p><div id="section.i:Lint" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Prelude.html#t:Bounded">Bounded</a> <a href="Development-Shake.html#t:Lint">Lint</a></span> <a href="src/Development-Shake-Types.html#line-52" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Prelude.html#t:Enum">Enum</a> <a href="Development-Shake.html#t:Lint">Lint</a></span> <a href="src/Development-Shake-Types.html#line-52" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake-Classes.html#t:Eq">Eq</a> <a href="Development-Shake.html#t:Lint">Lint</a></span> <a href="src/Development-Shake-Types.html#line-52" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Data.html#t:Data">Data</a> <a href="Development-Shake.html#t:Lint">Lint</a></span> <a href="src/Development-Shake-Types.html#line-52" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Ord.html#t:Ord">Ord</a> <a href="Development-Shake.html#t:Lint">Lint</a></span> <a href="src/Development-Shake-Types.html#line-52" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Text-Read.html#t:Read">Read</a> <a href="Development-Shake.html#t:Lint">Lint</a></span> <a href="src/Development-Shake-Types.html#line-52" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake-Classes.html#t:Show">Show</a> <a href="Development-Shake.html#t:Lint">Lint</a></span> <a href="src/Development-Shake-Types.html#line-52" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Change" class="def">Change</a> <a href="src/Development-Shake-Types.html#Change" class="link">Source</a></p><div class="doc"><p>How should you determine if a file has changed, used by <code><a href="Development-Shake.html#v:shakeChange">shakeChange</a></code>. The most common values are
   <code><a href="Development-Shake.html#v:ChangeModtime">ChangeModtime</a></code> (very fast, <code>touch</code> causes files to rebuild) and <code><a href="Development-Shake.html#v:ChangeModtimeAndDigestInput">ChangeModtimeAndDigestInput</a></code>
   (a bit slower, <code>touch</code> does not cause input files to rebuild).</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:ChangeModtime" class="def">ChangeModtime</a></td><td class="doc"><p>Compare equality of modification timestamps, a file has changed if its last modified time changes.
   A <code>touch</code> will force a rebuild. This mode is fast and usually sufficiently accurate, so is the default.</p></td></tr><tr><td class="src"><a name="v:ChangeDigest" class="def">ChangeDigest</a></td><td class="doc"><p>Compare equality of file contents digests, a file has changed if its digest changes.
   A <code>touch</code> will not force a rebuild. Use this mode if modification times on your file system are unreliable.</p></td></tr><tr><td class="src"><a name="v:ChangeModtimeAndDigest" class="def">ChangeModtimeAndDigest</a></td><td class="doc"><p>A file is rebuilt if both its modification time and digest have changed. For efficiency reasons, the modification
   time is checked first, and if that has changed, the digest is checked.</p></td></tr><tr><td class="src"><a name="v:ChangeModtimeAndDigestInput" class="def">ChangeModtimeAndDigestInput</a></td><td class="doc"><p>Use <code><a href="Development-Shake.html#v:ChangeModtimeAndDigest">ChangeModtimeAndDigest</a></code> for input/source files and <code><a href="Development-Shake.html#v:ChangeModtime">ChangeModtime</a></code> for output files.</p></td></tr><tr><td class="src"><a name="v:ChangeModtimeOrDigest" class="def">ChangeModtimeOrDigest</a></td><td class="doc"><p>A file is rebuilt if either its modification time or its digest has changed. A <code>touch</code> will force a rebuild,
   but even if a files modification time is reset afterwards, changes will also cause a rebuild.</p></td></tr></table></div><div class="subs instances"><p id="control.i:Change" class="caption collapser" onclick="toggleSection('i:Change')">Instances</p><div id="section.i:Change" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Prelude.html#t:Bounded">Bounded</a> <a href="Development-Shake.html#t:Change">Change</a></span> <a href="src/Development-Shake-Types.html#line-73" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Prelude.html#t:Enum">Enum</a> <a href="Development-Shake.html#t:Change">Change</a></span> <a href="src/Development-Shake-Types.html#line-73" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake-Classes.html#t:Eq">Eq</a> <a href="Development-Shake.html#t:Change">Change</a></span> <a href="src/Development-Shake-Types.html#line-73" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Data.html#t:Data">Data</a> <a href="Development-Shake.html#t:Change">Change</a></span> <a href="src/Development-Shake-Types.html#line-73" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Ord.html#t:Ord">Ord</a> <a href="Development-Shake.html#t:Change">Change</a></span> <a href="src/Development-Shake-Types.html#line-73" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Text-Read.html#t:Read">Read</a> <a href="Development-Shake.html#t:Change">Change</a></span> <a href="src/Development-Shake-Types.html#line-73" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake-Classes.html#t:Show">Show</a> <a href="Development-Shake.html#t:Change">Change</a></span> <a href="src/Development-Shake-Types.html#line-73" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:getShakeOptions" class="def">getShakeOptions</a> :: <a href="Development-Shake.html#t:Action">Action</a> <a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a> <a href="src/Development-Shake-Core.html#getShakeOptions" class="link">Source</a></p><div class="doc"><p>Get the initial <code><a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a></code>, these will not change during the build process.</p></div></div><div class="top"><p class="src"><a name="v:getHashedShakeVersion" class="def">getHashedShakeVersion</a> :: [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>] -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> <a href="src/Development-Shake-Derived.html#getHashedShakeVersion" class="link">Source</a></p><div class="doc"><p>Get a checksum of a list of files, suitable for using as <code><a href="Development-Shake.html#v:shakeVersion">shakeVersion</a></code>.
   This will trigger a rebuild when the Shake rules defined in any of the files are changed.
   For example:</p><pre>main = do
    ver &lt;- <code><a href="Development-Shake.html#v:getHashedShakeVersion">getHashedShakeVersion</a></code> [&quot;Shakefile.hs&quot;]
    <code>shakeArgs</code> <code><a href="Development-Shake.html#v:shakeOptions">shakeOptions</a></code>{<code><a href="Development-Shake.html#v:shakeVersion">shakeVersion</a></code> = ver} ...
</pre><p>To automatically detect the name of the current file, turn on the <code>TemplateHaskell</code>
   extension and write <code>$(LitE . StringL . loc_filename &lt;$&gt; location)</code>.</p><p>This feature can be turned off during development by passing
   the flag <code>--no-rule-version</code> or setting <code><a href="Development-Shake.html#v:shakeVersionIgnore">shakeVersionIgnore</a></code> to <code><a href="../base-4.8.2.0/Data-Bool.html#v:True">True</a></code>.</p></div></div><h2 id="g:3">Command line</h2><div class="top"><p class="src"><a name="v:shakeArgs" class="def">shakeArgs</a> :: <a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a> -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> () -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> () <a href="src/Development-Shake-Args.html#shakeArgs" class="link">Source</a></p><div class="doc"><p>Run a build system using command line arguments for configuration.
   The available flags are those from <code><a href="Development-Shake.html#v:shakeOptDescrs">shakeOptDescrs</a></code>, along with a few additional
   <code>make</code> compatible flags that are not represented in <code><a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a></code>, such as <code>--print-directory</code>.
   If there are no file arguments then the <code><a href="Development-Shake.html#t:Rules">Rules</a></code> are used directly, otherwise the file arguments
   are <code><a href="Development-Shake.html#v:want">want</a></code>ed (after calling <code><a href="Development-Shake.html#v:withoutActions">withoutActions</a></code>). As an example:</p><pre>main = <code><a href="Development-Shake.html#v:shakeArgs">shakeArgs</a></code> <code><a href="Development-Shake.html#v:shakeOptions">shakeOptions</a></code>{<code><a href="Development-Shake.html#v:shakeFiles">shakeFiles</a></code> = &quot;_make&quot;, <code><a href="Development-Shake.html#v:shakeProgress">shakeProgress</a></code> = <code><a href="Development-Shake.html#v:progressSimple">progressSimple</a></code>} $ do
    <code><a href="Development-Shake.html#v:phony">phony</a></code> &quot;clean&quot; $ <code><a href="Development-Shake.html#v:removeFilesAfter">removeFilesAfter</a></code> &quot;_make&quot; [&quot;//*&quot;]
    <code><a href="Development-Shake.html#v:want">want</a></code> [&quot;_make/neil.txt&quot;,&quot;_make/emily.txt&quot;]
    &quot;_make/*.txt&quot; <code><a href="Development-Shake.html#v:-37--62-">%&gt;</a></code> \out -&gt;
        ... build action here ...
</pre><p>This build system will default to building <code>neil.txt</code> and <code>emily.txt</code>, while showing progress messages,
   and putting the Shake files in locations such as <code>_make/.database</code>. Some example command line flags:</p><ul><li><code>main --no-progress</code> will turn off progress messages.</li><li><code>main -j6</code> will build on 6 threads.</li><li><code>main --help</code> will display a list of supported flags.</li><li><code>main clean</code> will not build anything, but will remove the <code>_make</code> directory, including the
   any <code><a href="Development-Shake.html#v:shakeFiles">shakeFiles</a></code>.</li><li><code>main _make/henry.txt</code> will not build <code>neil.txt</code> or <code>emily.txt</code>, but will instead build <code>henry.txt</code>.</li></ul></div></div><div class="top"><p class="src"><a name="v:shakeArgsWith" class="def">shakeArgsWith</a> :: <a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a> -&gt; [<a href="../base-4.8.2.0/System-Console-GetOpt.html#t:OptDescr">OptDescr</a> (<a href="../base-4.8.2.0/Data-Either.html#t:Either">Either</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> a)] -&gt; ([a] -&gt; [<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>] -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Development-Shake.html#t:Rules">Rules</a> ()))) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> () <a href="src/Development-Shake-Args.html#shakeArgsWith" class="link">Source</a></p><div class="doc"><p>A version of <code><a href="Development-Shake.html#v:shakeArgs">shakeArgs</a></code> with more flexible handling of command line arguments.
   The caller of <code><a href="Development-Shake.html#v:shakeArgsWith">shakeArgsWith</a></code> can add additional flags (the second argument) and chose how to convert
   the flags/arguments into rules (the third argument). Given:</p><pre><code><a href="Development-Shake.html#v:shakeArgsWith">shakeArgsWith</a></code> opts flags (\flagValues argValues -&gt; result)
</pre><ul><li><code>opts</code> is the initial <code><a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a></code> value, which may have some fields overriden by command line flags.
   This argument is usually <code><a href="Development-Shake.html#v:shakeOptions">shakeOptions</a></code>, perhaps with a few fields overriden.</li><li><code>flags</code> is a list of flag descriptions, which either produce a <code><a href="../base-4.8.2.0/Data-String.html#t:String">String</a></code> containing an error
   message (typically for flags with invalid arguments, .e.g. <code><code><a href="../base-4.8.2.0/Data-Either.html#v:Left">Left</a></code> &quot;could not parse as int&quot;</code>), or a value
   that is passed as <code>flagValues</code>. If you have no custom flags, pass <code>[]</code>.</li><li><code>flagValues</code> is a list of custom flags that the user supplied. If <code>flags == []</code> then this list will
   be <code>[]</code>.</li><li><code>argValues</code> is a list of non-flag arguments, which are often treated as files and passed to <code><a href="Development-Shake.html#v:want">want</a></code>.</li><li><code>result</code> should produce a <code><a href="../base-4.8.2.0/Data-Maybe.html#v:Nothing">Nothing</a></code> to indicate that no building needs to take place, or a <code><a href="../base-4.8.2.0/Data-Maybe.html#v:Just">Just</a></code>
   providing the rules that should be used.</li></ul><p>As an example of a build system that can use either <code>gcc</code> or <code>distcc</code> for compiling:</p><pre>import System.Console.GetOpt

data Flags = DistCC deriving Eq
flags = [Option &quot;&quot; [&quot;distcc&quot;] (NoArg $ Right DistCC) &quot;Run distributed.&quot;]

main = <code><a href="Development-Shake.html#v:shakeArgsWith">shakeArgsWith</a></code> <code><a href="Development-Shake.html#v:shakeOptions">shakeOptions</a></code> flags $ \flags targets -&gt; return $ Just $ do
    if null targets then <code><a href="Development-Shake.html#v:want">want</a></code> [&quot;result.exe&quot;] else <code><a href="Development-Shake.html#v:want">want</a></code> targets
    let compiler = if DistCC `elem` flags then &quot;distcc&quot; else &quot;gcc&quot;
    &quot;*.o&quot; <code><a href="Development-Shake.html#v:-37--62-">%&gt;</a></code> \out -&gt; do
        <code><a href="Development-Shake.html#v:need">need</a></code> ...
        <code>cmd</code> compiler ...
    ...
</pre><p>Now you can pass <code>--distcc</code> to use the <code>distcc</code> compiler.</p></div></div><div class="top"><p class="src"><a name="v:shakeOptDescrs" class="def">shakeOptDescrs</a> :: [<a href="../base-4.8.2.0/System-Console-GetOpt.html#t:OptDescr">OptDescr</a> (<a href="../base-4.8.2.0/Data-Either.html#t:Either">Either</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> (<a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a> -&gt; <a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a>))] <a href="src/Development-Shake-Args.html#shakeOptDescrs" class="link">Source</a></p><div class="doc"><p>A list of command line options that can be used to modify <code><a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a></code>. Each option returns
   either an error message (invalid argument to the flag) or a function that changes some fields
   in <code><a href="Development-Shake.html#t:ShakeOptions">ShakeOptions</a></code>. The command line flags are <code>make</code> compatible where possbile, but additional
   flags have been added for the extra options Shake supports.</p></div></div><h2 id="g:4">Progress reporting</h2><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Progress" class="def">Progress</a> <a href="src/Development-Shake-Progress.html#Progress" class="link">Source</a></p><div class="doc"><p>Information about the current state of the build, obtained by either passing a callback function
   to <code><a href="Development-Shake.html#v:shakeProgress">shakeProgress</a></code> (asynchronous output) or <code><a href="Development-Shake.html#v:getProgress">getProgress</a></code>
   (synchronous output). Typically a build system will pass <code><a href="Development-Shake.html#v:progressDisplay">progressDisplay</a></code> to <code><a href="Development-Shake.html#v:shakeProgress">shakeProgress</a></code>,
   which will poll this value and produce status messages.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Progress" class="def">Progress</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:isFailure" class="def">isFailure</a> :: !(<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a>)</dt><dd class="doc"><p>Starts out <code><a href="../base-4.8.2.0/Data-Maybe.html#v:Nothing">Nothing</a></code>, becomes <code><a href="../base-4.8.2.0/Data-Maybe.html#v:Just">Just</a></code> a target name if a rule fails.</p></dd><dt class="src"><a name="v:countSkipped" class="def">countSkipped</a> :: !<a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></dt><dd class="doc"><p>Number of rules which were required, but were already in a valid state.</p></dd><dt class="src"><a name="v:countBuilt" class="def">countBuilt</a> :: !<a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></dt><dd class="doc"><p>Number of rules which were have been built in this run.</p></dd><dt class="src"><a name="v:countUnknown" class="def">countUnknown</a> :: !<a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></dt><dd class="doc"><p>Number of rules which have been built previously, but are not yet known to be required.</p></dd><dt class="src"><a name="v:countTodo" class="def">countTodo</a> :: !<a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></dt><dd class="doc"><p>Number of rules which are currently required (ignoring dependencies that do not change), but not built.</p></dd><dt class="src"><a name="v:timeSkipped" class="def">timeSkipped</a> :: !<a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></dt><dd class="doc"><p>Time spent building <code><a href="Development-Shake.html#v:countSkipped">countSkipped</a></code> rules in previous runs.</p></dd><dt class="src"><a name="v:timeBuilt" class="def">timeBuilt</a> :: !<a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></dt><dd class="doc"><p>Time spent building <code><a href="Development-Shake.html#v:countBuilt">countBuilt</a></code> rules.</p></dd><dt class="src"><a name="v:timeUnknown" class="def">timeUnknown</a> :: !<a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></dt><dd class="doc"><p>Time spent building <code><a href="Development-Shake.html#v:countUnknown">countUnknown</a></code> rules in previous runs.</p></dd><dt class="src"><a name="v:timeTodo" class="def">timeTodo</a> :: !(<a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a>, <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a>)</dt><dd class="doc"><p>Time spent building <code><a href="Development-Shake.html#v:countTodo">countTodo</a></code> rules in previous runs, plus the number which have no known time (have never been built before).</p></dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:Progress" class="caption collapser" onclick="toggleSection('i:Progress')">Instances</p><div id="section.i:Progress" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake-Classes.html#t:Eq">Eq</a> <a href="Development-Shake.html#t:Progress">Progress</a></span> <a href="src/Development-Shake-Progress.html#line-68" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Data.html#t:Data">Data</a> <a href="Development-Shake.html#t:Progress">Progress</a></span> <a href="src/Development-Shake-Progress.html#line-68" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Ord.html#t:Ord">Ord</a> <a href="Development-Shake.html#t:Progress">Progress</a></span> <a href="src/Development-Shake-Progress.html#line-68" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Text-Read.html#t:Read">Read</a> <a href="Development-Shake.html#t:Progress">Progress</a></span> <a href="src/Development-Shake-Progress.html#line-68" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake-Classes.html#t:Show">Show</a> <a href="Development-Shake.html#t:Progress">Progress</a></span> <a href="src/Development-Shake-Progress.html#line-68" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Monoid.html#t:Monoid">Monoid</a> <a href="Development-Shake.html#t:Progress">Progress</a></span> <a href="src/Development-Shake-Progress.html#line-70" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:progressSimple" class="def">progressSimple</a> :: <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Development-Shake.html#t:Progress">Progress</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> () <a href="src/Development-Shake-Progress.html#progressSimple" class="link">Source</a></p><div class="doc"><p>A simple method for displaying progress messages, suitable for using as <code><a href="Development-Shake.html#v:shakeProgress">shakeProgress</a></code>.
   This function writes the current progress to the titlebar every five seconds using <code><a href="Development-Shake.html#v:progressTitlebar">progressTitlebar</a></code>,
   and calls any <code>shake-progress</code> program on the <code>$PATH</code> using <code><a href="Development-Shake.html#v:progressProgram">progressProgram</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:progressDisplay" class="def">progressDisplay</a> :: <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a> -&gt; (<a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Development-Shake.html#t:Progress">Progress</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> () <a href="src/Development-Shake-Progress.html#progressDisplay" class="link">Source</a></p><div class="doc"><p>Given a sampling interval (in seconds) and a way to display the status message,
   produce a function suitable for using as <code><a href="Development-Shake.html#v:shakeProgress">shakeProgress</a></code>.
   This function polls the progress information every <em>n</em> seconds, produces a status
   message and displays it using the display function.</p><p>Typical status messages will take the form of <code>1m25s (15%)</code>, indicating that the build
   is predicted to complete in 1 minute 25 seconds (85 seconds total), and 15% of the necessary build time has elapsed.
   This function uses past observations to predict future behaviour, and as such, is only
   guessing. The time is likely to go up as well as down, and will be less accurate from a
   clean build (as the system has fewer past observations).</p><p>The current implementation is to predict the time remaining (based on <code><a href="Development-Shake.html#v:timeTodo">timeTodo</a></code>) and the
   work already done (<code><a href="Development-Shake.html#v:timeBuilt">timeBuilt</a></code>). The percentage is then calculated as <code>remaining / (done + remaining)</code>,
   while time left is calculated by scaling <code>remaining</code> by the observed work rate in this build,
   roughly <code>done / time_elapsed</code>.</p></div></div><div class="top"><p class="src"><a name="v:progressTitlebar" class="def">progressTitlebar</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> () <a href="src/Development-Shake-Progress.html#progressTitlebar" class="link">Source</a></p><div class="doc"><p>Set the title of the current console window to the given text. If the
   environment variable <code>$TERM</code> is set to <code>xterm</code> this uses xterm escape sequences.
   On Windows, if not detected as an xterm, this function uses the <code>SetConsoleTitle</code> API.</p></div></div><div class="top"><p class="src"><a name="v:progressProgram" class="def">progressProgram</a> :: <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()) <a href="src/Development-Shake-Progress.html#progressProgram" class="link">Source</a></p><div class="doc"><p>Call the program <code>shake-progress</code> if it is on the <code>$PATH</code>. The program is called with
   the following arguments:</p><ul><li><code>--title=string</code> - the string passed to <code>progressProgram</code>.</li><li><code>--state=Normal</code>, or one of <code>NoProgress</code>, <code>Normal</code>, or <code>Error</code> to indicate
   what state the progress bar should be in.</li><li><code>--value=25</code> - the percent of the build that has completed, if not in <code>NoProgress</code> state.</li></ul><p>The program will not be called consecutively with the same <code>--state</code> and <code>--value</code> options.</p><p>Windows 7 or higher users can get taskbar progress notifications by placing the following
   program in their <code>$PATH</code>: <a href="https://github.com/ndmitchell/shake/releases">https://github.com/ndmitchell/shake/releases</a>.</p></div></div><div class="top"><p class="src"><a name="v:getProgress" class="def">getProgress</a> :: <a href="Development-Shake.html#t:Action">Action</a> <a href="Development-Shake.html#t:Progress">Progress</a> <a href="src/Development-Shake-Core.html#getProgress" class="link">Source</a></p><div class="doc"><p>Get the current <code><a href="Development-Shake.html#t:Progress">Progress</a></code> structure, as would be returned by <code><a href="Development-Shake.html#v:shakeProgress">shakeProgress</a></code>.</p></div></div><h2 id="g:5">Verbosity</h2><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Verbosity" class="def">Verbosity</a> <a href="src/Development-Shake-Types.html#Verbosity" class="link">Source</a></p><div class="doc"><p>The verbosity data type, used by <code><a href="Development-Shake.html#v:shakeVerbosity">shakeVerbosity</a></code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Silent" class="def">Silent</a></td><td class="doc"><p>Don't print any messages.</p></td></tr><tr><td class="src"><a name="v:Quiet" class="def">Quiet</a></td><td class="doc"><p>Only print essential messages, typically errors.</p></td></tr><tr><td class="src"><a name="v:Normal" class="def">Normal</a></td><td class="doc"><p>Print errors and <code># <em>command-name</em> (for <em>file-name</em>)</code> when running a <code><a href="Development-Shake.html#v:traced">traced</a></code> command.</p></td></tr><tr><td class="src"><a name="v:Loud" class="def">Loud</a></td><td class="doc"><p>Print errors and full command lines when running a <code><a href="Development-Shake.html#v:command">command</a></code> or <code><a href="Development-Shake.html#v:cmd">cmd</a></code> command.</p></td></tr><tr><td class="src"><a name="v:Chatty" class="def">Chatty</a></td><td class="doc"><p>Print errors, full command line and status messages when starting a rule.</p></td></tr><tr><td class="src"><a name="v:Diagnostic" class="def">Diagnostic</a></td><td class="doc"><p>Print messages for virtually everything (mostly for debugging).</p></td></tr></table></div><div class="subs instances"><p id="control.i:Verbosity" class="caption collapser" onclick="toggleSection('i:Verbosity')">Instances</p><div id="section.i:Verbosity" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Prelude.html#t:Bounded">Bounded</a> <a href="Development-Shake.html#t:Verbosity">Verbosity</a></span> <a href="src/Development-Shake-Types.html#line-241" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Prelude.html#t:Enum">Enum</a> <a href="Development-Shake.html#t:Verbosity">Verbosity</a></span> <a href="src/Development-Shake-Types.html#line-241" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake-Classes.html#t:Eq">Eq</a> <a href="Development-Shake.html#t:Verbosity">Verbosity</a></span> <a href="src/Development-Shake-Types.html#line-241" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Data.html#t:Data">Data</a> <a href="Development-Shake.html#t:Verbosity">Verbosity</a></span> <a href="src/Development-Shake-Types.html#line-241" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Ord.html#t:Ord">Ord</a> <a href="Development-Shake.html#t:Verbosity">Verbosity</a></span> <a href="src/Development-Shake-Types.html#line-241" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Text-Read.html#t:Read">Read</a> <a href="Development-Shake.html#t:Verbosity">Verbosity</a></span> <a href="src/Development-Shake-Types.html#line-241" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake-Classes.html#t:Show">Show</a> <a href="Development-Shake.html#t:Verbosity">Verbosity</a></span> <a href="src/Development-Shake-Types.html#line-241" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:getVerbosity" class="def">getVerbosity</a> :: <a href="Development-Shake.html#t:Action">Action</a> <a href="Development-Shake.html#t:Verbosity">Verbosity</a> <a href="src/Development-Shake-Core.html#getVerbosity" class="link">Source</a></p><div class="doc"><p>Get the current verbosity level, originally set by <code><a href="Development-Shake.html#v:shakeVerbosity">shakeVerbosity</a></code>. If you
   want to output information to the console, you are recommended to use
   <code><a href="Development-Shake.html#v:putLoud">putLoud</a></code> / <code><a href="Development-Shake.html#v:putNormal">putNormal</a></code> / <code><a href="Development-Shake.html#v:putQuiet">putQuiet</a></code>, which ensures multiple messages are
   not interleaved. The verbosity can be modified locally by <code><a href="Development-Shake.html#v:withVerbosity">withVerbosity</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:putLoud" class="def">putLoud</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> () <a href="src/Development-Shake-Core.html#putLoud" class="link">Source</a></p><div class="doc"><p>Write an unimportant message to the output, only shown when <code><a href="Development-Shake.html#v:shakeVerbosity">shakeVerbosity</a></code> is higher than normal (<code><a href="Development-Shake.html#v:Loud">Loud</a></code> or above).
   The output will not be interleaved with any other Shake messages (other than those generated by system commands).</p></div></div><div class="top"><p class="src"><a name="v:putNormal" class="def">putNormal</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> () <a href="src/Development-Shake-Core.html#putNormal" class="link">Source</a></p><div class="doc"><p>Write a normal priority message to the output, only supressed when <code><a href="Development-Shake.html#v:shakeVerbosity">shakeVerbosity</a></code> is <code><a href="Development-Shake.html#v:Quiet">Quiet</a></code> or <code><a href="Development-Shake.html#v:Silent">Silent</a></code>.
   The output will not be interleaved with any other Shake messages (other than those generated by system commands).</p></div></div><div class="top"><p class="src"><a name="v:putQuiet" class="def">putQuiet</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> () <a href="src/Development-Shake-Core.html#putQuiet" class="link">Source</a></p><div class="doc"><p>Write an important message to the output, only supressed when <code><a href="Development-Shake.html#v:shakeVerbosity">shakeVerbosity</a></code> is <code><a href="Development-Shake.html#v:Silent">Silent</a></code>.
   The output will not be interleaved with any other Shake messages (other than those generated by system commands).</p></div></div><div class="top"><p class="src"><a name="v:withVerbosity" class="def">withVerbosity</a> :: <a href="Development-Shake.html#t:Verbosity">Verbosity</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> a -&gt; <a href="Development-Shake.html#t:Action">Action</a> a <a href="src/Development-Shake-Core.html#withVerbosity" class="link">Source</a></p><div class="doc"><p>Run an action with a particular verbosity level.
   Will not update the <code><a href="Development-Shake.html#v:shakeVerbosity">shakeVerbosity</a></code> returned by <code><a href="Development-Shake.html#v:getShakeOptions">getShakeOptions</a></code> and will
   not have any impact on <code><a href="Development-Shake.html#v:Diagnostic">Diagnostic</a></code> tracing.</p></div></div><div class="top"><p class="src"><a name="v:quietly" class="def">quietly</a> :: <a href="Development-Shake.html#t:Action">Action</a> a -&gt; <a href="Development-Shake.html#t:Action">Action</a> a <a href="src/Development-Shake-Core.html#quietly" class="link">Source</a></p><div class="doc"><p>Run an action with <code><a href="Development-Shake.html#v:Quiet">Quiet</a></code> verbosity, in particular messages produced by <code><a href="Development-Shake.html#v:traced">traced</a></code>
   (including from <code><a href="Development-Shake.html#v:cmd">cmd</a></code> or <code><a href="Development-Shake.html#v:command">command</a></code>) will not be printed to the screen.
   Will not update the <code><a href="Development-Shake.html#v:shakeVerbosity">shakeVerbosity</a></code> returned by <code><a href="Development-Shake.html#v:getShakeOptions">getShakeOptions</a></code> and will
   not turn off any <code><a href="Development-Shake.html#v:Diagnostic">Diagnostic</a></code> tracing.</p></div></div><h1 id="g:6">Running commands</h1><div class="top"><p class="src"><a name="v:command" class="def">command</a> :: <a href="Development-Shake.html#t:CmdResult">CmdResult</a> r =&gt; [<a href="Development-Shake.html#t:CmdOption">CmdOption</a>] -&gt; <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; [<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> r <a href="src/Development-Shake-Command.html#command" class="link">Source</a></p><div class="doc"><p>Execute a system command. Before running <code><a href="Development-Shake.html#v:command">command</a></code> make sure you <code><a href="Development-Shake.html#v:need">need</a></code> any files
   that are used by the command.</p><p>This function takes a list of options (often just <code>[]</code>, see <code><a href="Development-Shake.html#t:CmdOption">CmdOption</a></code> for the available
   options), the name of the executable (either a full name, or a program on the <code>$PATH</code>) and
   a list of arguments. The result is often <code>()</code>, but can be a tuple containg any of <code><a href="Development-Shake.html#t:Stdout">Stdout</a></code>,
   <code><a href="Development-Shake.html#t:Stderr">Stderr</a></code> and <code><a href="Development-Shake.html#t:Exit">Exit</a></code>. Some examples:</p><pre><code><a href="Development-Shake.html#v:command_">command_</a></code> [] &quot;gcc&quot; [&quot;-c&quot;,&quot;myfile.c&quot;]                          -- compile a file, throwing an exception on failure
<code><a href="Development-Shake.html#t:Exit">Exit</a></code> c &lt;- <code><a href="Development-Shake.html#v:command">command</a></code> [] &quot;gcc&quot; [&quot;-c&quot;,myfile]                     -- run a command, recording the exit code
(<code><a href="Development-Shake.html#t:Exit">Exit</a></code> c, <code><a href="Development-Shake.html#t:Stderr">Stderr</a></code> err) &lt;- <code><a href="Development-Shake.html#v:command">command</a></code> [] &quot;gcc&quot; [&quot;-c&quot;,&quot;myfile.c&quot;]   -- run a command, recording the exit code and error output
<code><a href="Development-Shake.html#t:Stdout">Stdout</a></code> out &lt;- <code><a href="Development-Shake.html#v:command">command</a></code> [] &quot;gcc&quot; [&quot;-MM&quot;,&quot;myfile.c&quot;]            -- run a command, recording the output
<code><a href="Development-Shake.html#v:command_">command_</a></code> [<code><a href="Development-Shake.html#v:Cwd">Cwd</a></code> &quot;generated&quot;] &quot;gcc&quot; [&quot;-c&quot;,myfile]               -- run a command in a directory
</pre><p>Unless you retrieve the <code><a href="../base-4.8.2.0/System-Exit.html#t:ExitCode">ExitCode</a></code> using <code><a href="Development-Shake.html#t:Exit">Exit</a></code>, any <code><a href="../base-4.8.2.0/System-Exit.html#v:ExitFailure">ExitFailure</a></code> will throw an error, including
   the <code><a href="Development-Shake.html#t:Stderr">Stderr</a></code> in the exception message. If you capture the <code><a href="Development-Shake.html#t:Stdout">Stdout</a></code> or <code><a href="Development-Shake.html#t:Stderr">Stderr</a></code>, that stream will not be echoed to the console,
   unless you use the option <code><a href="Development-Shake.html#v:EchoStdout">EchoStdout</a></code> or <code><a href="Development-Shake.html#v:EchoStderr">EchoStderr</a></code>.</p><p>If you use <code><a href="Development-Shake.html#v:command">command</a></code> inside a <code>do</code> block and do not use the result, you may get a compile-time error about being
   unable to deduce <code><a href="Development-Shake.html#t:CmdResult">CmdResult</a></code>. To avoid this error, use <code><a href="Development-Shake.html#v:command_">command_</a></code>.</p><p>By default the <code>stderr</code> stream will be captured for use in error messages, and also echoed. To only echo
   pass <code><code><a href="Development-Shake.html#v:WithStderr">WithStderr</a></code> <code><a href="../base-4.8.2.0/Data-Bool.html#v:False">False</a></code></code>, which causes no streams to be captured by Shake, and certain programs (e.g. <code>gcc</code>)
   to detect they are running in a terminal.</p></div></div><div class="top"><p class="src"><a name="v:command_" class="def">command_</a> :: [<a href="Development-Shake.html#t:CmdOption">CmdOption</a>] -&gt; <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; [<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> () <a href="src/Development-Shake-Command.html#command_" class="link">Source</a></p><div class="doc"><p>A version of <code><a href="Development-Shake.html#v:command">command</a></code> where you do not require any results, used to avoid errors about being unable
   to deduce <code><a href="Development-Shake.html#t:CmdResult">CmdResult</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:cmd" class="def">cmd</a> :: <a href="Development-Shake-Command.html#t:CmdArguments">CmdArguments</a> args =&gt; args <a href="Development-Shake-Command.html#t::-45--62-">:-&gt;</a> <a href="Development-Shake.html#t:Action">Action</a> r <a href="src/Development-Shake-Command.html#cmd" class="link">Source</a></p><div class="doc"><p>Execute a system command. Before running <code><a href="Development-Shake.html#v:cmd">cmd</a></code> make sure you <code><a href="Development-Shake.html#v:need">need</a></code> any files
   that are used by the command.</p><ul><li><code>String</code> arguments are treated as whitespace separated arguments.</li><li><code>[String]</code> arguments are treated as literal arguments.</li><li><code><a href="Development-Shake.html#t:CmdOption">CmdOption</a></code> arguments are used as options.</li></ul><p>As some examples, here are some calls, and the resulting command string:</p><pre><code><a href="Development-Shake.html#v:unit">unit</a></code> $ <code><a href="Development-Shake.html#v:cmd">cmd</a></code> &quot;git log --pretty=&quot; &quot;oneline&quot;           -- git log --pretty= oneline
<code><a href="Development-Shake.html#v:unit">unit</a></code> $ <code><a href="Development-Shake.html#v:cmd">cmd</a></code> &quot;git log --pretty=&quot; [&quot;oneline&quot;]         -- git log --pretty= oneline
<code><a href="Development-Shake.html#v:unit">unit</a></code> $ <code><a href="Development-Shake.html#v:cmd">cmd</a></code> &quot;git log&quot; (&quot;--pretty=&quot; ++ &quot;oneline&quot;)    -- git log --pretty=oneline
<code><a href="Development-Shake.html#v:unit">unit</a></code> $ <code><a href="Development-Shake.html#v:cmd">cmd</a></code> &quot;git log&quot; (&quot;--pretty=&quot; ++ &quot;one line&quot;)   -- git log --pretty=one line
<code><a href="Development-Shake.html#v:unit">unit</a></code> $ <code><a href="Development-Shake.html#v:cmd">cmd</a></code> &quot;git log&quot; [&quot;--pretty=&quot; ++ &quot;one line&quot;]   -- git log &quot;--pretty=one line&quot;
</pre><p>More examples, including return values, see this translation of the examples given for the <code><a href="Development-Shake.html#v:command">command</a></code> function:</p><pre>() &lt;- <code><a href="Development-Shake.html#v:cmd">cmd</a></code> &quot;gcc -c myfile.c&quot;                                  -- compile a file, throwing an exception on failure
<code><a href="Development-Shake.html#v:unit">unit</a></code> $ <code><a href="Development-Shake.html#v:cmd">cmd</a></code> &quot;gcc -c myfile.c&quot;                                 -- alternative to () &lt;- binding.
<code><a href="Development-Shake.html#t:Exit">Exit</a></code> c &lt;- <code><a href="Development-Shake.html#v:cmd">cmd</a></code> &quot;gcc -c&quot; [myfile]                              -- run a command, recording the exit code
(<code><a href="Development-Shake.html#t:Exit">Exit</a></code> c, <code><a href="Development-Shake.html#t:Stderr">Stderr</a></code> err) &lt;- <code><a href="Development-Shake.html#v:cmd">cmd</a></code> &quot;gcc -c myfile.c&quot;                -- run a command, recording the exit code and error output
<code><a href="Development-Shake.html#t:Stdout">Stdout</a></code> out &lt;- <code><a href="Development-Shake.html#v:cmd">cmd</a></code> &quot;gcc -MM myfile.c&quot;                         -- run a command, recording the output
<code><a href="Development-Shake.html#v:cmd">cmd</a></code> (<code><a href="Development-Shake.html#v:Cwd">Cwd</a></code> &quot;generated&quot;) &quot;gcc -c&quot; [myfile] :: <code><a href="Development-Shake.html#t:Action">Action</a></code> ()         -- run a command in a directory
</pre><p>When passing file arguments we use <code>[myfile]</code> so that if the <code>myfile</code> variable contains spaces they are properly escaped.</p><p>If you use <code><a href="Development-Shake.html#v:cmd">cmd</a></code> inside a <code>do</code> block and do not use the result, you may get a compile-time error about being
   unable to deduce <code><a href="Development-Shake.html#t:CmdResult">CmdResult</a></code>. To avoid this error, bind the result to <code>()</code>, or include a type signature, or use
   the <code><a href="Development-Shake.html#v:unit">unit</a></code> function.</p><p>The <code><a href="Development-Shake.html#v:cmd">cmd</a></code> function can also be run in the <code><a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a></code> monad, but then <code><a href="Development-Shake.html#v:Traced">Traced</a></code> is ignored and command lines are not echoed.
   As an example:</p><pre><code><a href="Development-Shake.html#v:cmd">cmd</a></code> (<code><a href="Development-Shake.html#v:Cwd">Cwd</a></code> &quot;generated&quot;) <code><a href="Development-Shake.html#v:Shell">Shell</a></code> &quot;gcc -c myfile.c&quot; :: IO ()
</pre></div></div><div class="top"><p class="src"><a name="v:unit" class="def">unit</a> :: m () -&gt; m ()</p><div class="doc"><p>The identity function which requires the inner argument to be <code>()</code>. Useful for functions
   with overloaded return types.</p><pre>\(x :: Maybe ()) -&gt; unit x == x</pre></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:Stdout" class="def">Stdout</a> a <a href="src/Development-Shake-Command.html#Stdout" class="link">Source</a></p><div class="doc"><p>Collect the <code>stdout</code> of the process.
   If used, the <code>stdout</code> will not be echoed to the terminal, unless you include <code><a href="Development-Shake.html#v:EchoStdout">EchoStdout</a></code>.
   The value type may be either <code><a href="../base-4.8.2.0/Data-String.html#t:String">String</a></code>, or either lazy or strict <code>ByteString</code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Stdout" class="def">Stdout</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:fromStdout" class="def">fromStdout</a> :: a</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:Stdout" class="caption collapser" onclick="toggleSection('i:Stdout')">Instances</p><div id="section.i:Stdout" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake.html#t:CmdString">CmdString</a> a =&gt; <a href="Development-Shake.html#t:CmdResult">CmdResult</a> (<a href="Development-Shake.html#t:Stdout">Stdout</a> a)</span> <a href="src/Development-Shake-Command.html#line-445" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:Stderr" class="def">Stderr</a> a <a href="src/Development-Shake-Command.html#Stderr" class="link">Source</a></p><div class="doc"><p>Collect the <code>stderr</code> of the process.
   If used, the <code>stderr</code> will not be echoed to the terminal, unless you include <code><a href="Development-Shake.html#v:EchoStderr">EchoStderr</a></code>.
   The value type may be either <code><a href="../base-4.8.2.0/Data-String.html#t:String">String</a></code>, or either lazy or strict <code>ByteString</code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Stderr" class="def">Stderr</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:fromStderr" class="def">fromStderr</a> :: a</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:Stderr" class="caption collapser" onclick="toggleSection('i:Stderr')">Instances</p><div id="section.i:Stderr" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake.html#t:CmdString">CmdString</a> a =&gt; <a href="Development-Shake.html#t:CmdResult">CmdResult</a> (<a href="Development-Shake.html#t:Stderr">Stderr</a> a)</span> <a href="src/Development-Shake-Command.html#line-448" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:Stdouterr" class="def">Stdouterr</a> a <a href="src/Development-Shake-Command.html#Stdouterr" class="link">Source</a></p><div class="doc"><p>Collect the <code>stdout</code> and <code>stderr</code> of the process.
   If used, the <code>stderr</code> and <code>stdout</code> will not be echoed to the terminal, unless you include <code><a href="Development-Shake.html#v:EchoStdout">EchoStdout</a></code> and <code><a href="Development-Shake.html#v:EchoStderr">EchoStderr</a></code>.
   The value type may be either <code><a href="../base-4.8.2.0/Data-String.html#t:String">String</a></code>, or either lazy or strict <code>ByteString</code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Stdouterr" class="def">Stdouterr</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:fromStdouterr" class="def">fromStdouterr</a> :: a</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:Stdouterr" class="caption collapser" onclick="toggleSection('i:Stdouterr')">Instances</p><div id="section.i:Stdouterr" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake.html#t:CmdString">CmdString</a> a =&gt; <a href="Development-Shake.html#t:CmdResult">CmdResult</a> (<a href="Development-Shake.html#t:Stdouterr">Stdouterr</a> a)</span> <a href="src/Development-Shake-Command.html#line-451" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:Exit" class="def">Exit</a> <a href="src/Development-Shake-Command.html#Exit" class="link">Source</a></p><div class="doc"><p>Collect the <code><a href="../base-4.8.2.0/System-Exit.html#t:ExitCode">ExitCode</a></code> of the process.
   If you do not collect the exit code, any <code><a href="../base-4.8.2.0/System-Exit.html#v:ExitFailure">ExitFailure</a></code> will cause an exception.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Exit" class="def">Exit</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:fromExit" class="def">fromExit</a> :: <a href="../base-4.8.2.0/System-Exit.html#t:ExitCode">ExitCode</a></dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:Exit" class="caption collapser" onclick="toggleSection('i:Exit')">Instances</p><div id="section.i:Exit" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake.html#t:CmdResult">CmdResult</a> <a href="Development-Shake.html#t:Exit">Exit</a></span> <a href="src/Development-Shake-Command.html#line-427" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:CmdTime" class="def">CmdTime</a> <a href="src/Development-Shake-Command.html#CmdTime" class="link">Source</a></p><div class="doc"><p>Collect the time taken to execute the process. Can be used in conjunction with <code><a href="Development-Shake.html#t:CmdLine">CmdLine</a></code> to
   write helper functions that print out the time of a result.</p><pre>timer :: (<code><a href="Development-Shake.html#t:CmdResult">CmdResult</a></code> r, MonadIO m) =&gt; (forall r . <code><a href="Development-Shake.html#t:CmdResult">CmdResult</a></code> r =&gt; m r) -&gt; m r
timer act = do
    (<code><a href="Development-Shake.html#t:CmdTime">CmdTime</a></code> t, <code><a href="Development-Shake.html#t:CmdLine">CmdLine</a></code> x, r) &lt;- act
    liftIO $ putStrLn $ &quot;Command &quot; ++ x ++ &quot; took &quot; ++ show t ++ &quot; seconds&quot;
    return r

run :: IO ()
run = timer $ <code><a href="Development-Shake.html#v:cmd">cmd</a></code> &quot;ghc --version&quot;
</pre></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:CmdTime" class="def">CmdTime</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:fromCmdTime" class="def">fromCmdTime</a> :: <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:CmdTime" class="caption collapser" onclick="toggleSection('i:CmdTime')">Instances</p><div id="section.i:CmdTime" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake.html#t:CmdResult">CmdResult</a> <a href="Development-Shake.html#t:CmdTime">CmdTime</a></span> <a href="src/Development-Shake-Command.html#line-442" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:CmdLine" class="def">CmdLine</a> <a href="src/Development-Shake-Command.html#CmdLine" class="link">Source</a></p><div class="doc"><p>Collect the command line used for the process. This command line will be approximate -
   suitable for user diagnostics, but not for direct execution.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:CmdLine" class="def">CmdLine</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:fromCmdLine" class="def">fromCmdLine</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a></dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:CmdLine" class="caption collapser" onclick="toggleSection('i:CmdLine')">Instances</p><div id="section.i:CmdLine" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake.html#t:CmdResult">CmdResult</a> <a href="Development-Shake.html#t:CmdLine">CmdLine</a></span> <a href="src/Development-Shake-Command.html#line-439" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a name="t:CmdResult" class="def">CmdResult</a> a <a href="src/Development-Shake-Command.html#CmdResult" class="link">Source</a></p><div class="doc"><p>A class for specifying what results you want to collect from a process.
   Values are formed of <code><a href="Development-Shake.html#t:Stdout">Stdout</a></code>, <code><a href="Development-Shake.html#t:Stderr">Stderr</a></code>, <code><a href="Development-Shake.html#t:Exit">Exit</a></code> and tuples of those.</p></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src">cmdResult</p></div><div class="subs instances"><p id="control.i:CmdResult" class="caption collapser" onclick="toggleSection('i:CmdResult')">Instances</p><div id="section.i:CmdResult" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake.html#t:CmdResult">CmdResult</a> ()</span> <a href="src/Development-Shake-Command.html#line-454" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake.html#t:CmdResult">CmdResult</a> <a href="../base-4.8.2.0/System-Exit.html#t:ExitCode">ExitCode</a></span> <a href="src/Development-Shake-Command.html#line-430" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake.html#t:CmdResult">CmdResult</a> <a href="../process-1.2.3.0/System-Process.html#t:ProcessHandle">ProcessHandle</a></span> <a href="src/Development-Shake-Command.html#line-436" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake.html#t:CmdResult">CmdResult</a> <a href="Development-Shake.html#t:CmdLine">CmdLine</a></span> <a href="src/Development-Shake-Command.html#line-439" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake.html#t:CmdResult">CmdResult</a> <a href="Development-Shake.html#t:CmdTime">CmdTime</a></span> <a href="src/Development-Shake-Command.html#line-442" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake.html#t:CmdResult">CmdResult</a> <a href="Development-Shake-Command.html#t:Process">Process</a></span> <a href="src/Development-Shake-Command.html#line-433" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake.html#t:CmdResult">CmdResult</a> <a href="Development-Shake.html#t:Exit">Exit</a></span> <a href="src/Development-Shake-Command.html#line-427" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake.html#t:CmdString">CmdString</a> a =&gt; <a href="Development-Shake.html#t:CmdResult">CmdResult</a> (<a href="Development-Shake.html#t:Stdouterr">Stdouterr</a> a)</span> <a href="src/Development-Shake-Command.html#line-451" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake.html#t:CmdString">CmdString</a> a =&gt; <a href="Development-Shake.html#t:CmdResult">CmdResult</a> (<a href="Development-Shake.html#t:Stderr">Stderr</a> a)</span> <a href="src/Development-Shake-Command.html#line-448" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake.html#t:CmdString">CmdString</a> a =&gt; <a href="Development-Shake.html#t:CmdResult">CmdResult</a> (<a href="Development-Shake.html#t:Stdout">Stdout</a> a)</span> <a href="src/Development-Shake-Command.html#line-445" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="Development-Shake.html#t:CmdResult">CmdResult</a> x1, <a href="Development-Shake.html#t:CmdResult">CmdResult</a> x2) =&gt; <a href="Development-Shake.html#t:CmdResult">CmdResult</a> (x1, x2)</span> <a href="src/Development-Shake-Command.html#line-457" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="Development-Shake.html#t:CmdResult">CmdResult</a> x1, <a href="Development-Shake.html#t:CmdResult">CmdResult</a> x2, <a href="Development-Shake.html#t:CmdResult">CmdResult</a> x3) =&gt; <a href="Development-Shake.html#t:CmdResult">CmdResult</a> (x1, x2, x3)</span> <a href="src/Development-Shake-Command.html#line-465" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="Development-Shake.html#t:CmdResult">CmdResult</a> x1, <a href="Development-Shake.html#t:CmdResult">CmdResult</a> x2, <a href="Development-Shake.html#t:CmdResult">CmdResult</a> x3, <a href="Development-Shake.html#t:CmdResult">CmdResult</a> x4) =&gt; <a href="Development-Shake.html#t:CmdResult">CmdResult</a> (x1, x2, x3, x4)</span> <a href="src/Development-Shake-Command.html#line-468" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">(<a href="Development-Shake.html#t:CmdResult">CmdResult</a> x1, <a href="Development-Shake.html#t:CmdResult">CmdResult</a> x2, <a href="Development-Shake.html#t:CmdResult">CmdResult</a> x3, <a href="Development-Shake.html#t:CmdResult">CmdResult</a> x4, <a href="Development-Shake.html#t:CmdResult">CmdResult</a> x5) =&gt; <a href="Development-Shake.html#t:CmdResult">CmdResult</a> (x1, x2, x3, x4, x5)</span> <a href="src/Development-Shake-Command.html#line-471" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a name="t:CmdString" class="def">CmdString</a> a <a href="src/Development-Shake-Command.html#CmdString" class="link">Source</a></p><div class="doc"><p>The allowable <code><a href="../base-4.8.2.0/Data-String.html#t:String">String</a></code>-like values that can be captured.</p></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src">cmdString</p></div><div class="subs instances"><p id="control.i:CmdString" class="caption collapser" onclick="toggleSection('i:CmdString')">Instances</p><div id="section.i:CmdString" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake.html#t:CmdString">CmdString</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a></span> <a href="src/Development-Shake-Command.html#line-416" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake.html#t:CmdString">CmdString</a> ()</span> <a href="src/Development-Shake-Command.html#line-415" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake.html#t:CmdString">CmdString</a> <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></span> <a href="src/Development-Shake-Command.html#line-417" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake.html#t:CmdString">CmdString</a> <a href="../bytestring-0.10.6.0/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></span> <a href="src/Development-Shake-Command.html#line-418" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:CmdOption" class="def">CmdOption</a> <a href="src/Development-Shake-CmdOption.html#CmdOption" class="link">Source</a></p><div class="doc"><p>Options passed to <code>command</code> or <code>cmd</code> to control how processes are executed.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Cwd" class="def">Cwd</a> <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>Change the current directory in the spawned process. By default uses this processes current directory.</p></td></tr><tr><td class="src"><a name="v:Env" class="def">Env</a> [(<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>, <a href="../base-4.8.2.0/Data-String.html#t:String">String</a>)]</td><td class="doc"><p>Change the environment variables in the spawned process. By default uses this processes environment.</p></td></tr><tr><td class="src"><a name="v:AddEnv" class="def">AddEnv</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Add an environment variable in the child process.</p></td></tr><tr><td class="src"><a name="v:RemEnv" class="def">RemEnv</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Remove an environment variable from the child process.</p></td></tr><tr><td class="src"><a name="v:AddPath" class="def">AddPath</a> [<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>] [<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>]</td><td class="doc"><p>Add some items to the prefix and suffix of the <code>$PATH</code> variable.</p></td></tr><tr><td class="src"><a name="v:Stdin" class="def">Stdin</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Given as the <code>stdin</code> of the spawned process. By default the <code>stdin</code> is inherited.</p></td></tr><tr><td class="src"><a name="v:StdinBS" class="def">StdinBS</a> <a href="../bytestring-0.10.6.0/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></td><td class="doc"><p>Given as the <code>stdin</code> of the spawned process.</p></td></tr><tr><td class="src"><a name="v:FileStdin" class="def">FileStdin</a> <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>Take the <code>stdin</code> from a file.</p></td></tr><tr><td class="src"><a name="v:Shell" class="def">Shell</a></td><td class="doc"><p>Pass the command to the shell without escaping - any arguments will be joined with spaces. By default arguments are escaped properly.</p></td></tr><tr><td class="src"><a name="v:BinaryPipes" class="def">BinaryPipes</a></td><td class="doc"><p>Treat the <code>stdin</code>/<code>stdout</code>/<code>stderr</code> messages as binary. By default <code><a href="../base-4.8.2.0/Data-String.html#t:String">String</a></code> results use text encoding and <code>ByteString</code> results use binary encoding.</p></td></tr><tr><td class="src"><a name="v:Traced" class="def">Traced</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Name to use with <code>traced</code>, or <code>&quot;&quot;</code> for no tracing. By default traces using the name of the executable.</p></td></tr><tr><td class="src"><a name="v:Timeout" class="def">Timeout</a> <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></td><td class="doc"><p>Abort the computation after N seconds, will raise a failure exit code. Calls <code>interruptProcessGroupOf</code> and <code>terminateProcess</code>, but may sometimes fail to abort the process and not timeout.</p></td></tr><tr><td class="src"><a name="v:WithStdout" class="def">WithStdout</a> <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></td><td class="doc"><p>Should I include the <code>stdout</code> in the exception if the command fails? Defaults to <code><a href="../base-4.8.2.0/Data-Bool.html#v:False">False</a></code>.</p></td></tr><tr><td class="src"><a name="v:WithStderr" class="def">WithStderr</a> <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></td><td class="doc"><p>Should I include the <code>stderr</code> in the exception if the command fails? Defaults to <code><a href="../base-4.8.2.0/Data-Bool.html#v:True">True</a></code>.</p></td></tr><tr><td class="src"><a name="v:EchoStdout" class="def">EchoStdout</a> <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></td><td class="doc"><p>Should I echo the <code>stdout</code>? Defaults to <code><a href="../base-4.8.2.0/Data-Bool.html#v:True">True</a></code> unless a <code>Stdout</code> result is required or you use <code><a href="Development-Shake.html#v:FileStdout">FileStdout</a></code>.</p></td></tr><tr><td class="src"><a name="v:EchoStderr" class="def">EchoStderr</a> <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></td><td class="doc"><p>Should I echo the <code>stderr</code>? Defaults to <code><a href="../base-4.8.2.0/Data-Bool.html#v:True">True</a></code> unless a <code>Stderr</code> result is required or you use <code><a href="Development-Shake.html#v:FileStderr">FileStderr</a></code>.</p></td></tr><tr><td class="src"><a name="v:FileStdout" class="def">FileStdout</a> <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>Should I put the <code>stdout</code> to a file.</p></td></tr><tr><td class="src"><a name="v:FileStderr" class="def">FileStderr</a> <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a></td><td class="doc"><p>Should I put the <code>stderr</code> to a file.</p></td></tr><tr><td class="src"><a name="v:AutoDeps" class="def">AutoDeps</a></td><td class="doc"><p>Compute dependencies automatically.</p></td></tr></table></div><div class="subs instances"><p id="control.i:CmdOption" class="caption collapser" onclick="toggleSection('i:CmdOption')">Instances</p><div id="section.i:CmdOption" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake-Classes.html#t:Eq">Eq</a> <a href="Development-Shake.html#t:CmdOption">CmdOption</a></span> <a href="src/Development-Shake-CmdOption.html#line-28" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Data.html#t:Data">Data</a> <a href="Development-Shake.html#t:CmdOption">CmdOption</a></span> <a href="src/Development-Shake-CmdOption.html#line-28" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Ord.html#t:Ord">Ord</a> <a href="Development-Shake.html#t:CmdOption">CmdOption</a></span> <a href="src/Development-Shake-CmdOption.html#line-28" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake-Classes.html#t:Show">Show</a> <a href="Development-Shake.html#t:CmdOption">CmdOption</a></span> <a href="src/Development-Shake-CmdOption.html#line-28" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake-Command.html#t:CmdArguments">CmdArguments</a> [<a href="../base-4.8.2.0/Data-Either.html#t:Either">Either</a> <a href="Development-Shake.html#t:CmdOption">CmdOption</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a>]</span> <a href="src/Development-Shake-Command.html#line-577" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:addPath" class="def">addPath</a> :: <a href="../transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; [<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>] -&gt; [<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>] -&gt; m <a href="Development-Shake.html#t:CmdOption">CmdOption</a> <a href="src/Development-Shake-Command.html#addPath" class="link">Source</a></p><div class="doc"><p><em>Deprecated:</em> Use <code><a href="Development-Shake.html#v:AddPath">AddPath</a></code>. This function will be removed in a future version.</p><p>Add a prefix and suffix to the <code>$PATH</code> environment variable. For example:</p><pre>opt &lt;- <code><a href="Development-Shake.html#v:addPath">addPath</a></code> [&quot;/usr/special&quot;] []
<code><a href="Development-Shake.html#v:cmd">cmd</a></code> opt &quot;userbinary --version&quot;
</pre><p>Would prepend <code>/usr/special</code> to the current <code>$PATH</code>, and the command would pick
   <code>/usr/special/userbinary</code>, if it exists. To add other variables see <code><a href="Development-Shake.html#v:addEnv">addEnv</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:addEnv" class="def">addEnv</a> :: <a href="../transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; [(<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>, <a href="../base-4.8.2.0/Data-String.html#t:String">String</a>)] -&gt; m <a href="Development-Shake.html#t:CmdOption">CmdOption</a> <a href="src/Development-Shake-Command.html#addEnv" class="link">Source</a></p><div class="doc"><p><em>Deprecated:</em> Use <code><a href="Development-Shake.html#v:AddEnv">AddEnv</a></code>. This function will be removed in a future version.</p><p>Add a single variable to the environment. For example:</p><pre>opt &lt;- <code><a href="Development-Shake.html#v:addEnv">addEnv</a></code> [(&quot;CFLAGS&quot;,&quot;-O2&quot;)]
<code><a href="Development-Shake.html#v:cmd">cmd</a></code> opt &quot;gcc -c main.c&quot;
</pre><p>Would add the environment variable <code>$CFLAGS</code> with value <code>-O2</code>. If the variable <code>$CFLAGS</code>
   was already defined it would be overwritten. If you wish to modify <code>$PATH</code> see <code><a href="Development-Shake.html#v:addPath">addPath</a></code>.</p></div></div><h1 id="g:7">Explicit parallelism</h1><div class="top"><p class="src"><a name="v:parallel" class="def">parallel</a> :: [<a href="Development-Shake.html#t:Action">Action</a> a] -&gt; <a href="Development-Shake.html#t:Action">Action</a> [a] <a href="src/Development-Shake-Core.html#parallel" class="link">Source</a></p><div class="doc"><p>Execute a list of actions in parallel. In most cases <code>need</code> will be more appropriate to benefit from parallelism.</p></div></div><div class="top"><p class="src"><a name="v:forP" class="def">forP</a> :: [a] -&gt; (a -&gt; <a href="Development-Shake.html#t:Action">Action</a> b) -&gt; <a href="Development-Shake.html#t:Action">Action</a> [b] <a href="src/Development-Shake-Derived.html#forP" class="link">Source</a></p><div class="doc"><p>A <code><a href="Development-Shake.html#v:parallel">parallel</a></code> version of <code><a href="../base-4.8.2.0/Data-Traversable.html#v:forM">forM</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:par" class="def">par</a> :: <a href="Development-Shake.html#t:Action">Action</a> a -&gt; <a href="Development-Shake.html#t:Action">Action</a> b -&gt; <a href="Development-Shake.html#t:Action">Action</a> (a, b) <a href="src/Development-Shake-Derived.html#par" class="link">Source</a></p><div class="doc"><p>Execute two operations in parallel, based on <code><a href="Development-Shake.html#v:parallel">parallel</a></code>.</p></div></div><h1 id="g:8">Utility functions</h1><div class="top"><p class="src"><a name="v:copyFile-39-" class="def">copyFile'</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> () <a href="src/Development-Shake-Derived.html#copyFile%27" class="link">Source</a></p><div class="doc"><p><code>copyFile' old new</code> copies the existing file from <code>old</code> to <code>new</code>.
   The <code>old</code> file will be tracked as a dependency.</p></div></div><div class="top"><p class="src"><a name="v:copyFileChanged" class="def">copyFileChanged</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> () <a href="src/Development-Shake-Derived.html#copyFileChanged" class="link">Source</a></p><div class="doc"><p><code>copyFileChanged old new</code> copies the existing file from <code>old</code> to <code>new</code>, if the contents have changed.
   The <code>old</code> file will be tracked as a dependency.</p></div></div><div class="top"><p class="src"><a name="v:readFile-39-" class="def">readFile'</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> <a href="src/Development-Shake-Derived.html#readFile%27" class="link">Source</a></p><div class="doc"><p>Read a file, after calling <code><a href="Development-Shake.html#v:need">need</a></code>. The argument file will be tracked as a dependency.</p></div></div><div class="top"><p class="src"><a name="v:readFileLines" class="def">readFileLines</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> [<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>] <a href="src/Development-Shake-Derived.html#readFileLines" class="link">Source</a></p><div class="doc"><p>A version of <code><a href="Development-Shake.html#v:readFile-39-">readFile'</a></code> which also splits the result into lines.
   The argument file will be tracked as a dependency.</p></div></div><div class="top"><p class="src"><a name="v:writeFile-39-" class="def">writeFile'</a> :: <a href="../transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; m () <a href="src/Development-Shake-Derived.html#writeFile%27" class="link">Source</a></p><div class="doc"><p>Write a file, lifted to the <code><a href="Development-Shake.html#t:Action">Action</a></code> monad.</p></div></div><div class="top"><p class="src"><a name="v:writeFileLines" class="def">writeFileLines</a> :: <a href="../transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; [<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>] -&gt; m () <a href="src/Development-Shake-Derived.html#writeFileLines" class="link">Source</a></p><div class="doc"><p>A version of <code><a href="Development-Shake.html#v:writeFile-39-">writeFile'</a></code> which writes out a list of lines.</p></div></div><div class="top"><p class="src"><a name="v:writeFileChanged" class="def">writeFileChanged</a> :: <a href="../transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; m () <a href="src/Development-Shake-Derived.html#writeFileChanged" class="link">Source</a></p><div class="doc"><p>Write a file, but only if the contents would change.</p></div></div><div class="top"><p class="src"><a name="v:removeFiles" class="def">removeFiles</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; [<a href="Development-Shake.html#t:FilePattern">FilePattern</a>] -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> () <a href="src/Development-Shake-Rules-Directory.html#removeFiles" class="link">Source</a></p><div class="doc"><p>Remove all files and directories that match any of the patterns within a directory.
   Some examples:</p><pre><code><a href="Development-Shake.html#v:removeFiles">removeFiles</a></code> &quot;output&quot; [&quot;//*&quot;]        -- delete everything inside 'output'
<code><a href="Development-Shake.html#v:removeFiles">removeFiles</a></code> &quot;output&quot; [&quot;//&quot;]         -- delete 'output' itself
<code><a href="Development-Shake.html#v:removeFiles">removeFiles</a></code> &quot;.&quot; [&quot;//*.hi&quot;,&quot;//*.o&quot;] -- delete all '.hi' and '.o' files
</pre><p>If the argument directory is missing no error is raised.
   This function will follow symlinks, so should be used with care.</p><p>This function is often useful when writing a <code>clean</code> action for your build system,
   often as a <code>phony</code> rule.</p></div></div><div class="top"><p class="src"><a name="v:removeFilesAfter" class="def">removeFilesAfter</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; [<a href="Development-Shake.html#t:FilePattern">FilePattern</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> () <a href="src/Development-Shake-Rules-Directory.html#removeFilesAfter" class="link">Source</a></p><div class="doc"><p>Remove files, like <code><a href="Development-Shake.html#v:removeFiles">removeFiles</a></code>, but executed after the build completes successfully.
   Useful for implementing <code>clean</code> actions that delete files Shake may have open for building.</p></div></div><div class="top"><p class="src"><a name="v:withTempFile" class="def">withTempFile</a> :: (<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> a) -&gt; <a href="Development-Shake.html#t:Action">Action</a> a <a href="src/Development-Shake-Derived.html#withTempFile" class="link">Source</a></p><div class="doc"><p>Create a temporary file in the temporary directory. The file will be deleted
   after the action completes (provided the file is not still open).
   The <code><a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a></code> will not have any file extension, will exist, and will be zero bytes long.
   If you require a file with a specific name, use <code><a href="Development-Shake.html#v:withTempDir">withTempDir</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:withTempDir" class="def">withTempDir</a> :: (<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> a) -&gt; <a href="Development-Shake.html#t:Action">Action</a> a <a href="src/Development-Shake-Derived.html#withTempDir" class="link">Source</a></p><div class="doc"><p>Create a temporary directory inside the system temporary directory.
   The directory will be deleted after the action completes.</p></div></div><h1 id="g:9">File rules</h1><div class="top"><p class="src"><a name="v:need" class="def">need</a> :: [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> () <a href="src/Development-Shake-Rules-File.html#need" class="link">Source</a></p><div class="doc"><p>Add a dependency on the file arguments, ensuring they are built before continuing.
   The file arguments may be built in parallel, in any order. This function is particularly
   necessary when calling <code><a href="Development-Shake.html#v:cmd">cmd</a></code> or <code><a href="Development-Shake.html#v:command">command</a></code>. As an example:</p><pre>&quot;//*.rot13&quot; <code><a href="Development-Shake.html#v:-37--62-">%&gt;</a></code> \out -&gt; do
    let src = <code><a href="Development-Shake-FilePath.html#v:dropExtension">dropExtension</a></code> out
    <code><a href="Development-Shake.html#v:need">need</a></code> [src]
    <code><a href="Development-Shake.html#v:cmd">cmd</a></code> &quot;rot13&quot; [src] &quot;-o&quot; [out]
</pre><p>Usually <code>need [foo,bar]</code> is preferable to <code>need [foo] &gt;&gt; need [bar]</code> as the former allows greater
   parallelism, while the latter requires <code>foo</code> to finish building before starting to build <code>bar</code>.</p><p>This function should not be called with wildcards (e.g. <code>*.txt</code> - use <code>getDirectoryFiles</code> to expand them),
   environment variables (e.g. <code>$HOME</code> - use <code>getEnv</code> to expand them) or directories (directories cannot be
   tracked directly - track files within the directory instead).</p></div></div><div class="top"><p class="src"><a name="v:want" class="def">want</a> :: [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>] -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> () <a href="src/Development-Shake-Rules-File.html#want" class="link">Source</a></p><div class="doc"><p>Require that the argument files are built by the rules, used to specify the target.</p><pre>main = <code><a href="Development-Shake.html#v:shake">shake</a></code> <code><a href="Development-Shake.html#v:shakeOptions">shakeOptions</a></code> $ do
   <code><a href="Development-Shake.html#v:want">want</a></code> [&quot;Main.exe&quot;]
   ...
</pre><p>This program will build <code>Main.exe</code>, given sufficient rules. All arguments to all <code><a href="Development-Shake.html#v:want">want</a></code> calls
   may be built in parallel, in any order.</p><p>This function is defined in terms of <code><a href="Development-Shake.html#v:action">action</a></code> and <code><a href="Development-Shake.html#v:need">need</a></code>, use <code><a href="Development-Shake.html#v:action">action</a></code> if you need more complex
   targets than <code><a href="Development-Shake.html#v:want">want</a></code> allows.</p></div></div><div class="top"><p class="src"><a name="v:-37--62-" class="def">(%&gt;)</a> :: <a href="Development-Shake.html#t:FilePattern">FilePattern</a> -&gt; (<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()) -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> () <span class="fixity">infix 1</span><span class="rightedge"></span> <a href="src/Development-Shake-Rules-File.html#%25%3E" class="link">Source</a></p><div class="doc"><p>Define a rule that matches a <code><a href="Development-Shake.html#t:FilePattern">FilePattern</a></code>, see <code><a href="Development-Shake.html#v:-63--61--61-">?==</a></code> for the pattern rules.
   Patterns with no wildcards have higher priority than those with wildcards, and no file
   required by the system may be matched by more than one pattern at the same priority
   (see <code><a href="Development-Shake.html#v:priority">priority</a></code> and <code><a href="Development-Shake.html#v:alternatives">alternatives</a></code> to modify this behaviour).
   This function will create the directory for the result file, if necessary.</p><pre>&quot;*.asm.o&quot; <code><a href="Development-Shake.html#v:-37--62-">%&gt;</a></code> \out -&gt; do
    let src = <code><a href="Development-Shake-FilePath.html#v:dropExtension">dropExtension</a></code> out
    <code><a href="Development-Shake.html#v:need">need</a></code> [src]
    <code><a href="Development-Shake.html#v:cmd">cmd</a></code> &quot;as&quot; [src] &quot;-o&quot; [out]
</pre><p>To define a build system for multiple compiled languages, we recommend using <code>.asm.o</code>,
   <code>.cpp.o</code>, <code>.hs.o</code>, to indicate which language produces an object file.
   I.e., the file <code>foo.cpp</code> produces object file <code>foo.cpp.o</code>.</p><p>Note that matching is case-sensitive, even on Windows.</p><p>If the <code><a href="Development-Shake.html#t:Action">Action</a></code> completes successfully the file is considered up-to-date, even if the file
   has not changed.</p></div></div><div class="top"><p class="src"><a name="v:-124--37--62-" class="def">(|%&gt;)</a> :: [<a href="Development-Shake.html#t:FilePattern">FilePattern</a>] -&gt; (<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()) -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> () <span class="fixity">infix 1</span><span class="rightedge"></span> <a href="src/Development-Shake-Rules-File.html#%7C%25%3E" class="link">Source</a></p><div class="doc"><p>Define a set of patterns, and if any of them match, run the associated rule. Defined in terms of <code><a href="Development-Shake.html#v:-37--62-">%&gt;</a></code>.
   Think of it as the OR (<code>||</code>) equivalent of <code><a href="Development-Shake.html#v:-37--62-">%&gt;</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:-63--62-" class="def">(?&gt;)</a> :: (<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a>) -&gt; (<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()) -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> () <span class="fixity">infix 1</span><span class="rightedge"></span> <a href="src/Development-Shake-Rules-File.html#%3F%3E" class="link">Source</a></p><div class="doc"><p>Define a rule to build files. If the first argument returns <code><a href="../base-4.8.2.0/Data-Bool.html#v:True">True</a></code> for a given file,
   the second argument will be used to build it. Usually <code><a href="Development-Shake.html#v:-37--62-">%&gt;</a></code> is sufficient, but <code><a href="Development-Shake.html#v:-63--62-">?&gt;</a></code> gives
   additional power. For any file used by the build system, only one rule should return <code><a href="../base-4.8.2.0/Data-Bool.html#v:True">True</a></code>.
   This function will create the directory for the result file, if necessary.</p><pre>(all isUpper . <code><a href="Development-Shake-FilePath.html#v:takeBaseName">takeBaseName</a></code>) <code><a href="Development-Shake.html#v:-63--62-">?&gt;</a></code> \out -&gt; do
    let src = <code><a href="Development-Shake-FilePath.html#v:replaceBaseName">replaceBaseName</a></code> out $ map toLower $ takeBaseName out
    <code><a href="Development-Shake.html#v:writeFile-39-">writeFile'</a></code> out . map toUpper =&lt;&lt; <code><a href="Development-Shake.html#v:readFile-39-">readFile'</a></code> src
</pre><p>If the <code><a href="Development-Shake.html#t:Action">Action</a></code> completes successfully the file is considered up-to-date, even if the file
   has not changed.</p></div></div><div class="top"><p class="src"><a name="v:phony" class="def">phony</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> () -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> () <a href="src/Development-Shake-Rules-File.html#phony" class="link">Source</a></p><div class="doc"><p>Declare a Make-style phony action.  A phony target does not name
   a file (despite living in the same namespace as file rules);
   rather, it names some action to be executed when explicitly
   requested.  You can demand <code><a href="Development-Shake.html#v:phony">phony</a></code> rules using <code><a href="Development-Shake.html#v:want">want</a></code>. (And <code><a href="Development-Shake.html#v:need">need</a></code>,
   although that's not recommended.)</p><p>Phony actions are intended to define recipes that can be executed
   by the user. If you <code><a href="Development-Shake.html#v:need">need</a></code> a phony action in a rule then every
   execution where that rule is required will rerun both the rule and
   the phony action.  However, note that phony actions are never
   executed more than once in a single build run.</p><p>In make, the <code>.PHONY</code> attribute on non-file-producing rules has a
   similar effect.  However, while in make it is acceptable to omit
   the <code>.PHONY</code> attribute as long as you don't create the file in
   question, a Shake rule which behaves this way will fail lint.
   Use a phony rule!  For file-producing rules which should be
   rerun every execution of Shake, see <code><a href="Development-Shake.html#v:alwaysRerun">alwaysRerun</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:-126--62-" class="def">(~&gt;)</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> () -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> () <span class="fixity">infix 1</span><span class="rightedge"></span> <a href="src/Development-Shake-Rules-File.html#~%3E" class="link">Source</a></p><div class="doc"><p>Infix operator alias for <code><a href="Development-Shake.html#v:phony">phony</a></code>, for sake of consistency with normal
   rules.</p></div></div><div class="top"><p class="src"><a name="v:phonys" class="def">phonys</a> :: (<a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="Development-Shake.html#t:Action">Action</a> ())) -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> () <a href="src/Development-Shake-Rules-File.html#phonys" class="link">Source</a></p><div class="doc"><p>A predicate version of <code><a href="Development-Shake.html#v:phony">phony</a></code>, return <code><a href="../base-4.8.2.0/Data-Maybe.html#v:Just">Just</a></code> with the <code><a href="Development-Shake.html#t:Action">Action</a></code> for the matching rules.</p></div></div><div class="top"><p class="src"><a name="v:-38--37--62-" class="def">(&amp;%&gt;)</a> :: [<a href="Development-Shake.html#t:FilePattern">FilePattern</a>] -&gt; ([<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()) -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> () <span class="fixity">infix 1</span><span class="rightedge"></span> <a href="src/Development-Shake-Rules-Files.html#%26%25%3E" class="link">Source</a></p><div class="doc"><p>Define a rule for building multiple files at the same time.
   Think of it as the AND (<code>&amp;&amp;</code>) equivalent of <code><a href="Development-Shake.html#v:-37--62-">%&gt;</a></code>.
   As an example, a single invocation of GHC produces both <code>.hi</code> and <code>.o</code> files:</p><pre>[&quot;*.o&quot;,&quot;*.hi&quot;] <code><a href="Development-Shake.html#v:-38--37--62-">&amp;%&gt;</a></code> \[o,hi] -&gt; do
    let hs = o <code><a href="../filepath-1.4.0.0/System-FilePath-Posix.html#v:-45--60-.-62-">-&lt;.&gt;</a></code> &quot;hs&quot;
    <code><a href="Development-Shake.html#v:need">need</a></code> ... -- all files the .hs import
    <code><a href="Development-Shake.html#v:cmd">cmd</a></code> &quot;ghc -c&quot; [hs]
</pre><p>However, in practice, it's usually easier to define rules with <code><a href="Development-Shake.html#v:-37--62-">%&gt;</a></code> and make the <code>.hi</code> depend
   on the <code>.o</code>. When defining rules that build multiple files, all the <code><a href="Development-Shake.html#t:FilePattern">FilePattern</a></code> values must
   have the same sequence of <code>//</code> and <code>*</code> wildcards in the same order.
   This function will create directories for the result files, if necessary.</p></div></div><div class="top"><p class="src"><a name="v:-38--63--62-" class="def">(&amp;?&gt;)</a> :: (<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>]) -&gt; ([<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()) -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> () <span class="fixity">infix 1</span><span class="rightedge"></span> <a href="src/Development-Shake-Rules-Files.html#%26%3F%3E" class="link">Source</a></p><div class="doc"><p>Define a rule for building multiple files at the same time, a more powerful
   and more dangerous version of <code><a href="Development-Shake.html#v:-38--37--62-">&amp;%&gt;</a></code>. Think of it as the AND (<code>&amp;&amp;</code>) equivalent of <code><a href="Development-Shake.html#v:-63--62-">?&gt;</a></code>.</p><p>Given an application <code>test &amp;?&gt; ...</code>, <code>test</code> should return <code>Just</code> if the rule applies, and should
   return the list of files that will be produced. This list <em>must</em> include the file passed as an argument and should
   obey the invariant:</p><pre>forAll $ \x ys -&gt; test x == Just ys ==&gt; x `elem` ys &amp;&amp; all ((== Just ys) . test) ys</pre><p>As an example of a function satisfying the invariaint:</p><pre>test x | <code><a href="../filepath-1.4.0.0/System-FilePath-Posix.html#v:takeExtension">takeExtension</a></code> x `elem` [&quot;.hi&quot;,&quot;.o&quot;]
       = Just [<code><a href="../filepath-1.4.0.0/System-FilePath-Posix.html#v:dropExtension">dropExtension</a></code> x <code><a href="../filepath-1.4.0.0/System-FilePath-Posix.html#v:-60-.-62-">&lt;.&gt;</a></code> &quot;hi&quot;, <code><a href="../filepath-1.4.0.0/System-FilePath-Posix.html#v:dropExtension">dropExtension</a></code> x <code><a href="../filepath-1.4.0.0/System-FilePath-Posix.html#v:-60-.-62-">&lt;.&gt;</a></code> &quot;o&quot;]
test _ = Nothing
</pre><p>Regardless of whether <code>Foo.hi</code> or <code>Foo.o</code> is passed, the function always returns <code>[Foo.hi, Foo.o]</code>.</p></div></div><div class="top"><p class="src"><a name="v:orderOnly" class="def">orderOnly</a> :: [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> () <a href="src/Development-Shake-Rules-OrderOnly.html#orderOnly" class="link">Source</a></p><div class="doc"><p>Define order-only dependencies, these are dependencies that will always
   be built before continuing, but which aren't dependencies of this action.
   Mostly useful for defining generated dependencies you think might be real dependencies.
   If they turn out to be real dependencies, you should add an explicit dependency afterwards.</p><pre>&quot;source.o&quot; %&gt; \out -&gt; do
    <code><a href="Development-Shake.html#v:orderOnly">orderOnly</a></code> [&quot;header.h&quot;]
    () &lt;- <code>cmd</code> &quot;gcc -c source.c -o source.o -MMD -MF source.m&quot;
    <code>neededMakefileDependencies</code> &quot;source.m&quot;
</pre><p>If <code>header.h</code> is included by <code>source.c</code> then the call to <code>needMakefileDependencies</code> will cause
   it to be added as a real dependency. If it isn't, then the rule won't rebuild if it changes.</p></div></div><div class="top"><p class="src"><a name="v:orderOnlyAction" class="def">orderOnlyAction</a> :: <a href="Development-Shake.html#t:Action">Action</a> a -&gt; <a href="Development-Shake.html#t:Action">Action</a> a <a href="src/Development-Shake-Core.html#orderOnlyAction" class="link">Source</a></p><div class="doc"><p>Run an action but do not depend on anything the action uses.
   A more general version of <code>orderOnly</code>.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:FilePattern" class="def">FilePattern</a> = <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> <a href="src/Development-Shake-FilePattern.html#FilePattern" class="link">Source</a></p><div class="doc"><p>A type synonym for file patterns, containing <code>//</code> and <code>*</code>. For the syntax
   and semantics of <code><a href="Development-Shake.html#t:FilePattern">FilePattern</a></code> see <code><a href="Development-Shake.html#v:-63--61--61-">?==</a></code>.</p><p>Most <code>normaliseEx</code>d <code><a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a></code> values are suitable as <code><a href="Development-Shake.html#t:FilePattern">FilePattern</a></code> values which match
   only that specific file. On Windows <code>\</code> is treated as equivalent to <code>/</code>.</p><p>You can write <code><a href="Development-Shake.html#t:FilePattern">FilePattern</a></code> values as a literal string, or build them
   up using the operators <code><a href="Development-Shake-FilePath.html#v:-60-.-62-">&lt;.&gt;</a></code>, <code><a href="Development-Shake-FilePath.html#v:-60--47--62-">&lt;/&gt;</a></code>
   and <code><a href="Development-Shake.html#v:-60--47--47--62-">&lt;//&gt;</a></code>. However, beware that:</p><ul><li>On Windows, use <code><a href="Development-Shake-FilePath.html#v:-60-.-62-">&lt;.&gt;</a></code> from <a href="Development-Shake-FilePath.html">Development.Shake.FilePath</a> instead of from
   <a href="../filepath-1.4.0.0/System-FilePath.html">System.FilePath</a> - otherwise <code>&quot;//*&quot; &lt;.&gt; exe</code> results in <code>&quot;//*\\.exe&quot;</code>.</li><li>If the second argument of <code><a href="Development-Shake-FilePath.html#v:-60--47--62-">&lt;/&gt;</a></code> has a leading path separator (namely <code>/</code>)
   then the second argument will be returned.</li></ul></div></div><div class="top"><p class="src"><a name="v:-63--61--61-" class="def">(?==)</a> :: <a href="Development-Shake.html#t:FilePattern">FilePattern</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/Development-Shake-FilePattern.html#%3F%3D%3D" class="link">Source</a></p><div class="doc"><p>Match a <code><a href="Development-Shake.html#t:FilePattern">FilePattern</a></code> against a <code><a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a></code>, There are three special forms:</p><ul><li><code>*</code> matches an entire path component, excluding any separators.</li><li><code>//</code> matches an arbitrary number of path components, including absolute path
   prefixes.</li><li><code>**</code> as a path component matches an arbitrary number of path components, but not
   absolute path prefixes.
   Currently considered experimental.</li></ul><p>Some examples:</p><ul><li><code>test.c</code> matches <code>test.c</code> and nothing else.</li><li><code>*.c</code> matches all <code>.c</code> files in the current directory, so <code>file.c</code> matches,
   but <code>file.h</code> and <code>dir/file.c</code> don't.</li><li><code>//*.c</code> matches all <code>.c</code> files anywhere on the filesystem,
   so <code>file.c</code>, <code>dir/file.c</code>, <code>dir1/dir2/file.c</code> and <code>/path/to/file.c</code> all match,
   but <code>file.h</code> and <code>dir/file.h</code> don't.</li><li><code>dir/*/*</code> matches all files one level below <code>dir</code>, so <code>dir/one/file.c</code> and
   <code>dir/two/file.h</code> match, but <code>file.c</code>, <code>one/dir/file.c</code>, <code>dir/file.h</code>
   and <code>dir/one/two/file.c</code> don't.</li></ul><p>Patterns with constructs such as <code>foo/../bar</code> will never match
   normalised <code><a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a></code> values, so are unlikely to be correct.</p></div></div><div class="top"><p class="src"><a name="v:-60--47--47--62-" class="def">(&lt;//&gt;)</a> :: <a href="Development-Shake.html#t:FilePattern">FilePattern</a> -&gt; <a href="Development-Shake.html#t:FilePattern">FilePattern</a> -&gt; <a href="Development-Shake.html#t:FilePattern">FilePattern</a> <span class="fixity">infixr 5</span><span class="rightedge"></span> <a href="src/Development-Shake-FilePattern.html#%3C%2F%2F%3E" class="link">Source</a></p><div class="doc"><p>Join two <code><a href="Development-Shake.html#t:FilePattern">FilePattern</a></code> values by inserting two <code>/</code> characters between them.
   Will first remove any trailing path separators on the first argument, and any leading
   separators on the second.</p><pre>&quot;dir&quot; &lt;//&gt; &quot;*&quot; == &quot;dir//*&quot;</pre></div></div><div class="top"><p class="src"><a name="v:needed" class="def">needed</a> :: [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> () <a href="src/Development-Shake-Rules-File.html#needed" class="link">Source</a></p><div class="doc"><p>Like <code><a href="Development-Shake.html#v:need">need</a></code>, but if <code><a href="Development-Shake.html#v:shakeLint">shakeLint</a></code> is set, check that the file does not rebuild.
   Used for adding dependencies on files that have already been used in this rule.</p></div></div><div class="top"><p class="src"><a name="v:trackRead" class="def">trackRead</a> :: [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> () <a href="src/Development-Shake-Rules-File.html#trackRead" class="link">Source</a></p><div class="doc"><p>Track that a file was read by the action preceeding it. If <code><a href="Development-Shake.html#v:shakeLint">shakeLint</a></code> is activated
   then these files must be dependencies of this rule. Calls to <code><a href="Development-Shake.html#v:trackRead">trackRead</a></code> are
   automatically inserted in <code><a href="Development-Shake.html#v:LintFSATrace">LintFSATrace</a></code> mode.</p></div></div><div class="top"><p class="src"><a name="v:trackWrite" class="def">trackWrite</a> :: [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> () <a href="src/Development-Shake-Rules-File.html#trackWrite" class="link">Source</a></p><div class="doc"><p>Track that a file was written by the action preceeding it. If <code><a href="Development-Shake.html#v:shakeLint">shakeLint</a></code> is activated
   then these files must either be the target of this rule, or never referred to by the build system.
   Calls to <code><a href="Development-Shake.html#v:trackWrite">trackWrite</a></code> are automatically inserted in <code><a href="Development-Shake.html#v:LintFSATrace">LintFSATrace</a></code> mode.</p></div></div><div class="top"><p class="src"><a name="v:trackAllow" class="def">trackAllow</a> :: [<a href="Development-Shake.html#t:FilePattern">FilePattern</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> () <a href="src/Development-Shake-Rules-File.html#trackAllow" class="link">Source</a></p><div class="doc"><p>Allow accessing a file in this rule, ignoring any 'trackRead'\/'trackWrite' calls matching
   the pattern.</p></div></div><h1 id="g:10">Directory rules</h1><div class="top"><p class="src"><a name="v:doesFileExist" class="def">doesFileExist</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/Development-Shake-Rules-Directory.html#doesFileExist" class="link">Source</a></p><div class="doc"><p>Returns <code><a href="../base-4.8.2.0/Data-Bool.html#v:True">True</a></code> if the file exists. The existence of the file is tracked as a
   dependency, and if the file is created or deleted the rule will rerun in subsequent builds.</p><p>You should not call <code><a href="Development-Shake.html#v:doesFileExist">doesFileExist</a></code> on files which can be created by the build system.</p></div></div><div class="top"><p class="src"><a name="v:doesDirectoryExist" class="def">doesDirectoryExist</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/Development-Shake-Rules-Directory.html#doesDirectoryExist" class="link">Source</a></p><div class="doc"><p>Returns <code><a href="../base-4.8.2.0/Data-Bool.html#v:True">True</a></code> if the directory exists. The existence of the directory is tracked as a
   dependency, and if the directory is created or delete the rule will rerun in subsequent builds.</p><p>You should not call <code><a href="Development-Shake.html#v:doesDirectoryExist">doesDirectoryExist</a></code> on directories which can be created by the build system.</p></div></div><div class="top"><p class="src"><a name="v:getDirectoryContents" class="def">getDirectoryContents</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>] <a href="src/Development-Shake-Rules-Directory.html#getDirectoryContents" class="link">Source</a></p><div class="doc"><p>Get the contents of a directory. The result will be sorted, and will not contain
   the entries <code>.</code> or <code>..</code> (unlike the standard Haskell version). The resulting paths will be relative
   to the first argument. The result is tracked as a
   dependency, and if it changes the rule will rerun in subsequent builds.</p><p>It is usually simpler to call either <code><a href="Development-Shake.html#v:getDirectoryFiles">getDirectoryFiles</a></code> or <code><a href="Development-Shake.html#v:getDirectoryDirs">getDirectoryDirs</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:getDirectoryFiles" class="def">getDirectoryFiles</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; [<a href="Development-Shake.html#t:FilePattern">FilePattern</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>] <a href="src/Development-Shake-Rules-Directory.html#getDirectoryFiles" class="link">Source</a></p><div class="doc"><p>Get the files anywhere under a directory that match any of a set of patterns.
   For the interpretation of the patterns see <code><a href="Development-Shake.html#v:-63--61--61-">?==</a></code>. All results will be
   relative to the directory argument. The result is tracked as a
   dependency, and if it changes the rule will rerun in subsequent builds.
   Some examples:</p><pre>getDirectoryFiles &quot;Config&quot; [&quot;//*.xml&quot;]
    -- All .xml files anywhere under the Config directory
    -- If Config/foo/bar.xml exists it will return [&quot;foo/bar.xml&quot;]
getDirectoryFiles &quot;Modules&quot; [&quot;*.hs&quot;,&quot;*.lhs&quot;]
    -- All .hs or .lhs in the Modules directory
    -- If Modules/foo.hs and Modules/foo.lhs exist, it will return [&quot;foo.hs&quot;,&quot;foo.lhs&quot;]</pre><p>If you require a qualified file name it is often easier to use <code>&quot;&quot;</code> as the <code><a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a></code> argument,
   for example the following two expressions are equivalent:</p><pre>fmap (map (&quot;Config&quot; &lt;/&gt;)) (getDirectoryFiles &quot;Config&quot; [&quot;//*.xml&quot;])
getDirectoryFiles &quot;&quot; [&quot;Config//*.xml&quot;]</pre><p>If the first argument directory does not exist it will raise an error.
   If <code>foo</code> does not exist, then the first of these error, but the second will not.</p><pre>getDirectoryFiles &quot;foo&quot; [&quot;//*&quot;] -- error
getDirectoryFiles &quot;&quot; [&quot;foo//*&quot;] -- returns []</pre><p>This function is tracked and serves as a dependency. If a rule calls
   <code>getDirectoryFiles &quot;&quot; [&quot;*.c&quot;]</code> and someone adds <code>foo.c</code> to the
   directory, that rule will rebuild. If someone changes one of the <code>.c</code> files,
   but the <em>list</em> of <code>.c</code> files doesn't change, then it will not rebuild.
   As a consequence of being tracked, if the contents change during the build
   (e.g. you are generating <code>.c</code> files in this directory) then the build not reach
   a stable point, which is an error - detected by running with <code>--lint</code>.
   You should only call this function returning source files.</p><p>For an untracked variant see <code><a href="Development-Shake.html#v:getDirectoryFilesIO">getDirectoryFilesIO</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:getDirectoryDirs" class="def">getDirectoryDirs</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>] <a href="src/Development-Shake-Rules-Directory.html#getDirectoryDirs" class="link">Source</a></p><div class="doc"><p>Get the directories in a directory, not including <code>.</code> or <code>..</code>.
   All directories are relative to the argument directory. The result is tracked as a
   dependency, and if it changes the rule will rerun in subsequent builds.
   The rules about creating entries described in <code><a href="Development-Shake.html#v:getDirectoryFiles">getDirectoryFiles</a></code> also apply here.</p><pre>getDirectoryDirs &quot;/Users&quot;
   -- Return all directories in the /Users directory
   -- e.g. [&quot;Emily&quot;,&quot;Henry&quot;,&quot;Neil&quot;]</pre></div></div><div class="top"><p class="src"><a name="v:getDirectoryFilesIO" class="def">getDirectoryFilesIO</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; [<a href="Development-Shake.html#t:FilePattern">FilePattern</a>] -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>] <a href="src/Development-Shake-Rules-Directory.html#getDirectoryFilesIO" class="link">Source</a></p><div class="doc"><p>A version of <code><a href="Development-Shake.html#v:getDirectoryFiles">getDirectoryFiles</a></code> that is in IO, and thus untracked.</p></div></div><h1 id="g:11">Environment rules</h1><div class="top"><p class="src"><a name="v:getEnv" class="def">getEnv</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a>) <a href="src/Development-Shake-Rules-Directory.html#getEnv" class="link">Source</a></p><div class="doc"><p>Return <code><a href="../base-4.8.2.0/Data-Maybe.html#v:Just">Just</a></code> the value of the environment variable, or <code><a href="../base-4.8.2.0/Data-Maybe.html#v:Nothing">Nothing</a></code>
   if the variable is not set. The environment variable is tracked as a
   dependency, and if it changes the rule will rerun in subsequent builds.
   This function is a tracked version of 'getEnv'/'lookupEnv' from the base library.</p><pre>flags &lt;- getEnv &quot;CFLAGS&quot;
<code>cmd</code> &quot;gcc -c&quot; [out] (maybe [] words flags)
</pre></div></div><div class="top"><p class="src"><a name="v:getEnvWithDefault" class="def">getEnvWithDefault</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> <a href="src/Development-Shake-Rules-Directory.html#getEnvWithDefault" class="link">Source</a></p><div class="doc"><p>Return the value of the environment variable (second argument), or the
   default value (first argument) if it is not set. Similar to <code><a href="Development-Shake.html#v:getEnv">getEnv</a></code>.</p><pre>flags &lt;- getEnvWithDefault &quot;-Wall&quot; &quot;CFLAGS&quot;
<code>cmd</code> &quot;gcc -c&quot; [out] flags
</pre></div></div><h1 id="g:12">Oracle rules</h1><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:ShakeValue" class="def">ShakeValue</a> a = (<a href="Development-Shake-Classes.html#t:Show">Show</a> a, <a href="Development-Shake-Classes.html#t:Typeable">Typeable</a> a, <a href="Development-Shake-Classes.html#t:Eq">Eq</a> a, <a href="Development-Shake-Classes.html#t:Hashable">Hashable</a> a, <a href="Development-Shake-Classes.html#t:Binary">Binary</a> a, <a href="Development-Shake-Classes.html#t:NFData">NFData</a> a) <a href="src/Development-Shake-Value.html#ShakeValue" class="link">Source</a></p><div class="doc"><p>Define an alias for the six type classes required for things involved in Shake <code><a href="Development-Shake.html#v:Rule">Rule</a></code>s.
   Using this alias requires the <code>ConstraintKinds</code> extension.</p><p>To define your own values meeting the necessary constraints it is convenient to use the extensions
   <code>GeneralizedNewtypeDeriving</code> and <code>DeriveDataTypeable</code> to write:</p><pre>newtype MyType = MyType (String, Bool) deriving (Show, Typeable, Eq, Hashable, Binary, NFData)</pre><p>Shake needs these instances on keys and values. They are used for:</p><ul><li><code><a href="Development-Shake-Classes.html#t:Show">Show</a></code> is used to print out keys in errors, profiling, progress messages
   and diagnostics.</li><li><code><a href="Development-Shake-Classes.html#t:Typeable">Typeable</a></code> is used because Shake indexes its database by the
   type of the key and value involved in the rule (overlap is not
   allowed for type classes and not allowed in Shake either).</li><li><code><a href="Development-Shake-Classes.html#t:Eq">Eq</a></code> and <code><a href="Development-Shake-Classes.html#t:Hashable">Hashable</a></code> are used on keys in order to build hash maps
   from keys to values.  <code><a href="Development-Shake-Classes.html#t:Eq">Eq</a></code> is used on values to test if the value
   has changed or not (this is used to support unchanging rebuilds,
   where Shake can avoid rerunning rules if it runs a dependency,
   but it turns out that no changes occurred.)  The <code><a href="Development-Shake-Classes.html#t:Hashable">Hashable</a></code>
   instances are only use at runtime (never serialised to disk),
   so they do not have to be stable across runs.
   Hashable on values is not used, and only required for a consistent interface.</li><li><code><a href="Development-Shake-Classes.html#t:Binary">Binary</a></code> is used to serialize keys and values into Shake's
   build database; this lets Shake cache values across runs and
   implement unchanging rebuilds.</li><li><code><a href="Development-Shake-Classes.html#t:NFData">NFData</a></code> is used to avoid space and thunk leaks, especially
   when Shake is parallelized.</li></ul></div></div><div class="top"><p class="src"><a name="v:addOracle" class="def">addOracle</a> :: (<a href="Development-Shake.html#t:ShakeValue">ShakeValue</a> q, <a href="Development-Shake.html#t:ShakeValue">ShakeValue</a> a) =&gt; (q -&gt; <a href="Development-Shake.html#t:Action">Action</a> a) -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> (q -&gt; <a href="Development-Shake.html#t:Action">Action</a> a) <a href="src/Development-Shake-Rules-Oracle.html#addOracle" class="link">Source</a></p><div class="doc"><p>Add extra information which rules can depend on.
   An oracle is a function from a question type <code>q</code>, to an answer type <code>a</code>.
   As an example, we can define an oracle allowing you to depend on the current version of GHC:</p><pre>newtype GhcVersion = GhcVersion () deriving (Show,Typeable,Eq,Hashable,Binary,NFData)
rules = do
    <code><a href="Development-Shake.html#v:addOracle">addOracle</a></code> $ \(GhcVersion _) -&gt; fmap <code><a href="Development-Shake.html#v:fromStdout">fromStdout</a></code> $ <code><a href="Development-Shake.html#v:cmd">cmd</a></code> &quot;ghc --numeric-version&quot; :: Action String
    ... rules ...
</pre><p>If a rule calls <code><code><a href="Development-Shake.html#v:askOracle">askOracle</a></code> (GhcVersion ())</code>, that rule will be rerun whenever the GHC version changes.
   Some notes:</p><ul><li>We define <code>GhcVersion</code> with a <code>newtype</code> around <code>()</code>, allowing the use of <code>GeneralizedNewtypeDeriving</code>.
   All the necessary type classes are exported from <a href="Development-Shake-Classes.html">Development.Shake.Classes</a>.</li><li>Each call to <code><a href="Development-Shake.html#v:addOracle">addOracle</a></code> must use a different type of question.</li><li>Actions passed to <code><a href="Development-Shake.html#v:addOracle">addOracle</a></code> will be run in every build they are required, even if nothing else changes,
   so be careful of slow actions.
   If the result of an oracle does not change it will not invalidate any rules depending on it.
   To always rerun files rules see <code><a href="Development-Shake.html#v:alwaysRerun">alwaysRerun</a></code>.</li><li>If the value returned by <code><a href="Development-Shake.html#v:askOracle">askOracle</a></code> is ignored then <code><a href="Development-Shake.html#v:askOracleWith">askOracleWith</a></code> may help avoid ambiguous type messages.
   Alternatively, use the result of <code><a href="Development-Shake.html#v:addOracle">addOracle</a></code>, which is <code><a href="Development-Shake.html#v:askOracle">askOracle</a></code> restricted to the correct type.</li></ul><p>As a more complex example, consider tracking Haskell package versions:</p><pre>newtype GhcPkgList = GhcPkgList () deriving (Show,Typeable,Eq,Hashable,Binary,NFData)
newtype GhcPkgVersion = GhcPkgVersion String deriving (Show,Typeable,Eq,Hashable,Binary,NFData)

rules = do
    getPkgList &lt;- <code><a href="Development-Shake.html#v:addOracle">addOracle</a></code> $ \GhcPkgList{} -&gt; do
        Stdout out &lt;- <code><a href="Development-Shake.html#v:cmd">cmd</a></code> &quot;ghc-pkg list --simple-output&quot;
        return [(reverse b, reverse a) | x &lt;- words out, let (a,_:b) = break (== '-') $ reverse x]

    getPkgVersion &lt;- <code><a href="Development-Shake.html#v:addOracle">addOracle</a></code> $ \(GhcPkgVersion pkg) -&gt; do
        pkgs &lt;- getPkgList $ GhcPkgList ()
        return $ lookup pkg pkgs

    &quot;myrule&quot; %&gt; \_ -&gt; do
        getPkgVersion $ GhcPkgVersion &quot;shake&quot;
        ... rule using the shake version ...
</pre><p>Using these definitions, any rule depending on the version of <code>shake</code>
   should call <code>getPkgVersion $ GhcPkgVersion &quot;shake&quot;</code> to rebuild when <code>shake</code> is upgraded.</p></div></div><div class="top"><p class="src"><a name="v:askOracle" class="def">askOracle</a> :: (<a href="Development-Shake.html#t:ShakeValue">ShakeValue</a> q, <a href="Development-Shake.html#t:ShakeValue">ShakeValue</a> a) =&gt; q -&gt; <a href="Development-Shake.html#t:Action">Action</a> a <a href="src/Development-Shake-Rules-Oracle.html#askOracle" class="link">Source</a></p><div class="doc"><p>Get information previously added with <code><a href="Development-Shake.html#v:addOracle">addOracle</a></code>. The question/answer types must match those provided
   to <code><a href="Development-Shake.html#v:addOracle">addOracle</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:askOracleWith" class="def">askOracleWith</a> :: (<a href="Development-Shake.html#t:ShakeValue">ShakeValue</a> q, <a href="Development-Shake.html#t:ShakeValue">ShakeValue</a> a) =&gt; q -&gt; a -&gt; <a href="Development-Shake.html#t:Action">Action</a> a <a href="src/Development-Shake-Rules-Oracle.html#askOracleWith" class="link">Source</a></p><div class="doc"><p>Get information previously added with <code><a href="Development-Shake.html#v:addOracle">addOracle</a></code>. The second argument is not used, but can
   be useful to fix the answer type, avoiding ambiguous type error messages.</p></div></div><h1 id="g:13">Special rules</h1><div class="top"><p class="src"><a name="v:alwaysRerun" class="def">alwaysRerun</a> :: <a href="Development-Shake.html#t:Action">Action</a> () <a href="src/Development-Shake-Rules-Rerun.html#alwaysRerun" class="link">Source</a></p><div class="doc"><p>Always rerun the associated action. Useful for defining rules that query
   the environment. For example:</p><pre>&quot;ghcVersion.txt&quot; <code><a href="Development-Shake.html#v:-37--62-">%&gt;</a></code> \out -&gt; do
    <code><a href="Development-Shake.html#v:alwaysRerun">alwaysRerun</a></code>
    <code><a href="Development-Shake.html#v:Stdout">Stdout</a></code> stdout &lt;- <code><a href="Development-Shake.html#v:cmd">cmd</a></code> &quot;ghc --numeric-version&quot;
    <code><a href="Development-Shake.html#v:writeFileChanged">writeFileChanged</a></code> out stdout
</pre><p>In make, the <code>.PHONY</code> attribute on file-producing rules has a similar effect.</p><p>Note that <code><a href="Development-Shake.html#v:alwaysRerun">alwaysRerun</a></code> is applied when a rule is executed. Modifying an existing rule
   to insert <code><a href="Development-Shake.html#v:alwaysRerun">alwaysRerun</a></code> will <em>not</em> cause that rule to rerun next time.</p></div></div><h1 id="g:14">Resources</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Resource" class="def">Resource</a> <a href="src/Development-Shake-Resource.html#Resource" class="link">Source</a></p><div class="doc"><p>A type representing an external resource which the build system should respect. There
   are two ways to create <code><a href="Development-Shake.html#t:Resource">Resource</a></code>s in Shake:</p><ul><li><code><a href="Development-Shake.html#v:newResource">newResource</a></code> creates a finite resource, stopping too many actions running
   simultaneously.</li><li><code><a href="Development-Shake.html#v:newThrottle">newThrottle</a></code> creates a throttled resource, stopping too many actions running
   over a short time period.</li></ul><p>These resources are used with <code><a href="Development-Shake.html#v:withResource">withResource</a></code> when defining rules. Typically only
   system commands (such as <code><a href="Development-Shake.html#v:cmd">cmd</a></code>) should be run inside <code><a href="Development-Shake.html#v:withResource">withResource</a></code>,
   not commands such as <code><a href="Development-Shake.html#v:need">need</a></code>.</p><p>Be careful that the actions run within <code><a href="Development-Shake.html#v:withResource">withResource</a></code> do not themselves require further
   resources, or you may get a &quot;thread blocked indefinitely in an MVar operation&quot; exception.
   If an action requires multiple resources, use <code><a href="Development-Shake.html#v:withResources">withResources</a></code> to avoid deadlock.</p></div><div class="subs instances"><p id="control.i:Resource" class="caption collapser" onclick="toggleSection('i:Resource')">Instances</p><div id="section.i:Resource" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake-Classes.html#t:Eq">Eq</a> <a href="Development-Shake.html#t:Resource">Resource</a></span> <a href="src/Development-Shake-Resource.html#line-56" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Ord.html#t:Ord">Ord</a> <a href="Development-Shake.html#t:Resource">Resource</a></span> <a href="src/Development-Shake-Resource.html#line-57" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Development-Shake-Classes.html#t:Show">Show</a> <a href="Development-Shake.html#t:Resource">Resource</a></span> <a href="src/Development-Shake-Resource.html#line-55" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:newResource" class="def">newResource</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> <a href="Development-Shake.html#t:Resource">Resource</a> <a href="src/Development-Shake-Core.html#newResource" class="link">Source</a></p><div class="doc"><p>Create a finite resource, given a name (for error messages) and a quantity of the resource that exists.
   Shake will ensure that actions using the same finite resource do not execute in parallel.
   As an example, only one set of calls to the Excel API can occur at one time, therefore
   Excel is a finite resource of quantity 1. You can write:</p><pre><code><a href="Development-Shake.html#v:shake">shake</a></code> <code><a href="Development-Shake.html#v:shakeOptions">shakeOptions</a></code>{<code><a href="Development-Shake.html#v:shakeThreads">shakeThreads</a></code>=2} $ do
   <code><a href="Development-Shake.html#v:want">want</a></code> [&quot;a.xls&quot;,&quot;b.xls&quot;]
   excel &lt;- <code><a href="Development-Shake.html#v:newResource">newResource</a></code> &quot;Excel&quot; 1
   &quot;*.xls&quot; <code><a href="Development-Shake.html#v:-37--62-">%&gt;</a></code> \out -&gt;
       <code><a href="Development-Shake.html#v:withResource">withResource</a></code> excel 1 $
           <code><a href="Development-Shake.html#v:cmd">cmd</a></code> &quot;excel&quot; out ...
</pre><p>Now the two calls to <code>excel</code> will not happen in parallel.</p><p>As another example, calls to compilers are usually CPU bound but calls to linkers are usually
   disk bound. Running 8 linkers will often cause an 8 CPU system to grid to a halt. We can limit
   ourselves to 4 linkers with:</p><pre>disk &lt;- <code><a href="Development-Shake.html#v:newResource">newResource</a></code> &quot;Disk&quot; 4
<code><a href="Development-Shake.html#v:want">want</a></code> [show i <code><a href="Development-Shake-FilePath.html#v:-60-.-62-">&lt;.&gt;</a></code> &quot;exe&quot; | i &lt;- [1..100]]
&quot;*.exe&quot; <code><a href="Development-Shake.html#v:-37--62-">%&gt;</a></code> \out -&gt;
    <code><a href="Development-Shake.html#v:withResource">withResource</a></code> disk 1 $
        <code><a href="Development-Shake.html#v:cmd">cmd</a></code> &quot;ld -o&quot; [out] ...
&quot;*.o&quot; <code><a href="Development-Shake.html#v:-37--62-">%&gt;</a></code> \out -&gt;
    <code><a href="Development-Shake.html#v:cmd">cmd</a></code> &quot;cl -o&quot; [out] ...
</pre></div></div><div class="top"><p class="src"><a name="v:newResourceIO" class="def">newResourceIO</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Development-Shake.html#t:Resource">Resource</a> <a href="src/Development-Shake-Resource.html#newResourceIO" class="link">Source</a></p><div class="doc"><p>A version of <code><a href="Development-Shake.html#v:newResource">newResource</a></code> that runs in IO, and can be called before calling <code><a href="Development-Shake.html#v:shake">shake</a></code>.
   Most people should use <code><a href="Development-Shake.html#v:newResource">newResource</a></code> instead.</p></div></div><div class="top"><p class="src"><a name="v:withResource" class="def">withResource</a> :: <a href="Development-Shake.html#t:Resource">Resource</a> -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> a -&gt; <a href="Development-Shake.html#t:Action">Action</a> a <a href="src/Development-Shake-Core.html#withResource" class="link">Source</a></p><div class="doc"><p>Run an action which uses part of a finite resource. For more details see <code><a href="Development-Shake.html#t:Resource">Resource</a></code>.
   You cannot depend on a rule (e.g. <code>need</code>) while a resource is held.</p></div></div><div class="top"><p class="src"><a name="v:withResources" class="def">withResources</a> :: [(<a href="Development-Shake.html#t:Resource">Resource</a>, <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a>)] -&gt; <a href="Development-Shake.html#t:Action">Action</a> a -&gt; <a href="Development-Shake.html#t:Action">Action</a> a <a href="src/Development-Shake-Core.html#withResources" class="link">Source</a></p><div class="doc"><p>Run an action which uses part of several finite resources. Acquires the resources in a stable
   order, to prevent deadlock. If all rules requiring more than one resource acquire those
   resources with a single call to <code><a href="Development-Shake.html#v:withResources">withResources</a></code>, resources will not deadlock.</p></div></div><div class="top"><p class="src"><a name="v:newThrottle" class="def">newThrottle</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a> -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> <a href="Development-Shake.html#t:Resource">Resource</a> <a href="src/Development-Shake-Core.html#newThrottle" class="link">Source</a></p><div class="doc"><p>Create a throttled resource, given a name (for error messages) and a number of resources (the <code><a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></code>) that can be
   used per time period (the <code><a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></code> in seconds). Shake will ensure that actions using the same throttled resource
   do not exceed the limits. As an example, let us assume that making more than 1 request every 5 seconds to
   Google results in our client being blacklisted, we can write:</p><pre>google &lt;- <code><a href="Development-Shake.html#v:newThrottle">newThrottle</a></code> &quot;Google&quot; 1 5
&quot;*.url&quot; <code><a href="Development-Shake.html#v:-37--62-">%&gt;</a></code> \out -&gt; do
    <code><a href="Development-Shake.html#v:withResource">withResource</a></code> google 1 $
        <code><a href="Development-Shake.html#v:cmd">cmd</a></code> &quot;wget&quot; [&quot;http://google.com?q=&quot; ++ <code><a href="Development-Shake-FilePath.html#v:takeBaseName">takeBaseName</a></code> out] &quot;-O&quot; [out]
</pre><p>Now we will wait at least 5 seconds after querying Google before performing another query. If Google change the rules to
   allow 12 requests per minute we can instead use <code><code><a href="Development-Shake.html#v:newThrottle">newThrottle</a></code> &quot;Google&quot; 12 60</code>, which would allow
   greater parallelisation, and avoid throttling entirely if only a small number of requests are necessary.</p><p>In the original example we never make a fresh request until 5 seconds after the previous request has <em>completed</em>. If we instead
   want to throttle requests since the previous request <em>started</em> we can write:</p><pre>google &lt;- <code><a href="Development-Shake.html#v:newThrottle">newThrottle</a></code> &quot;Google&quot; 1 5
&quot;*.url&quot; <code><a href="Development-Shake.html#v:-37--62-">%&gt;</a></code> \out -&gt; do
    <code><a href="Development-Shake.html#v:withResource">withResource</a></code> google 1 $ return ()
    <code><a href="Development-Shake.html#v:cmd">cmd</a></code> &quot;wget&quot; [&quot;http://google.com?q=&quot; ++ <code><a href="Development-Shake-FilePath.html#v:takeBaseName">takeBaseName</a></code> out] &quot;-O&quot; [out]
</pre><p>However, the rule may not continue running immediately after <code><a href="Development-Shake.html#v:withResource">withResource</a></code> completes, so while
   we will never exceed an average of 1 request every 5 seconds, we may end up running an unbounded number of
   requests simultaneously. If this limitation causes a problem in practice it can be fixed.</p></div></div><div class="top"><p class="src"><a name="v:newThrottleIO" class="def">newThrottleIO</a> :: <a href="../base-4.8.2.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Development-Shake.html#t:Resource">Resource</a> <a href="src/Development-Shake-Resource.html#newThrottleIO" class="link">Source</a></p><div class="doc"><p>A version of <code><a href="Development-Shake.html#v:newThrottle">newThrottle</a></code> that runs in IO, and can be called before calling <code><a href="Development-Shake.html#v:shake">shake</a></code>.
   Most people should use <code><a href="Development-Shake.html#v:newThrottle">newThrottle</a></code> instead.</p></div></div><div class="top"><p class="src"><a name="v:unsafeExtraThread" class="def">unsafeExtraThread</a> :: <a href="Development-Shake.html#t:Action">Action</a> a -&gt; <a href="Development-Shake.html#t:Action">Action</a> a <a href="src/Development-Shake-Core.html#unsafeExtraThread" class="link">Source</a></p><div class="doc"><p>Run an action without counting to the thread limit, typically used for actions that execute
   on remote machines using barely any local CPU resources.
   Unsafe as it allows the <code><a href="Development-Shake.html#v:shakeThreads">shakeThreads</a></code> limit to be exceeded.
   You cannot depend on a rule (e.g. <code>need</code>) while the extra thread is executing.
   If the rule blocks (e.g. calls <code><a href="Development-Shake.html#v:withResource">withResource</a></code>) then the extra thread may be used by some other action.
   Only really suitable for calling 'cmd'/'command'.</p></div></div><h1 id="g:15">Cache</h1><div class="top"><p class="src"><a name="v:newCache" class="def">newCache</a> :: (<a href="Development-Shake-Classes.html#t:Eq">Eq</a> k, <a href="Development-Shake-Classes.html#t:Hashable">Hashable</a> k) =&gt; (k -&gt; <a href="Development-Shake.html#t:Action">Action</a> v) -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> (k -&gt; <a href="Development-Shake.html#t:Action">Action</a> v) <a href="src/Development-Shake-Core.html#newCache" class="link">Source</a></p><div class="doc"><p>Given an action on a key, produce a cached version that will execute the action at most once per key.
   Using the cached result will still result include any dependencies that the action requires.
   Each call to <code><a href="Development-Shake.html#v:newCache">newCache</a></code> creates a separate cache that is independent of all other calls to <code><a href="Development-Shake.html#v:newCache">newCache</a></code>.</p><p>This function is useful when creating files that store intermediate values,
   to avoid the overhead of repeatedly reading from disk, particularly if the file requires expensive parsing.
   As an example:</p><pre>digits &lt;- <code><a href="Development-Shake.html#v:newCache">newCache</a></code> $ \file -&gt; do
    src &lt;- readFile' file
    return $ length $ filter isDigit src
&quot;*.digits&quot; <code><a href="Development-Shake.html#v:-37--62-">%&gt;</a></code> \x -&gt; do
    v1 &lt;- digits (<code>dropExtension</code> x)
    v2 &lt;- digits (<code>dropExtension</code> x)
    <code><a href="Development-Shake.html#v:writeFile-39-">writeFile'</a></code> x $ show (v1,v2)
</pre><p>To create the result <code>MyFile.txt.digits</code> the file <code>MyFile.txt</code> will be read and counted, but only at most
   once per execution.</p></div></div><div class="top"><p class="src"><a name="v:newCacheIO" class="def">newCacheIO</a> :: (<a href="Development-Shake-Classes.html#t:Eq">Eq</a> k, <a href="Development-Shake-Classes.html#t:Hashable">Hashable</a> k) =&gt; (k -&gt; <a href="Development-Shake.html#t:Action">Action</a> v) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (k -&gt; <a href="Development-Shake.html#t:Action">Action</a> v) <a href="src/Development-Shake-Core.html#newCacheIO" class="link">Source</a></p><div class="doc"><p>A version of <code><a href="Development-Shake.html#v:newCache">newCache</a></code> that runs in IO, and can be called before calling <code><a href="Development-Shake.html#v:shake">shake</a></code>.
   Most people should use <code><a href="Development-Shake.html#v:newCache">newCache</a></code> instead.</p></div></div><h1 id="g:16">Deprecated</h1><div class="top"><p class="src"><a name="v:-42--62-" class="def">(*&gt;)</a> :: <a href="Development-Shake.html#t:FilePattern">FilePattern</a> -&gt; (<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()) -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> () <span class="fixity">infix 1</span><span class="rightedge"></span> <a href="src/Development-Shake.html#%2A%3E" class="link">Source</a></p><div class="doc"><p><em>Deprecated:</em> Alias for <code><a href="Development-Shake.html#v:-37--62-">%&gt;</a></code>. Note that <code>*&gt;</code> clashes with a Prelude operator in GHC 7.10.</p></div></div><div class="top"><p class="src"><a name="v:-124--42--62-" class="def">(|*&gt;)</a> :: [<a href="Development-Shake.html#t:FilePattern">FilePattern</a>] -&gt; (<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()) -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> () <span class="fixity">infix 1</span><span class="rightedge"></span> <a href="src/Development-Shake.html#%7C%2A%3E" class="link">Source</a></p><div class="doc"><p><em>Deprecated:</em> Alias for <code><a href="Development-Shake.html#v:-124--37--62-">|%&gt;</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:-38--42--62-" class="def">(&amp;*&gt;)</a> :: [<a href="Development-Shake.html#t:FilePattern">FilePattern</a>] -&gt; ([<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()) -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> () <span class="fixity">infix 1</span><span class="rightedge"></span> <a href="src/Development-Shake.html#%26%2A%3E" class="link">Source</a></p><div class="doc"><p><em>Deprecated:</em> Alias for <code><a href="Development-Shake.html#v:-38--37--62-">&amp;%&gt;</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:-42--42--62-" class="def">(**&gt;)</a> :: [<a href="Development-Shake.html#t:FilePattern">FilePattern</a>] -&gt; (<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()) -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> () <span class="fixity">infix 1</span><span class="rightedge"></span> <a href="src/Development-Shake.html#%2A%2A%3E" class="link">Source</a></p><div class="doc"><p><em>Deprecated:</em> Alias for <code><a href="Development-Shake.html#v:-124--37--62-">|%&gt;</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:-42--62--62-" class="def">(*&gt;&gt;)</a> :: [<a href="Development-Shake.html#t:FilePattern">FilePattern</a>] -&gt; ([<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()) -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> () <span class="fixity">infix 1</span><span class="rightedge"></span> <a href="src/Development-Shake.html#%2A%3E%3E" class="link">Source</a></p><div class="doc"><p><em>Deprecated:</em> Alias for <code><a href="Development-Shake.html#v:-38--37--62-">&amp;%&gt;</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:-63--62--62-" class="def">(?&gt;&gt;)</a> :: (<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> [<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>]) -&gt; ([<a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> ()) -&gt; <a href="Development-Shake.html#t:Rules">Rules</a> () <span class="fixity">infix 1</span><span class="rightedge"></span> <a href="src/Development-Shake.html#%3F%3E%3E" class="link">Source</a></p><div class="doc"><p><em>Deprecated:</em> Alias for <code><a href="Development-Shake.html#v:-38--63--62-">&amp;?&gt;</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:system-39-" class="def">system'</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; [<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> () <a href="src/Development-Shake-Derived.html#system%27" class="link">Source</a></p><div class="doc"><div class="warning"><p>Deprecated: Use <code>command</code> or <code>cmd</code></p></div><p><em>Deprecated:</em> Please use <code>command</code> or <code>cmd</code> instead.
   This function will be removed in a future version.</p><p>Execute a system command. This function will raise an error if the exit code is non-zero.
   Before running <code><a href="Development-Shake.html#v:system-39-">system'</a></code> make sure you <code><a href="Development-Shake.html#v:need">need</a></code> any required files.</p></div></div><div class="top"><p class="src"><a name="v:systemCwd" class="def">systemCwd</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; [<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> () <a href="src/Development-Shake-Derived.html#systemCwd" class="link">Source</a></p><div class="doc"><div class="warning"><p>Deprecated: Use <code>command</code> or <code>cmd</code> with <code>Cwd</code></p></div><p><em>Deprecated:</em> Please use <code>command</code> or <code>cmd</code> instead, with <code>Cwd</code>.
   This function will be removed in a future version.</p><p>Execute a system command with a specified current working directory (first argument).
   This function will raise an error if the exit code is non-zero.
   Before running <code><a href="Development-Shake.html#v:systemCwd">systemCwd</a></code> make sure you <code><a href="Development-Shake.html#v:need">need</a></code> any required files.</p><pre><code><a href="Development-Shake.html#v:systemCwd">systemCwd</a></code> &quot;/usr/MyDirectory&quot; &quot;pwd&quot; []
</pre></div></div><div class="top"><p class="src"><a name="v:systemOutput" class="def">systemOutput</a> :: <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> -&gt; [<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>] -&gt; <a href="Development-Shake.html#t:Action">Action</a> (<a href="../base-4.8.2.0/Data-String.html#t:String">String</a>, <a href="../base-4.8.2.0/Data-String.html#t:String">String</a>) <a href="src/Development-Shake-Derived.html#systemOutput" class="link">Source</a></p><div class="doc"><div class="warning"><p>Deprecated: Use <code>command</code> or <code>cmd</code> with <code>Stdout</code> or <code>Stderr</code></p></div><p><em>Deprecated:</em> Please use <code>command</code> or <code>cmd</code> instead, with <code>Stdout</code> or <code>Stderr</code>.
   This function will be removed in a future version.</p><p>Execute a system command, returning <code>(stdout,stderr)</code>.
   This function will raise an error if the exit code is non-zero.
   Before running <code><a href="Development-Shake.html#v:systemOutput">systemOutput</a></code> make sure you <code><a href="Development-Shake.html#v:need">need</a></code> any required files.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>